import{r as s,A as g,c as u,j as e,M as v}from"./index-DW-f9EnK.js";const L=()=>{const{user:a,checkMembershipStatus:o,getMembershipBenefits:l,updateMembership:f}=s.useContext(g),d=u(),[j,n]=s.useState(null),[k,m]=s.useState(!0),[N,i]=s.useState(null),c=[{id:"premium",name:"高级会员",price:99,period:"month",description:"解锁高级AI创作功能",features:["无限AI生成次数","高级AI模型访问","高清作品导出","优先处理队列","专属模板库","去除水印"],popular:!0},{id:"vip",name:"VIP会员",price:199,period:"month",description:"享受顶级AI创作体验",features:["包含高级会员所有权益","专属AI训练模型","一对一设计师服务","商业授权","专属活动邀请","无限作品存储"]}];s.useEffect(()=>{(async()=>{try{const t=await v.get("/api/membership/benefits");t.ok&&t.data&&n(t.data.benefits)}catch(t){console.error("获取会员权益失败:",t),i("获取会员权益失败")}finally{m(!1)}})()},[]);const x=async r=>{try{d("/membership/payment",{state:{plan:r}})}catch(t){console.error("升级会员失败:",t),i("升级会员失败")}},b=async()=>{try{d("/membership/payment",{state:{plan:a==null?void 0:a.membershipLevel,renew:!0}})}catch(r){console.error("续费失败:",r),i("续费失败")}};if(!a)return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"请先登录"}),e.jsx("button",{className:"bg-primary text-white px-6 py-3 rounded-full hover:bg-primary/90 transition-colors",onClick:()=>d("/login"),children:"登录"})]})});const p=o(),h=l();return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-10","aria-label":"会员中心页面标题",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary",children:"会员中心"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"管理您的会员权益"})]}),e.jsx("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-6 mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"member-status-title",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{id:"member-status-title",className:"text-2xl font-bold mb-2 text-gray-900 dark:text-[var(--text-primary)]",children:["您当前是 ",a.membershipLevel==="free"?"免费会员":a.membershipLevel==="premium"?"高级会员":"VIP会员"]}),e.jsxs("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] mb-4",children:["会员状态: ",p?e.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-[var(--color-accent)] px-3 py-1 rounded-full text-sm font-medium",children:"有效"}):e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 px-3 py-1 rounded-full text-sm font-medium",children:"已过期"})]}),a.membershipEnd&&e.jsxs("p",{className:"text-gray-600 dark:text-[var(--text-secondary)]",children:["到期时间: ",e.jsx("span",{className:"font-medium",children:new Date(a.membershipEnd).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-6 md:mt-0 flex flex-col sm:flex-row gap-4",children:[a.membershipLevel!=="free"&&e.jsx("button",{className:"bg-gray-100 dark:bg-[var(--bg-tertiary)] text-gray-800 dark:text-[var(--text-primary)] px-6 py-3 rounded-lg hover:bg-gray-200 dark:hover:bg-[var(--bg-hover)] transition-colors w-full sm:w-auto font-medium border border-gray-200 dark:border-[var(--border-primary)]",onClick:b,"aria-label":"续费会员",children:"续费"}),a.membershipLevel!=="vip"&&e.jsx("button",{className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors w-full sm:w-auto font-medium hover:shadow-lg",onClick:()=>d("/membership/upgrade"),"aria-label":"升级会员",children:"升级会员"})]})]})}),e.jsxs("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-6 mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"member-benefits-title",children:[e.jsx("h2",{id:"member-benefits-title",className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"您的权益"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-3xl mx-auto",children:h.map((r,t)=>e.jsxs("li",{className:"flex items-center space-x-3 bg-gray-50 dark:bg-[var(--bg-tertiary)] px-4 py-3 rounded-lg border border-gray-100 dark:border-[var(--border-primary)]",children:[e.jsx("span",{className:"text-primary dark:text-[var(--color-primary)]",children:"✓"}),e.jsx("span",{className:"text-gray-700 dark:text-[var(--text-primary)]",children:r})]},t))})]}),e.jsxs("section",{className:"mb-12","aria-labelledby":"upgrade-title",children:[e.jsx("h2",{id:"upgrade-title",className:"text-3xl font-bold mb-8 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"升级会员"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:c.map(r=>e.jsxs("article",{className:`rounded-2xl overflow-hidden transition-all duration-300 flex flex-col ${r.id==="vip"?"border-2 border-purple-500 dark:border-purple-400 shadow-lg hover:shadow-xl bg-gradient-to-b from-white to-purple-50 dark:from-[var(--bg-secondary)] dark:to-purple-900/20":r.popular?"border-2 border-primary shadow-md hover:shadow-lg bg-white dark:bg-[var(--bg-secondary)]":"border border-gray-200 dark:border-[var(--border-primary)] shadow-sm hover:shadow-md bg-white dark:bg-[var(--bg-secondary)]"}`,"aria-labelledby":`plan-title-${r.id}`,children:[r.popular&&r.id==="premium"&&e.jsx("div",{className:"bg-primary text-white text-center py-1.5 font-medium","aria-label":"最受欢迎套餐",children:"最受欢迎"}),r.id==="vip"&&e.jsx("div",{className:"bg-purple-600 dark:bg-purple-500 text-white text-center py-1.5 font-medium","aria-label":"顶级会员",children:"顶级会员"}),e.jsxs("div",{className:"p-6 flex-1",children:[e.jsx("h3",{id:`plan-title-${r.id}`,className:"text-xl font-bold mb-2 text-center text-gray-900 dark:text-[var(--text-primary)]",children:r.name}),e.jsxs("div",{className:"flex items-end justify-center mb-4",children:[e.jsxs("span",{className:`text-3xl font-bold ${r.id==="vip"?"text-purple-600 dark:text-purple-400":"text-primary"}`,children:["¥",r.price]}),e.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-[var(--text-secondary)] ml-1",children:["/",r.period]})]}),e.jsx("p",{className:`text-center mb-4 ${r.id==="vip"?"text-purple-600 dark:text-purple-400":"text-primary"}`,children:r.description}),e.jsx("ul",{className:"space-y-2.5",children:r.features.map((t,y)=>e.jsxs("li",{className:"flex items-center space-x-3 py-1",children:[e.jsx("span",{className:`flex-shrink-0 ${r.id==="vip"?"text-purple-600 dark:text-purple-400":"text-primary"}`,children:"✓"}),e.jsx("span",{className:"text-gray-700 dark:text-[var(--text-primary)]",children:t})]},y))})]}),e.jsx("div",{className:"p-6 pt-4",children:e.jsx("button",{className:`w-full py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-[1.02] ${a.membershipLevel===r.id?"bg-gray-100 dark:bg-[var(--bg-tertiary)] text-gray-500 dark:text-[var(--text-secondary)] cursor-not-allowed border border-gray-200 dark:border-[var(--border-primary)]":r.id==="vip"?"bg-purple-600 dark:bg-purple-500 hover:bg-purple-700 dark:hover:bg-purple-600 text-white hover:shadow-lg":"bg-primary hover:bg-primary/90 text-white hover:shadow-lg"}`,onClick:()=>x(r.id),disabled:a.membershipLevel===r.id,"aria-label":`${a.membershipLevel===r.id?"当前会员":"立即升级"}${r.name}`,children:a.membershipLevel===r.id?"当前会员":"立即升级"})})]},r.id))})]}),e.jsxs("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-8 max-w-5xl mx-auto mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"faq-title",children:[e.jsx("h2",{id:"faq-title",className:"text-2xl font-bold mb-8 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"常见问题"}),e.jsxs("div",{className:"space-y-5 max-w-3xl mx-auto",children:[e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"如何升级会员？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"点击上方的升级按钮，选择您想要的会员套餐，完成支付即可升级。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"会员到期后会自动续费吗？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"目前不会自动续费，到期前我们会提醒您手动续费。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"可以退款吗？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"会员购买后7天内可以申请退款，超过7天不支持退款。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"如何使用会员权益？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"升级会员后，您可以直接使用所有会员权益，无需额外操作。"})]})]})]})]})})};export{L as default};

import{j as t,t as d}from"./index-DW-f9EnK.js";const C=({isDark:s,scheduled:o,onScheduledChange:c,scheduledTitle:x,onScheduledTitleChange:u,scheduledContent:m,onScheduledContentChange:h,scheduledTime:p,onScheduledTimeChange:b,mode:g,onModeChange:j,selectedStyle:y,onSelectedStyleChange:w,selectedTopic:f,onSelectedTopicChange:N,STYLE_LIST:v,TOPIC_LIST:$,now:S,threads:M,onThreadsChange:z})=>{const I=e=>{if(e<=0)return"å·²åˆ°æœŸ";const r=Math.floor(e/6e4),a=Math.floor(r/1440),n=Math.floor(r%1440/60),i=r%60;return a>0?`${a}å¤©${n}å°æ—¶${i}åˆ†é’Ÿ`:n>0?`${n}å°æ—¶${i}åˆ†é’Ÿ`:`${i}åˆ†é’Ÿ`},J=e=>{const r=o.find(l=>l.id===e);if(!r)return;const n=[{id:`t-${Date.now()}`,title:r.title,content:r.content,createdAt:Date.now(),replies:[],topic:(r.targetMode==="style",r.targetValue),upvotes:0},...M];z(n),localStorage.setItem("jmzf_threads",JSON.stringify(n));const i=o.map(l=>l.id===e?{...l,published:!0}:l);c(i),localStorage.setItem("jmzf_scheduled",JSON.stringify(i)),d.success("å®šæ—¶ä»»åŠ¡å·²å‘å¸ƒ")},O=e=>{const r=o.filter(a=>a.id!==e);c(r),localStorage.setItem("jmzf_scheduled",JSON.stringify(r)),d.success("å®šæ—¶ä»»åŠ¡å·²åˆ é™¤")},V=()=>{const e=x.trim(),r=m.trim(),a=Date.parse(p);if(!e||!r||isNaN(a))return;const n=g==="style"?y:f,l=[{id:`s-${Date.now()}`,title:e,content:r,time:a,published:!1,targetMode:g,targetValue:n},...o];c(l),localStorage.setItem("jmzf_scheduled",JSON.stringify(l)),u(""),h(""),b(""),d.success("å·²æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡")};return t.jsxs("div",{className:`mb-6 rounded-2xl p-4 ${s?"bg-gray-800 ring-1 ring-gray-700 shadow-lg":"bg-white ring-1 ring-gray-200 shadow-lg"}`,children:[t.jsx("div",{className:"font-medium mb-3",children:t.jsx("span",{className:"flex items-center gap-2",children:"ðŸ› ï¸ è¯é¢˜è¿è¥å·¥å…·"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:`${s?"bg-gray-700 ring-1 ring-gray-700":"bg-gray-50 ring-1 ring-gray-200"} rounded-xl p-4`,children:[t.jsx("div",{className:"font-medium mb-2",children:t.jsx("span",{className:"flex items-center gap-2",children:"â° åˆ›å»ºå®šæ—¶å‘å¸ƒ"})}),t.jsx("input",{value:x,onChange:e=>u(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} w-full px-3 py-2 rounded-lg border mb-2 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors`,placeholder:"æ ‡é¢˜"}),t.jsx("textarea",{value:m,onChange:e=>h(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} w-full h-20 px-3 py-2 rounded-lg border mb-2 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors`,placeholder:"å†…å®¹"}),t.jsx("input",{type:"datetime-local",value:p,onChange:e=>b(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} w-full px-3 py-2 rounded-lg border mb-2 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors`}),t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-xs opacity-70",children:"ç›®æ ‡å­ç¤¾åŒºï¼š"}),t.jsxs("select",{value:g,onChange:e=>j(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} px-3 py-1 rounded-lg border text-xs`,children:[t.jsx("option",{value:"style",children:"é£Žæ ¼"}),t.jsx("option",{value:"topic",children:"é¢˜æ"})]}),g==="style"?t.jsx("select",{value:y,onChange:e=>w(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} px-3 py-1 rounded-lg border text-xs`,children:v.map(e=>t.jsx("option",{value:e,children:e},e))}):t.jsx("select",{value:f,onChange:e=>N(e.target.value),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} px-3 py-1 rounded-lg border text-xs`,children:$.map(e=>t.jsx("option",{value:e,children:e},e))})]}),t.jsx("button",{onClick:V,className:"bg-red-600 text-white px-3 py-2 rounded-lg w-full hover:bg-red-700 transition-colors shadow-sm",children:"æ·»åŠ åˆ°å®šæ—¶"})]}),t.jsxs("div",{className:`${s?"bg-gray-700 ring-1 ring-gray-700":"bg-gray-50 ring-1 ring-gray-200"} rounded-xl p-4 md:col-span-2`,children:[t.jsx("div",{className:"font-medium mb-2",children:"å®šæ—¶ä»»åŠ¡åˆ—è¡¨"}),t.jsxs("ul",{className:"space-y-2",children:[o.map(e=>t.jsxs("li",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-3 flex items-center justify-between ring-1 ${s?"ring-gray-700":"ring-gray-200"}`,children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-sm flex items-center gap-2",children:[t.jsx("span",{children:e.title}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${e.published?"bg-green-600 text-white":"bg-yellow-500 text-white"}`,children:e.published?"å·²å‘å¸ƒ":"å¾…å‘å¸ƒ"})]}),t.jsxs("div",{className:"text-xs opacity-70",children:[new Date(e.time).toLocaleString()," â€¢ å€’è®¡æ—¶ ",I(e.time-S)," â€¢ ç›®æ ‡ ",e.targetValue]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>J(e.id),disabled:e.published,"aria-disabled":e.published,className:`${e.published?s?"bg-gray-600 text-gray-300":"bg-gray-300 text-gray-600":"bg-red-600 text-white hover:bg-red-700"} px-3 py-1 rounded-lg text-xs transition-colors`,children:"ç«‹å³å‘å¸ƒ"}),t.jsx("button",{onClick:()=>O(e.id),className:`${s?"bg-gray-800 text-white":"bg-white text-gray-900"} px-3 py-1 rounded-lg text-xs ring-1 ${s?"ring-gray-700":"ring-gray-200"}`,children:"åˆ é™¤"})]})]},e.id)),o.length===0&&t.jsx("li",{className:"text-sm opacity-60 rounded-lg border-2 border-dashed p-4 text-center",children:"æš‚æ— å®šæ—¶ä»»åŠ¡"})]})]})]})]})};export{C as default};

var o=Object.defineProperty;var d=(r,t,e)=>t in r?o(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var p=(r,t,e)=>d(r,typeof t!="symbol"?t+"":t,e);class c{constructor(){p(this,"ASSETS_KEY","jmzf_ip_assets");p(this,"PARTNERS_KEY","jmzf_partnerships");p(this,"ipAssets",[{id:"ip-001",name:"国潮插画系列",description:"融合传统中国元素与现代设计风格的插画系列",type:"illustration",originalWorkId:"work-001",stages:[{id:"stage-1",name:"创意设计",description:"完成原创设计作品",completed:!0,completedAt:"2025-11-01"},{id:"stage-2",name:"版权存证",description:"完成作品版权存证",completed:!0,completedAt:"2025-11-02"},{id:"stage-3",name:"IP孵化",description:"将设计转化为IP资产",completed:!1},{id:"stage-4",name:"商业合作",description:"对接品牌合作机会",completed:!1},{id:"stage-5",name:"收益分成",description:"获得作品收益分成",completed:!1}],commercialValue:5e3,createdAt:"2025-11-01",updatedAt:"2025-11-02",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=IP%20asset%20example%201"},{id:"ip-002",name:"传统纹样创新",description:"基于传统纹样进行创新设计的图案集合",type:"pattern",originalWorkId:"work-002",stages:[{id:"stage-1",name:"创意设计",description:"完成原创设计作品",completed:!0,completedAt:"2025-10-25"},{id:"stage-2",name:"版权存证",description:"完成作品版权存证",completed:!0,completedAt:"2025-10-26"},{id:"stage-3",name:"IP孵化",description:"将设计转化为IP资产",completed:!0,completedAt:"2025-10-30"},{id:"stage-4",name:"商业合作",description:"对接品牌合作机会",completed:!1},{id:"stage-5",name:"收益分成",description:"获得作品收益分成",completed:!1}],commercialValue:8e3,createdAt:"2025-10-25",updatedAt:"2025-10-30",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=IP%20asset%20example%202"}]);p(this,"partnerships",[{id:"partnership-001",brandName:"桂发祥",brandLogo:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Brand%20logo%20example%201",description:"为桂发祥设计国潮风格包装",reward:"¥15,000",status:"negotiating",ipAssetId:"ip-001",createdAt:"2025-11-05",updatedAt:"2025-11-07"}]);try{const t=localStorage.getItem(this.ASSETS_KEY);t&&(this.ipAssets=JSON.parse(t));const e=localStorage.getItem(this.PARTNERS_KEY);e&&(this.partnerships=JSON.parse(e))}catch{}}saveAssets(){try{localStorage.setItem(this.ASSETS_KEY,JSON.stringify(this.ipAssets))}catch{}}savePartnerships(){try{localStorage.setItem(this.PARTNERS_KEY,JSON.stringify(this.partnerships))}catch{}}getAllIPAssets(){return[...this.ipAssets]}getIPAssetById(t){return this.ipAssets.find(e=>e.id===t)}createIPAsset(t){const e={...t,id:`ip-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.ipAssets.push(e),this.saveAssets(),e}updateIPAsset(t,e){const s=this.ipAssets.findIndex(i=>i.id===t);return s!==-1?(this.ipAssets[s]={...this.ipAssets[s],...e,updatedAt:new Date().toISOString()},this.saveAssets(),!0):!1}deleteIPAsset(t){const e=this.ipAssets.length;return this.ipAssets=this.ipAssets.filter(s=>s.id!==t),this.ipAssets.length<e?(this.saveAssets(),!0):!1}updateIPStage(t,e,s){const i=this.getIPAssetById(t);if(i){const a=i.stages.find(n=>n.id===e);if(a)return a.completed=s,s&&!a.completedAt&&(a.completedAt=new Date().toISOString()),i.updatedAt=new Date().toISOString(),this.saveAssets(),!0}return!1}searchIPAssets(t){const e=t.toLowerCase();return this.ipAssets.filter(s=>s.name.toLowerCase().includes(e)||s.description.toLowerCase().includes(e)||s.type.toLowerCase().includes(e))}filterIPAssets(t){return this.ipAssets.filter(e=>{let s=!0;if(t.type&&e.type!==t.type&&(s=!1),t.status){const i=e.stages.every(n=>n.completed),a=e.stages.some(n=>n.completed)&&!i;(t.status==="completed"&&!i||t.status==="in-progress"&&!a||t.status==="pending"&&i)&&(s=!1)}return t.minValue&&e.commercialValue<t.minValue&&(s=!1),s})}getIPValueTrend(){const t={};return this.ipAssets.forEach(e=>{const s=e.createdAt.slice(0,7);t[s]||(t[s]=0),t[s]+=e.commercialValue}),Object.entries(t).map(([e,s])=>({timestamp:e,value:s})).sort((e,s)=>e.timestamp.localeCompare(s.timestamp))}getIPTypeDistribution(){const t={};this.ipAssets.forEach(s=>{t[s.type]||(t[s.type]=0),t[s.type]++});const e=this.ipAssets.length;return Object.entries(t).map(([s,i])=>({type:s,count:i,percentage:Math.round(i/e*100)}))}getAllPartnerships(){return[...this.partnerships]}getPartnershipsByIPId(t){return this.partnerships.filter(e=>e.ipAssetId===t)}createPartnership(t){const e={...t,id:`partnership-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.partnerships.push(e),this.savePartnerships(),e}updatePartnershipStatus(t,e){const s=this.partnerships.find(i=>i.id===t);return s?(s.status=e,s.updatedAt=new Date().toISOString(),this.savePartnerships(),!0):!1}getIPStats(){const t=this.ipAssets.filter(i=>i.stages.every(a=>a.completed)).length,e=this.partnerships.filter(i=>i.status==="pending"||i.status==="negotiating").length,s=this.ipAssets.reduce((i,a)=>i+a.commercialValue,0);return{totalAssets:this.ipAssets.length,completedAssets:t,inProgressAssets:this.ipAssets.length-t,totalPartnerships:this.partnerships.length,activePartnerships:e,totalEstimatedValue:s}}}const h=new c;export{h as i};

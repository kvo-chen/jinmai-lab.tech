import{r as i,j as s,L as t}from"./index-DW-f9EnK.js";import{i as c}from"./imageService-DqV-1dIq.js";const l=[{id:1,url:"https://images.unsplash.com/photo-1507608869274-d3177c8bb4c7?w=600&h=600&fit=crop",alt:"测试图片 1"},{id:2,url:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=600&h=600&fit=crop",alt:"测试图片 2"},{id:3,url:"https://images.unsplash.com/photo-1520338395080-e0132be9dcd2?w=600&h=600&fit=crop",alt:"测试图片 3"},{id:4,url:"https://images.unsplash.com/photo-1494500764479-0c8f2919a3d8?w=600&h=600&fit=crop",alt:"测试图片 4"},{id:5,url:"https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?w=600&h=600&fit=crop",alt:"测试图片 5"},{id:6,url:"https://images.unsplash.com/photo-1503602642458-232111445657?w=600&h=600&fit=crop",alt:"测试图片 6"},{id:7,url:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=600&h=600&fit=crop",alt:"测试图片 7"},{id:8,url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=600&h=600&fit=crop",alt:"测试图片 8"},{id:9,url:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?w=600&h=600&fit=crop",alt:"测试图片 9"},{id:10,url:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=600&h=600&fit=crop",alt:"测试图片 10"},{id:11,url:"https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=600&fit=crop",alt:"测试图片 11"},{id:12,url:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?w=600&h=600&fit=crop",alt:"测试图片 12"}],f=()=>{const[r,d]=i.useState(null),[o,m]=i.useState(null),[n,x]=i.useState(!0);return i.useEffect(()=>{const e=()=>{const g=c.getPerformanceStats(),p=c.getCacheStats();d(g),m(p)},a=setTimeout(()=>{e(),x(!1)},2e3),h=setInterval(e,5e3);return()=>{clearTimeout(a),clearInterval(h)}},[]),i.useEffect(()=>{const e=l.slice(0,6).map(a=>a.url);c.preloadImages(e)},[]),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"图片加载测试页面"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"图片服务统计信息"}),n?s.jsx("div",{className:"text-center text-gray-500",children:"正在加载统计信息..."}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm text-gray-500",children:"总请求数"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.totalRequests})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm text-gray-500",children:"缓存命中率"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[o.hitRate,"%"]})]}),s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm text-gray-500",children:"加载成功率"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[r.successRate,"%"]})]}),s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-sm text-gray-500",children:"平均加载时间"}),s.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[(r.averageLoadTime||0).toFixed(0),"ms"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"LazyImage 组件测试"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map((e,a)=>s.jsxs("div",{className:"aspect-square",children:[s.jsx(t,{src:e.url,alt:e.alt,className:"w-full h-full object-cover rounded-lg",priority:a<3,quality:a<6?"high":"medium",ratio:"square",fit:"cover",loading:"lazy"}),s.jsxs("div",{className:"mt-2 text-sm text-gray-500 text-center",children:["图片 ",e.id," ",a<3?"(优先加载)":a<6?"(高质量)":"(中等质量)"]})]},e.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"不同配置测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"不同宽高比"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(t,{src:l[0].url,alt:"方形",ratio:"square",className:"rounded-lg"}),s.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"方形 (1:1)"})]}),s.jsxs("div",{children:[s.jsx(t,{src:l[1].url,alt:"横向",ratio:"landscape",className:"rounded-lg"}),s.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"横向 (16:9)"})]}),s.jsxs("div",{children:[s.jsx(t,{src:l[2].url,alt:"纵向",ratio:"portrait",className:"rounded-lg"}),s.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"纵向 (4:5)"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"不同填充方式"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(t,{src:l[3].url,alt:"覆盖填充",fit:"cover",className:"rounded-lg"}),s.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"覆盖填充 (cover)"})]}),s.jsxs("div",{children:[s.jsx(t,{src:l[4].url,alt:"包含填充",fit:"contain",className:"rounded-lg bg-gray-100"}),s.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"包含填充 (contain)"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API代理URL测试"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"TRA API代理图片"}),s.jsx(t,{src:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=China%20traditional%20craft%20revitalization%20plan%20implementation%20achievements",alt:"TRA API代理图片",className:"rounded-lg",ratio:"landscape"}),s.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"URL: /api/proxy/trae-api/api/ide/v1/text_to_image"})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"错误处理测试"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"无效图片URL"}),s.jsx(t,{src:"https://invalid-url.example.com/nonexistent-image.jpg",alt:"无效图片",className:"rounded-lg",ratio:"square"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"空图片URL"}),s.jsx(t,{src:"",alt:"空图片",className:"rounded-lg",ratio:"square"})]})]})]})]})};export{f as default};

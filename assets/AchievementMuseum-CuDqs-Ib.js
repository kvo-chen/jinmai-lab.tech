import{u as $,r as t,N as x,j as e,m as c,R as k,I as A,D as S,X as R,Y as _,E as D,J as C,T as g,t as r}from"./index-DW-f9EnK.js";function B(){const{isDark:a}=$(),[h,p]=t.useState([]),[u,y]=t.useState([]),[i,b]=t.useState(null),[n,f]=t.useState("achievements"),[j,m]=t.useState(!0),[T,U]=t.useState(null),[I,V]=t.useState(!1),[E,L]=t.useState(["copy","twitter","facebook","linkedin"]),[O,z]=t.useState("image");t.useEffect(()=>{m(!0),setTimeout(()=>{const s=x.getAllAchievements();p(s);const l=x.getAchievementStats();b(l),y([{id:1,name:"国潮插画系列",description:"结合传统中国元素与现代设计风格的插画作品",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1920x1080&prompt=Achievement%20exhibit%20example%201%203D%20model",year:2025,category:"插画设计"},{id:2,name:"传统纹样创新",description:"基于传统纹样进行创新设计的图案集合",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1920x1080&prompt=Achievement%20exhibit%20example%202%203D%20model",year:2025,category:"纹样设计"},{id:3,name:"老字号品牌焕新",description:"为老字号品牌设计的现代化视觉识别系统",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1920x1080&prompt=Achievement%20exhibit%20example%203%203D%20model",year:2025,category:"品牌设计"}]),m(!1)},800)},[]);const d=s=>{switch(s){case"common":return"bg-gray-100 text-gray-600";case"rare":return"bg-blue-100 text-blue-600";case"epic":return"bg-purple-100 text-purple-600";case"legendary":return"bg-yellow-100 text-yellow-600";default:return"bg-gray-100 text-gray-600"}},N=async(s,l)=>{const o=`${window.location.origin}/achievement/${s.id}`,w=`我在创意平台获得了成就：${s.name}！`;try{switch(l){case"copy":await navigator.clipboard.writeText(o),r.success("成就链接已复制到剪贴板");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(w)}&url=${encodeURIComponent(o)}`,"_blank");break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(o)}`,"_blank");break}}catch{r.error("分享失败，请重试")}},v=(s,l)=>{switch(l){case"image":r.info("正在生成成就图片..."),setTimeout(()=>{r.success("成就图片已导出")},1500);break;case"pdf":r.info("正在生成成就PDF..."),setTimeout(()=>{r.success("成就PDF已导出")},1500);break;case"json":r.info("正在生成成就JSON数据..."),setTimeout(()=>{r.success("成就JSON数据已导出")},1500);break}};return j?e.jsx("div",{className:`p-6 rounded-2xl ${a?"bg-gray-800":"bg-white"} shadow-md`,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:`h-8 w-1/4 rounded ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`}),e.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-4",children:[1,2,3].map(s=>e.jsx("div",{className:`h-10 w-24 rounded-full ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`},s))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:`h-40 rounded-xl ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-10 rounded-lg bg-gray-100 dark:bg-gray-700 animate-pulse"},s))})]}),e.jsx("div",{className:`h-8 w-1/4 rounded ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:`h-40 rounded-xl ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`}),e.jsx("div",{className:`h-4 w-3/4 rounded ${a?"bg-gray-700":"bg-gray-200"} animate-pulse`})]},s))})]})}):e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:`p-6 rounded-2xl ${a?"bg-gray-800":"bg-white"} shadow-md`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"创作成就博物馆"}),e.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-sm ${a?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("i",{className:"fas fa-trophy text-yellow-500 mr-1"}),e.jsxs("span",{children:[i.completionRate,"% 完成度"]})]})]}),e.jsx("div",{className:"flex space-x-3 mb-6 overflow-x-auto pb-4 scrollbar-hide",children:[{id:"achievements",name:"成就列表"},{id:"exhibits",name:"3D展品"},{id:"vr",name:"VR参观"}].map(s=>e.jsx("button",{onClick:()=>f(s.id),className:`px-5 py-2.5 rounded-full text-sm font-medium transition-all whitespace-nowrap ${n===s.id?"bg-red-600 text-white shadow-md":a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"}`,children:s.name},s.id))}),n==="achievements"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs(c.div,{className:`p-6 rounded-xl ${a?"bg-gray-700":"bg-gray-50"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsx("h4",{className:"font-medium mb-4",children:"成就统计"}),e.jsx("div",{className:"h-48",children:e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(A,{data:[{name:"已解锁",value:i.unlocked},{name:"未解锁",value:i.locked}],margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(S,{strokeDasharray:"3 3",stroke:a?"#374151":"#e5e7eb"}),e.jsx(R,{dataKey:"name",tick:{fill:a?"#9ca3af":"#4b5563"},axisLine:{stroke:a?"#374151":"#e5e7eb"}}),e.jsx(_,{tick:{fill:a?"#9ca3af":"#4b5563"},axisLine:{stroke:a?"#374151":"#e5e7eb"}}),e.jsx(D,{contentStyle:{backgroundColor:a?"#1f2937":"#ffffff",borderColor:a?"#374151":"#e5e7eb",borderRadius:"0.5rem",color:a?"#ffffff":"#000000"}}),e.jsx(C,{dataKey:"value",name:"数量",fill:"#ef4444",radius:[4,4,0,0]})]})})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm opacity-70",children:["总成就: ",i.total]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(c.div,{className:`p-4 rounded-xl ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[e.jsx("h4",{className:"font-medium mb-3",children:"最近解锁"}),i.recentUnlocks.length>0?e.jsx("div",{className:"space-y-3",children:i.recentUnlocks.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${d(s.rarity)} flex items-center justify-center mr-3`,children:e.jsx("i",{className:`fas fa-${s.icon}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:s.unlockedAt})]})]},s.id))}):e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} text-center py-2`,children:"暂无解锁记录"})]}),e.jsxs(c.div,{className:`p-4 rounded-xl ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[e.jsx("h4",{className:"font-medium mb-3",children:"稀有度分布"}),e.jsx("div",{className:"space-y-3",children:[{rarity:"common",label:"普通",count:2},{rarity:"rare",label:"稀有",count:3},{rarity:"epic",label:"史诗",count:1},{rarity:"legendary",label:"传说",count:1}].map((s,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${d(s.rarity.replace(" ","-"))} mr-2`}),e.jsx("span",{className:"w-12",children:s.label}),e.jsx("div",{className:"flex-1 h-2 rounded-full bg-gray-200 dark:bg-gray-600",children:e.jsx("div",{className:`h-full rounded-full ${d(s.rarity.replace(" ","-")).split(" ")[0]}`,style:{width:`${s.count/i.total*100}%`}})}),e.jsx("span",{className:"w-8 text-right",children:s.count})]},l))})]})]})]}),e.jsx("h4",{className:"font-medium mb-4",children:"全部成就"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(s=>e.jsx(c.div,{className:`p-4 rounded-xl border ${s.isUnlocked?`${a?"border-gray-700 bg-gray-700":"border-gray-200 bg-white"}`:`${a?"border-gray-700 bg-gray-700/50":"border-gray-200 bg-gray-50"} opacity-70`} transition-all hover:shadow-md`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s.id},whileHover:{y:-2},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${d(s.rarity)} flex items-center justify-center mr-3 flex-shrink-0`,children:e.jsx("i",{className:`fas fa-${s.icon} text-lg`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h5",{className:"font-medium",children:s.name}),s.isUnlocked&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${a?"bg-green-900/30 text-green-300":"bg-green-100 text-green-600"}`,children:"已解锁"})]}),e.jsx("p",{className:`text-sm mb-3 ${a?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{children:s.criteria}),e.jsxs("span",{children:[s.progress,"%"]})]}),e.jsx("div",{className:`h-1.5 rounded-full ${a?"bg-gray-600":"bg-gray-200"}`,children:e.jsx("div",{className:`h-full rounded-full ${d(s.rarity).split(" ")[0]}`,style:{width:`${s.progress}%`}})})]}),s.isUnlocked&&s.unlockedAt&&e.jsxs("p",{className:`text-xs ${a?"text-gray-400":"text-gray-600"}`,children:["解锁时间: ",s.unlockedAt]}),s.isUnlocked&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{className:`text-xs px-2 py-1 rounded ${a?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors flex items-center gap-1`,onClick:()=>N(s,"copy"),children:[e.jsx("i",{className:"fas fa-share-alt"}),"分享"]}),e.jsxs("button",{className:`text-xs px-2 py-1 rounded ${a?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors flex items-center gap-1`,onClick:()=>v(s,"image"),children:[e.jsx("i",{className:"fas fa-download"}),"导出"]})]})]})]})},s.id))})]}),n==="exhibits"&&e.jsx("div",{children:e.jsx("div",{className:"grid grid-cols-1 gap-8",children:u.map(s=>e.jsx(c.div,{className:`rounded-xl overflow-hidden shadow-md border ${a?"border-gray-700":"border-gray-200"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s.id},children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-1/2 relative",children:[e.jsx(g,{src:s.image,alt:s.name,className:"w-full h-full object-cover min-h-[300px]"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-black bg-opacity-70 text-white",children:"3D模型"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:e.jsx("h4",{className:"text-white font-bold text-xl",children:s.name})})]}),e.jsxs("div",{className:`md:w-1/2 p-6 ${a?"bg-gray-700":"bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a?"bg-gray-600":"bg-gray-100"}`,children:s.category}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a?"bg-gray-600":"bg-gray-100"}`,children:s.year})]}),e.jsx("p",{className:`text-sm mb-6 ${a?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-600":"bg-gray-50"} flex items-center`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center mr-3",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-70",children:"3D预览"}),e.jsx("p",{className:"font-medium",children:"在线查看3D模型"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-600":"bg-gray-50"} flex items-center`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mr-3",children:e.jsx("i",{className:"fas fa-download"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-70",children:"下载模型"}),e.jsx("p",{className:"font-medium",children:"获取STL/OBJ格式文件"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg ${a?"bg-gray-600":"bg-gray-50"} flex items-center`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center mr-3",children:e.jsx("i",{className:"fas fa-share-alt"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-70",children:"分享展品"}),e.jsx("p",{className:"font-medium",children:"生成分享链接"})]})]})]}),e.jsx("button",{className:"w-full mt-6 py-3 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium transition-colors",children:"进入3D展示"})]})]})},s.id))})}),n==="vr"&&e.jsx("div",{className:"text-center py-12",children:e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"mb-6 text-6xl text-blue-500",children:e.jsx("i",{className:"fas fa-vr-cardboard"})}),e.jsx("h4",{className:"text-xl font-bold mb-4",children:"VR虚拟博物馆"}),e.jsx("p",{className:`text-sm mb-8 ${a?"text-gray-400":"text-gray-600"}`,children:"通过VR技术，您可以身临其境地参观自己的创作成就博物馆。佩戴VR设备， 自由浏览您的3D作品展品，体验沉浸式的创作成果展示。"}),e.jsx("div",{className:"mb-8",children:e.jsx(g,{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=landscape_16_9&prompt=VR%20virtual%20museum%20experience%20of%20art%20exhibition",alt:"VR博物馆体验",className:"rounded-xl w-full max-h-96 object-cover mx-auto"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsxs("button",{className:"px-6 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors flex items-center justify-center",children:[e.jsx("i",{className:"fas fa-vr-cardboard mr-2"}),"开始VR参观"]}),e.jsxs("button",{className:`px-6 py-3 rounded-lg transition-colors ${a?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center`,children:[e.jsx("i",{className:"fas fa-video mr-2"}),"观看演示视频"]})]})]})})]})}export{B as default};

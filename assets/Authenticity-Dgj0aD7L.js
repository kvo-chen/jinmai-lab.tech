import{u as K,r,ad as S,j as e,R as f,I as E,X as B,Y as $,E as b,F as q,J as y,P as z,b as H,C as g}from"./index-DW-f9EnK.js";function T(){const{isDark:a}=K(),[o,w]=r.useState("把麻花做成赛博朋克风"),[d,v]=r.useState("桂发祥麻花传统工艺强调多褶形态、香酥口感与津味表达"),h=S(o,d),[c,N]=r.useState(()=>{try{const t=localStorage.getItem("AUTH_FEEDBACK_ACKS");return t?JSON.parse(t):{}}catch{return{}}});r.useEffect(()=>{try{localStorage.setItem("AUTH_FEEDBACK_ACKS",JSON.stringify(c))}catch{}},[c]);const C=t=>{N(n=>({...n,[t]:!n[t]}))},x=r.useMemo(()=>{const t=s=>s.toLowerCase().split(/[^a-zA-Z0-9\u4e00-\u9fa5]+/).filter(Boolean),n=t(o),m=t(d),l={},i={};n.forEach(s=>l[s]=(l[s]||0)+1),m.forEach(s=>i[s]=(i[s]||0)+1);const u=Array.from(new Set([...n,...m])),j=u.filter(s=>(l[s]||0)&&(i[s]||0)),A=u.filter(s=>(l[s]||0)&&!i[s]),k=u.filter(s=>(i[s]||0)&&!l[s]);return{top:j.map(s=>({token:s,input:l[s],knowledge:i[s]})).sort((s,p)=>p.input+p.knowledge-(s.input+s.knowledge)).slice(0,10),commonCount:j.length,uniqueA:A.length,uniqueB:k.length}},[o,d]);return e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"纯正性检查与评分"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"输入内容"}),e.jsx("textarea",{value:o,onChange:t=>w(t.target.value),className:`${a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900"} w-full h-32 px-4 py-3 rounded-lg border`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"知识库内容"}),e.jsx("textarea",{value:d,onChange:t=>v(t.target.value),className:`${a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900"} w-full h-32 px-4 py-3 rounded-lg border`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"评分"}),e.jsx("div",{className:"text-3xl font-bold",children:h.score}),e.jsx("div",{className:"mt-3 text-sm",children:"阈值≥70%"}),e.jsx("ul",{className:"mt-3 text-sm",children:h.feedback.map((t,n)=>e.jsxs("li",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:()=>C(t),className:`text-xs px-3 py-2 rounded-full min-h-[44px] ${c[t]?"bg-green-600 text-white":a?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:c[t]?"已优化":"标记已优化"})]},n))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-4 font-medium",children:"共同关键词频次对比"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(f,{children:e.jsxs(E,{data:x.top,children:[e.jsx(B,{dataKey:"token",tick:{fontSize:12}}),e.jsx($,{}),e.jsx(b,{}),e.jsx(q,{}),e.jsx(y,{dataKey:"input",fill:"#f87171",name:"输入"}),e.jsx(y,{dataKey:"knowledge",fill:"#60a5fa",name:"知识库"})]})})})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-4 font-medium",children:"关键词组成比例"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(f,{children:e.jsxs(z,{children:[e.jsxs(H,{dataKey:"value",data:[{name:"共同",value:x.commonCount},{name:"仅输入",value:x.uniqueA},{name:"仅知识库",value:x.uniqueB}],outerRadius:100,label:!0,children:[e.jsx(g,{fill:"#34d399"}),e.jsx(g,{fill:"#f87171"}),e.jsx(g,{fill:"#60a5fa"})]}),e.jsx(b,{})]})})})]})]})]})})}export{T as default};

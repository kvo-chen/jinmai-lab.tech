import{r as t,A as N,d as w,c as S,j as e,M as C}from"./index-DW-f9EnK.js";const E=()=>{var y,h;const{user:d,updateMembership:f}=t.useContext(N),x=w(),s=S(),[m,p]=t.useState(!1),[b,o]=t.useState(null),[g,j]=t.useState(!1),[a,i]=t.useState("wechat"),l=((y=x.state)==null?void 0:y.plan)||"premium",c=((h=x.state)==null?void 0:h.renew)||!1,r={premium:{name:"é«˜çº§ä¼šå‘˜",price:99,period:"month",duration:720*60*60*1e3},vip:{name:"VIPä¼šå‘˜",price:199,period:"month",duration:720*60*60*1e3}}[l];if(t.useEffect(()=>{d||s("/login")},[d,s]),!d||!r)return null;const k=async()=>{try{if(p(!0),o(null),await new Promise(n=>setTimeout(n,1500)),(await C.post("/api/payment/create",{plan:l,amount:r.price,paymentMethod:a})).ok){const n=new Date,u=new Date;u.setTime(n.getTime()+r.duration),await f({membershipLevel:l,membershipStatus:"active",membershipStart:n.toISOString(),membershipEnd:u.toISOString()}),j(!0),setTimeout(()=>{s("/membership")},3e3)}else o("åˆ›å»ºè®¢å•å¤±è´¥")}catch(v){console.error("æ”¯ä»˜å¤±è´¥:",v),o("æ”¯ä»˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{p(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[var(--bg-secondary)] dark:to-[var(--bg-tertiary)] pink:from-[var(--bg-secondary)] pink:to-[var(--bg-tertiary)] py-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:c?"ç»­è´¹ä¼šå‘˜":"å‡çº§ä¼šå‘˜"}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:c?`ç»­è´¹ ${r.name}`:`å‡çº§åˆ° ${r.name}`})]}),g?e.jsxs("div",{className:"bg-white dark:bg-[var(--bg-secondary)] pink:bg-[var(--bg-secondary)] rounded-2xl shadow-xl p-10 text-center transform transition-all hover:shadow-2xl dark:border border-[var(--border-primary)] pink:border border-[var(--border-primary)]",children:[e.jsx("div",{className:"text-8xl mb-6",children:"ğŸ‰"}),e.jsx("h2",{className:"text-3xl font-bold mb-3 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"æ”¯ä»˜æˆåŠŸï¼"}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] mb-8 text-lg",children:c?"æ‚¨çš„ä¼šå‘˜å·²æˆåŠŸç»­è´¹":"æ‚¨å·²æˆåŠŸå‡çº§ä¼šå‘˜"}),e.jsx("p",{className:"text-gray-500 dark:text-[var(--text-tertiary)] pink:text-[var(--text-tertiary)] mb-10 text-sm",children:"3ç§’åå°†è‡ªåŠ¨è·³è½¬åˆ°ä¼šå‘˜ä¸­å¿ƒ..."}),e.jsx("button",{className:"bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-full hover:shadow-lg hover:scale-105 transition-all duration-300 font-medium",onClick:()=>s("/membership"),children:"ç«‹å³å‰å¾€ä¼šå‘˜ä¸­å¿ƒ"})]}):e.jsxs("div",{className:"bg-white dark:bg-[var(--bg-secondary)] pink:bg-[var(--bg-secondary)] rounded-2xl shadow-xl p-10 transform transition-all hover:shadow-2xl dark:border border-[var(--border-primary)] pink:border border-[var(--border-primary)]",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-5 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] flex items-center",children:[e.jsx("i",{className:"fas fa-crown text-primary mr-3"}),"å¥—é¤ä¿¡æ¯"]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-xl p-6 border border-primary/20 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)]",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"å¥—é¤åç§°"}),e.jsx("span",{className:"font-semibold text-xl text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:r.name})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)]",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"ä»·æ ¼"}),e.jsxs("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["Â¥",r.price]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"æœ‰æ•ˆæœŸ"}),e.jsx("span",{className:"text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] font-medium text-lg",children:r.period})]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-5 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] flex items-center",children:[e.jsx("i",{className:"fas fa-credit-card text-primary mr-3"}),"é€‰æ‹©æ”¯ä»˜æ–¹å¼"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("button",{className:`border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md ${a==="wechat"?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"}`,onClick:()=>i("wechat"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-green-100 mb-3",children:e.jsx("i",{className:"fab fa-weixin text-3xl text-green-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"å¾®ä¿¡æ”¯ä»˜"})]}),e.jsxs("button",{className:`border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md ${a==="alipay"?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"}`,onClick:()=>i("alipay"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-blue-100 mb-3",children:e.jsx("i",{className:"fab fa-alipay text-3xl text-blue-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"æ”¯ä»˜å®"})]}),e.jsxs("button",{className:`border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md ${a==="credit"?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"}`,onClick:()=>i("credit"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-purple-100 mb-3",children:e.jsx("i",{className:"fas fa-credit-card text-3xl text-purple-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"ä¿¡ç”¨å¡"})]}),e.jsxs("button",{className:`border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md ${a==="unionpay"?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"}`,onClick:()=>i("unionpay"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-red-100 mb-3",children:e.jsx("i",{className:"fas fa-university text-3xl text-red-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"é“¶è”æ”¯ä»˜"})]})]})]}),e.jsxs("div",{children:[b&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-50/20 pink:bg-red-50/20 text-red-600 p-4 rounded-lg mb-5 flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),b]}),e.jsx("button",{className:"w-full bg-gradient-to-r from-primary to-secondary text-white py-5 rounded-full font-semibold text-xl hover:shadow-lg hover:scale-105 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed disabled:scale-100",onClick:k,disabled:m,children:m?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin mr-3 w-6 h-6 border-2 border-white border-t-transparent rounded-full"}),"å¤„ç†ä¸­..."]}):`ç¡®è®¤æ”¯ä»˜ Â¥${r.price}`}),e.jsxs("div",{className:"text-center text-gray-500 dark:text-[var(--text-tertiary)] pink:text-[var(--text-tertiary)] mt-5 text-sm",children:["ç‚¹å‡»æ”¯ä»˜å³è¡¨ç¤ºæ‚¨åŒæ„",e.jsx("a",{href:"/terms",className:"text-primary hover:underline ml-1 font-medium",children:"ã€Šä¼šå‘˜æœåŠ¡åè®®ã€‹"})]})]})]})]})})};export{E as default};

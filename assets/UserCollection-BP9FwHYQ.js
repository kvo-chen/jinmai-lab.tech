import{u as k,r,A as p,c as N,af as y,j as e,m as n}from"./index-DW-f9EnK.js";function w(){const{isDark:a}=k(),{isAuthenticated:c,user:o}=r.useContext(p),i=N(),[t,x]=r.useState("bookmarks"),[d,f]=r.useState([]),[m,b]=r.useState([]),[u,g]=r.useState(!0);r.useEffect(()=>{!c||!o?i("/login"):j()},[c,o,i]);const j=()=>{g(!0);try{const s=y.getBookmarkedPosts(),l=y.getLikedPosts();f(s),b(l)}catch(s){console.error("加载用户收藏失败:",s)}finally{g(!1)}},h=t==="bookmarks"?d:m;return u?e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"加载中..."}),e.jsx("p",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"正在获取您的收藏和点赞作品"})]})}):e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(n.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"我的收藏"}),e.jsx("p",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"查看和管理您收藏与点赞的作品"})]}),e.jsx(n.div,{className:`mb-8 p-1 rounded-xl ${a?"bg-gray-800":"bg-gray-100"}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>x("bookmarks"),className:`flex-1 py-3 px-6 rounded-lg text-sm font-medium transition-all ${t==="bookmarks"?`${a?"bg-gray-700 text-white":"bg-white text-red-600 shadow-md"}`:`${a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`}`,children:[e.jsx("i",{className:`far fa-bookmark mr-2 ${t==="bookmarks"?"text-red-500":""}`}),"我的收藏",e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${a?"bg-gray-600":"bg-gray-200"}`,children:d.length})]}),e.jsxs("button",{onClick:()=>x("likes"),className:`flex-1 py-3 px-6 rounded-lg text-sm font-medium transition-all ${t==="likes"?`${a?"bg-gray-700 text-white":"bg-white text-red-600 shadow-md"}`:`${a?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"}`}`,children:[e.jsx("i",{className:`far fa-heart mr-2 ${t==="likes"?"text-red-500":""}`}),"我的点赞",e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${a?"bg-gray-600":"bg-gray-200"}`,children:m.length})]})]})}),e.jsx(n.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:h.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:h.map(s=>e.jsxs(n.div,{className:`rounded-xl overflow-hidden ${a?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} shadow-md transition-all hover:shadow-lg`,whileHover:{y:-5},onClick:()=>i(`/explore/${s.id}`),role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i(`/explore/${s.id}`))},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-48 object-cover",loading:"lazy",decoding:"async"}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[s.isBookmarked&&e.jsxs("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx("i",{className:"far fa-bookmark mr-1"}),"已收藏"]}),s.isLiked&&e.jsxs("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx("i",{className:"far fa-heart mr-1"}),"已点赞"]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-3",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full ${a?"bg-gray-700":"bg-gray-100"}`,children:s.category}),e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:s.date})]}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-eye mr-1"}),s.views]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-thumbs-up mr-1"}),s.likes]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-comment mr-1"}),s.comments.length]})]})})]})]},s.id))}):e.jsxs("div",{className:`rounded-xl p-12 text-center ${a?"bg-gray-800":"bg-white"} shadow-md`,children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:t==="bookmarks"?e.jsx("i",{className:"far fa-bookmark"}):e.jsx("i",{className:"far fa-heart"})}),e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["暂无",t==="bookmarks"?"收藏":"点赞","作品"]}),e.jsxs("p",{className:`${a?"text-gray-400":"text-gray-600"} mb-6`,children:["去探索页面",t==="bookmarks"?"收藏":"点赞","一些作品吧"]}),e.jsx("button",{onClick:()=>i("/explore"),className:"px-6 py-3 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",children:"去探索"})]})})]})}export{w as default};

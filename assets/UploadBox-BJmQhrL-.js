import{u as k,r as c,j as s}from"./index-DW-f9EnK.js";function C({accept:d,onFile:g,title:m,description:x,previewUrl:f,variant:t="file",className:h}){const{isDark:o}=k(),i=c.useRef(null),[p,j]=c.useState(""),[v,l]=c.useState(!1),u=c.useCallback(e=>{if(e){try{if(t==="image"||t==="audio"){const r=URL.createObjectURL(e);j(r)}}catch{}g(e)}},[g,t]),b=e=>{var a;const r=(a=e.target.files)==null?void 0:a[0];u(r)},y=e=>{var a;e.preventDefault(),e.stopPropagation(),l(!1);const r=(a=e.dataTransfer.files)==null?void 0:a[0];u(r)},N=e=>{e.preventDefault(),e.stopPropagation(),l(!0)},w=e=>{e.preventDefault(),e.stopPropagation(),l(!1)},n=f||p,D=t==="image"?"far fa-image":t==="audio"?"fas fa-music":"fas fa-file-import",P=o?"ring-red-500/40 hover:ring-red-500/60":"ring-red-600/40 hover:ring-red-600/60";return s.jsxs("div",{className:h,children:[m&&s.jsx("div",{className:"mb-2 text-sm font-medium",children:m}),s.jsxs("div",{onDrop:y,onDragOver:N,onDragLeave:w,className:`relative rounded-2xl border-2 border-dashed ${o?"border-gray-600 bg-gray-800":"border-gray-300 bg-white"} p-4 transition-all ${v?P:"ring-0"} cursor-pointer`,onClick:()=>{var e;return(e=i.current)==null?void 0:e.click()},role:"button","aria-label":"上传文件",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl ${o?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} mr-4`,children:s.jsx("i",{className:D})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm",children:x||"拖拽文件到此，或点击选择"}),s.jsx("div",{className:`text-xs mt-0.5 ${o?"text-gray-400":"text-gray-500"}`,children:d})]}),s.jsx("button",{type:"button",className:"ml-4 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm",onClick:e=>{var r;e.stopPropagation(),(r=i.current)==null||r.click()},children:"选择文件"})]}),t==="image"&&n&&s.jsx("div",{className:"mt-4",children:s.jsx("img",{src:n,alt:"预览",className:"w-full h-40 object-cover rounded-lg",loading:"lazy",decoding:"async"})}),t==="audio"&&n&&s.jsx("div",{className:"mt-4",children:s.jsx("audio",{controls:!0,src:n,className:"w-full"})})]}),s.jsx("input",{ref:i,type:"file",accept:d,className:"hidden",onChange:b})]})}export{C as U};

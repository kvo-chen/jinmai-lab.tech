# 3D粒子系统实现计划

## 1. 技术栈与依赖
- 已有的Three.js和React Three Fiber
- 需要添加MediaPipe Hands用于手势识别
- 可能需要添加@react-three/drei的更多功能

## 2. 实现步骤

### 2.1 创建粒子系统组件
- 创建新组件 `ParticleSystem.tsx`
- 使用Three.js的PointCloud或InstancedMesh实现粒子系统
- 实现粒子的基本渲染和动画

### 2.2 集成摄像头手势识别
- 添加MediaPipe Hands库
- 实现摄像头访问和实时手势检测
- 提取双手张合数据用于控制粒子

### 2.3 实现多种粒子模型
- 爱心模型：使用数学公式生成爱心形状
- 花朵模型：使用花瓣几何形状
- 土星模型：球体+光环结构
- 佛像模型：简化的3D佛像轮廓
- 烟花模型：爆炸式粒子效果

### 2.4 添加UI控制面板
- 模型选择器：切换不同粒子模型
- 颜色选择器：调整粒子颜色
- 全屏控制按钮：进入/退出全屏模式
- 简洁现代的设计风格

### 2.5 实现粒子与手势的交互
- 根据双手张合程度控制粒子缩放
- 根据双手距离控制粒子扩散
- 实现平滑的动画过渡

### 2.6 优化性能
- 使用InstancedMesh减少Draw Call
- 实现粒子数量动态调整
- 添加LOD（Level of Detail）支持

## 3. 文件结构
- `src/components/ParticleSystem.tsx` - 主粒子系统组件
- `src/hooks/useHandTracking.ts` - 手势跟踪钩子
- `src/lib/particleModels.ts` - 粒子模型定义
- `src/styles/particleSystem.css` - 样式文件

## 4. 集成到项目中
- 在入口页面或首页添加粒子系统组件
- 实现平滑的过渡效果
- 确保响应式设计，适配不同设备

## 5. 关键功能实现

### 5.1 手势识别
```typescript
// 使用MediaPipe Hands检测双手张合
const useHandTracking = () => {
  // 初始化MediaPipe Hands
  // 处理摄像头视频流
  // 提取手势数据
  // 返回双手张合程度
};
```

### 5.2 粒子系统
```typescript
// 使用React Three Fiber创建粒子系统
const ParticleSystem = ({ model, color, gestureData }) => {
  // 根据model生成粒子形状
  // 根据gestureData调整粒子缩放和扩散
  // 实现粒子动画
};
```

### 5.3 UI控制面板
```typescript
// 简洁现代的控制面板
const ControlPanel = ({ onModelChange, onColorChange, onFullscreen }) => {
  // 模型选择器
  // 颜色选择器
  // 全屏按钮
};
```

这个计划将实现一个炫酷的3D粒子系统，支持手势控制和多种模型选择，为用户提供沉浸式的视觉体验。
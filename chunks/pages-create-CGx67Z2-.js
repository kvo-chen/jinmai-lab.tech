import{r as e,i as a,u as t,t as s,j as r,m as i}from"./vendor-react-7rlDZYVK.js";import{u as n}from"./components-analytics-D0Glag6r.js";import{A as l}from"./components-admin-u5o8ISLL.js";import{d as o,l as c,a as d,L as g,C as m,H as x,A as u,M as h}from"./components-other-CUE0A1-z.js";async function b(e){const a=await o.post("/api/doubao/images/generate",e,{retries:1,timeoutMs:2e4});return a.ok?a.data:{ok:!1,error:a.error}}const y={generateImage:b,chatCompletions:async function(e){const a=await o.post("/api/doubao/chat/completions",e,{retries:1,timeoutMs:2e4});return a.ok?a.data:{ok:!1,error:a.error}}};async function p(e){const a=await o.post("/api/doubao/videos/tasks",e,{retries:1,timeoutMs:2e4});return a.ok?a.data:{ok:!1,error:a.error}}async function f(e){const a=await o.get(`/api/doubao/videos/tasks/${e}`,{retries:1,timeoutMs:2e4});return a.ok?a.data:{ok:!1,error:a.error}}async function j(e,a){const t=a?.intervalMs??1e4,s=a?.timeoutMs??6e5,r=Date.now();for(;Date.now()-r<s;){const s=await f(e);if(!s.ok)return s;const r=s.data?.status;if(a?.onProgress){let e=0;switch(r){case"pending":e=10;break;case"running":e=50;break;case"succeeded":case"failed":case"cancelled":e=100;break;default:e=0}a.onProgress(r||"unknown",e)}if("succeeded"===r||"failed"===r||"cancelled"===r)return s;await new Promise(e=>setTimeout(e,t))}return{ok:!1,error:"TIMEOUT"}}const v=[{id:"tpl-1",name:"青花瓷海报",text:"生成融合青花瓷纹样的中秋主题海报，色调以靛蓝与白为主，加入月亮与桂花元素，风格现代简约。"},{id:"tpl-2",name:"国潮包装",text:"设计一款国潮风格零食包装，融入云纹与回纹，色彩采用中国红与金色，突出年轻化与传统融合。"},{id:"tpl-3",name:"老字号焕新",text:"为天津老字号品牌做视觉焕新，结合历史故事与现代审美，使用经典纹样做装饰。"},{id:"tpl-4",name:"节日限定",text:"创作春节限定礼盒设计，包含剪纸元素与灯笼符号，整体喜庆但不过度拥挤。"},{id:"tpl-5",name:"非遗传承",text:"围绕杨柳青年画进行现代演绎的插画海报，保留传统色彩与构图原则。"},{id:"tpl-6",name:"城市文化",text:"以海河两岸为主题做城市文化宣传画，融合历史建筑与现代艺术表现。"}],N=[{id:1,thumbnail:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=600&h=400&fit=crop",score:85},{id:2,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=AI%20generated%20traditional%20Chinese%20design%202",score:78},{id:3,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=AI%20generated%20traditional%20Chinese%20design%203",score:92},{id:4,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=AI%20generated%20traditional%20Chinese%20design%204",score:75}],w=[{id:1,name:"云纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20cloud%20pattern",description:"象征吉祥如意，常用于传统服饰和建筑"},{id:2,name:"龙纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20dragon%20pattern",description:"象征权力与尊贵，中国传统文化的重要象征"},{id:3,name:"凤纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20phoenix%20pattern",description:"象征美好与幸福，常与龙纹配合使用"},{id:4,name:"回纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20key%20pattern",description:"寓意吉祥绵延，是传统装饰中常见的纹样"},{id:5,name:"花卉纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20flower%20pattern",description:"象征自然与生机，常见牡丹、莲花等纹样"},{id:6,name:"几何纹",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Traditional%20Chinese%20geometric%20pattern",description:"简洁明快，富有节奏感和韵律感"}],k=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:o}=n(),{isAuthenticated:b,user:y}=e.useContext(l),f=a(),k=t(),[C,S]=e.useState("sketch"),[$,A]=e.useState(""),[_,I]=e.useState(N),[E,T]=e.useState(null),[O,R]=e.useState(!1),[M,D]=e.useState(!1),[z,F]=e.useState(1),[L,U]=e.useState(!0),[P,J]=e.useState(!1),[K,H]=e.useState(!1),[V,B]=e.useState(!1),[W,G]=e.useState(!0),[Y,q]=e.useState(null),[Q,X]=e.useState(""),[Z,ee]=e.useState(!1),[ae,te]=e.useState(!1),[se,re]=e.useState(!1),[ie,ne]=e.useState(!1),[le,oe]=e.useState(!1),[ce,de]=e.useState(""),[ge,me]=e.useState(3),[xe,ue]=e.useState([]),[he,be]=e.useState(!1),[ye,pe]=e.useState("云纹是中国传统装饰纹样中常见的一种，象征着吉祥如意、高升和祥瑞。"),[fe,je]=e.useState(""),[ve,Ne]=e.useState(!1),[we,ke]=e.useState(null),Ce=e.useRef([]),[Se,$e]=e.useState(null),[Ae,_e]=e.useState("复古胶片"),[Ie,Ee]=e.useState("idle"),[Te,Oe]=e.useState(null),[Re,Me]=e.useState(5),[De,ze]=e.useState(!1),[Fe,Le]=e.useState(!1),Ue=e.useRef(null);e.useEffect(()=>{const e=e=>{Ue.current&&!Ue.current.contains(e.target)&&Le(!1)};return Fe&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[Fe]),e.useState(!1);const[Pe,Je]=e.useState([]),[Ke,He]=e.useState([]),[Ve,Be]=e.useState(!1),[We,Ge]=e.useState(""),[Ye,qe]=e.useState("标准"),[Qe,Xe]=e.useState({}),[Ze,ea]=e.useState(!1),[aa,ta]=e.useState(""),[sa,ra]=e.useState(""),[ia,na]=e.useState(()=>{try{return JSON.parse(localStorage.getItem("TOOLS_SAVED_PLANS")||"[]")}catch{return[]}}),la={"标准":"包含：1) 创作方向，2) 视觉风格，3) 配色建议（可引用传统色），4) 文化元素融合建议，5) 可落地物料清单（海报/包装/IP形象等），语言精炼、结构清晰、可执行","商业合作":"面向品牌联合与商业落地：1) 品牌契合点与受众画像，2) 视觉与物料清单（KV/包装/周边），3) 预算与里程碑（简要），4) 风险与合规注意事项，语气专业","校园活动":"适用于校园传播与比赛组织：1) 主题设计与互动玩法，2) 视觉风格与配色，3) 活动物料清单，4) 宣传渠道与执行建议","文旅宣传":"面向文旅场景：1) 地域文化元素融入策略，2) 视觉风格与配色，3) 物料清单（海报/导览/纪念品），4) 场景落地建议","社媒传播":"适用于社媒运营：1) 内容主题与排期，2) 视觉风格与模板，3) 互动话题与标签，4) KPI与复盘建议"};e.useEffect(()=>{try{const e=localStorage.getItem("TOOLS_CURATION_TEMPLATE");e&&la[e]&&qe(e);const a=localStorage.getItem("TOOLS_CURATION_CUSTOM_TEMPLATES");a&&Xe(JSON.parse(a))}catch{}},[]),e.useEffect(()=>{try{localStorage.setItem("TOOLS_CURATION_TEMPLATE",Ye),localStorage.setItem("TOOLS_CURATION_CUSTOM_TEMPLATES",JSON.stringify(Qe))}catch{}},[Ye,Qe]);const oa=e.useMemo(()=>({...la,...Qe}),[Qe]),ca=e.useMemo(()=>{const e=oa[Ye]||la["标准"],a=($||"").trim();return`请基于以下输入生成一个“${Ye}”风格的国潮与非遗策展方案：${e}。\n\n创作提示：${a||"无"}；工具：${C}；风格预设：${ce||"无"}`},[Ye,oa,$,C,ce]),da=e.useCallback(async()=>{try{Ge(""),Be(!0);const e=await c.generateResponse(ca),a=[{id:`curation-${Date.now()}`,title:`策展方案（${Ye}）`,query:$||`${C}${ce?" · "+ce:""}`,aiText:e,ts:Date.now()},...ia].slice(0,20);na(a);try{localStorage.setItem("TOOLS_SAVED_PLANS",JSON.stringify(a))}catch{}}catch(e){Ge("生成失败：请检查密钥配置或稍后重试")}finally{Be(!1)}},[ca,Ye,$,C,ce,ia]),ga=[{id:"sketch",name:"一键设计",icon:"magic"},{id:"pattern",name:"纹样嵌入",icon:"th"},{id:"filter",name:"AI滤镜",icon:"filter"},{id:"trace",name:"文化溯源",icon:"book-open"},{id:"remix",name:"风格重混",icon:"random"},{id:"layout",name:"版式生成",icon:"th-large"},{id:"mockup",name:"Mockup预览",icon:"box-open"},{id:"tile",name:"图案平铺",icon:"border-all"}],ma=e=>{S(e);const a=new URLSearchParams(k.search);a.set("tool",e),f(`${k.pathname}?${a.toString()}`,{replace:!0})},[xa,ua]=e.useState(null),[ha,ba]=e.useState(1),[ya,pa]=e.useState(100),[fa,ja]=e.useState(100),[va,Na]=e.useState(100),[wa,ka]=e.useState(0),[Ca,Sa]=e.useState(0),[$a,Aa]=e.useState(""),[_a,Ia]=e.useState(20),[Ea,Ta]=e.useState("#111827"),[Oa,Ra]=e.useState(!1),[Ma,Da]=e.useState([]),[za,Fa]=e.useState([]),La=()=>{Da(e=>[...e.slice(-19),{scale:ha,brightness:ya,contrast:fa,saturate:va,hueRotate:wa,blur:Ca,overlayText:$a,overlaySize:_a,overlayColor:Ea}]),Fa([])},[Ua,Pa]=e.useState(()=>{try{return JSON.parse(localStorage.getItem("CREATE_AUTOSAVE_ENABLED")||"true")}catch{return!0}}),[Ja,Ka]=e.useState(()=>{try{return JSON.parse(localStorage.getItem("CREATE_AUTOSAVE_INTERVAL_SEC")||"30")}catch{return 30}}),[Ha,Va]=e.useState(()=>{try{return JSON.parse(localStorage.getItem("CREATE_HISTORY")||"[]")}catch{return[]}});e.useEffect(()=>{try{localStorage.setItem("CREATE_HISTORY",JSON.stringify(Ha.slice(0,20))),localStorage.setItem("CREATE_AUTOSAVE_ENABLED",JSON.stringify(Ua)),localStorage.setItem("CREATE_AUTOSAVE_INTERVAL_SEC",JSON.stringify(Ja))}catch{}},[Ha,Ua,Ja]);const Ba=e.useCallback((e="manual")=>{try{const a={prompt:$,selectedResult:E,currentStep:z,aiExplanation:Q,scale:ha,brightness:ya,contrast:fa,saturate:va,hueRotate:wa,blur:Ca,overlayText:$a,overlaySize:_a,overlayColor:Ea,updatedAt:Date.now()};localStorage.setItem("CREATE_DRAFT",JSON.stringify(a)),ke(a.updatedAt),Va(e=>[a,...e].slice(0,20)),"manual"===e&&s.success("已保存到草稿与历史")}catch{"manual"===e&&s.error("保存失败")}},[$,E,z,Q,ha,ya,fa,va,wa,Ca,$a,_a,Ea]);e.useEffect(()=>{if(!Ua)return;const e=1e3*Math.max(Ja,5),a=setInterval(()=>Ba("autosave"),e);return()=>clearInterval(a)},[Ua,Ja,Ba]),e.useEffect(()=>{const e=()=>{try{Ba("beforeunload")}catch{}};return window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e()}),()=>{window.removeEventListener("beforeunload",e)}},[]);const Wa=`brightness(${ya}%) contrast(${fa}%) saturate(${va}%) hue-rotate(${wa}deg) blur(${Ca}px)`;e.useEffect(()=>{E&&Le(!0)},[E]),e.useEffect(()=>{b&&y?setTimeout(()=>{U(!1);try{const e=localStorage.getItem("CREATE_DRAFT");if(e){const a=JSON.parse(e);new URLSearchParams(k.search).get("prompt")||"string"!=typeof a.prompt||A(a.prompt),"number"!=typeof a.selectedResult&&null!==a.selectedResult||T(a.selectedResult),"number"==typeof a.currentStep&&F(a.currentStep),"string"==typeof a.aiExplanation&&X(a.aiExplanation),"number"==typeof a.updatedAt&&ke(a.updatedAt)}}catch{}},800):f("/login")},[b,y,f]),e.useEffect(()=>{const e=new URLSearchParams(k.search),a=e.get("tool");a&&["sketch","pattern","filter","trace","remix","layout","mockup","tile"].includes(a)&&S(a);const t=e.get("prompt");t&&(A(t),T(null),F(1),X(""))},[k.search]),e.useEffect(()=>{try{const e=localStorage.getItem("CREATE_RECENTS");if(e){const a=JSON.parse(e);Array.isArray(a.patterns)&&Je(a.patterns.slice(0,5)),Array.isArray(a.filters)&&He(a.filters.slice(0,5))}}catch{}},[]),e.useEffect(()=>{try{const e={prompt:$,selectedResult:E,currentStep:z,aiExplanation:Q,updatedAt:Date.now()};localStorage.setItem("CREATE_DRAFT",JSON.stringify(e))}catch{}},[$,E,z,Q]);const Ga=()=>{Te&&(Te.abort(),Oe(null),Ee("idle"),R(!1),s.info("AI生成已取消"))},Ya=e.useCallback(async()=>{if(!$.trim())return void s.error("请输入创作提示");R(!0),Ee("running"),X("");const e=new AbortController;Oe(e);try{if(c.getConfig().stream)await c.generateResponse($,{onDelta:e=>{X(e)},signal:e.signal});else{const a=ce?`${$}；风格：${ce}`:$,t=await c.generateResponse(a,{signal:e.signal});X(t)}Ee("completed"),F(2),s.success("AI创作完成！请选择一个方案进行编辑"),I(N)}catch(a){a instanceof Error&&"AbortError"===a.name?Ee("idle"):(Ee("error"),s.error("生成失败，请稍后重试"))}finally{R(!1),Oe(null)}},[$,ce,N]),qa=e.useCallback(async()=>{const e=($||"天津文化设计灵感").trim(),a=ce?`${e}；风格：${ce}`:e,t=c.getCurrentModel();ne(!0);try{const e=await c.generateImage({prompt:a,size:"1024x1024",n:Math.min(Math.max(ge,1),6),response_format:"url",watermark:!0}),r=(e?.data?.data||[]).map(e=>e?.url?e.url:e?.b64_json?`data:image/png;base64,${e.b64_json}`:"").filter(e=>!!e);if(r.length){const e=r.map((e,a)=>({id:a+1,thumbnail:e,score:80}));I(e),T(e[0]?.id??null),F(2),s.success(`${t.name}已生成${r.length}张方案`)}else I([{id:1,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20A",score:80},{id:2,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20B",score:80},{id:3,thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20C",score:80}]),T(1),F(2),s.info(`${t.name}未返回图片，已提供占位图`)}catch(r){s.error(`${t.name}生成失败，已保留现有方案`)}finally{ne(!1)}},[$,ce,ge]),Qa=e.useCallback(()=>{const e=($||"").trim(),a=w.find(e=>e.id===Se);A(`${e}，嵌入${a?.name||"传统纹样"}纹样元素，强调协调与文化表达`),s.success("已嵌入纹样到提示词"),Se&&Je(e=>{const a=[Se,...e.filter(e=>e!==Se)].slice(0,5);try{localStorage.setItem("CREATE_RECENTS",JSON.stringify({patterns:a,filters:Ke}))}catch{}return a}),De&&qa()},[$,Se,Ke,De,qa]),Xa=e.useCallback(()=>{const e=($||"").trim();A(`${e}；滤镜：${Ae}；强度：${Re}/10`),s.success("已应用AI滤镜到提示词"),He(e=>{const a=`${Ae}:${Re}`,t=[{name:Ae,intensity:Re},...e.filter(e=>`${e.name}:${e.intensity}`!==a)].slice(0,5);try{localStorage.setItem("CREATE_RECENTS",JSON.stringify({patterns:Pe,filters:t}))}catch{}return t}),De&&qa()},[$,Ae,Re,Pe,De,qa]),Za=e.useCallback(async()=>{if($.trim()){oe(!0);try{const e=`请将下面的创作提示优化为更清晰的中文指令，保留原意，突出关键元素（主题、风格、色彩、素材）。用1-3个短句表达，避免礼貌语或解释，只输出优化后的文本：\n\n${$}`,a=await c.generateResponse(e),t=String(a||"").trim();t?(A(t),s.success("润色完成")):s.warning("未获得有效润色结果")}catch(e){s.error("润色失败，请稍后重试")}finally{oe(!1)}}else s.error("请输入创作提示")},[$]),et=e.useCallback(()=>{try{const e=v||[];if(!e.length)return void s.info("暂未找到模板");const a=e[Math.floor(Math.random()*e.length)];A(a.text),s.success("已填充随机灵感模板")}catch{s.error("随机灵感失败")}},[]),at=e.useCallback(e=>{T(e),F(3)},[]),tt=async()=>{if(!E)return void s.error("请先在上一步选择一个方案");const e=($||"天津文化设计灵感").trim(),a=c.getCurrentModel();re(!0);try{const t=await c.generateImage({prompt:e,size:"1024x1024",n:1,response_format:"url",watermark:!0}),r=t?.data?.data||[],i=r[0]?.url||(r[0]?.b64_json?`data:image/png;base64,${r[0].b64_json}`:"");i?(I(e=>e.map(e=>e.id===E?{...e,thumbnail:i}:e)),s.success(`${a.name}已重新生成并更新预览`)):s.info(`${a.name}未返回图片，保持原图不变`)}catch(t){s.error(`${a.name}生成失败，请稍后重试`)}finally{re(!1)}},st=e.useCallback(async()=>{const e=($||"").trim(),a=(fe||"").trim();if(e&&a){Ne(!0);try{const t=`请将以下两个中文提示融合为一个更具创意且结构清晰的中文指令：保留核心主题，强调风格与版式要点；输出2-3句精炼描述，无多余解释：\n\n提示A：${e}\n提示B：${a}`,r=String(await c.generateResponse(t)||"").trim();A(r||`${e} 与 ${a} 的融合设计`),te(!0),await qa(),s.success("融合生成完成，已更新三张方案"),F(2)}catch{s.error("融合生成失败，请稍后重试")}finally{Ne(!1)}}else s.error("请填写两个提示词进行融合")},[$,fe,qa]),rt=e.useCallback(e=>{const a=_.find(a=>a.id===e);a&&ue(t=>t.some(a=>a.id===e)?t.filter(a=>a.id!==e):[...t,{id:e,thumbnail:a.thumbnail}])},[_]),it=e.useCallback(async()=>{if(!E)return void s.error("请先选择一个方案");const e=_.find(e=>e.id===E)?.thumbnail||"";if(e)try{const a=document.createElement("a");a.href=e,a.download=`design_${E}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),s.success("已开始下载")}catch{s.error("下载失败")}else s.error("未找到图片")},[E,_]),nt=e.useCallback(async()=>{if(!E)return void s.error("请先选择一个方案");const e=_.find(e=>e.id===E)?.thumbnail||"";try{await navigator.clipboard.writeText(e),s.success("已复制图片链接")}catch{s.error("复制失败")}},[E,_]),lt=async()=>{let e=E;if(!e){const a=_[0]?.id;if(!a)return void s.error("请先选择一个方案");T(a),e=a}const a=_.find(a=>a.id===e),t=a?.thumbnail||"";if(!t)return void s.error("未找到图片");if(t.startsWith("data:"))return void s.error("首帧为本地数据，需使用可公网访问的图片URL");const r=`${$}  --resolution 720p  --duration 5 --camerafixed false`;be(!0),I(a=>a.map(a=>a.id===e?{...a,video:"生成中..."}:a));try{const a=await p({model:"doubao-seedance-1-0-pro-250528",content:[{type:"text",text:r},{type:"image_url",image_url:{url:t}}]});if(!a.ok||!a.data?.id){const t=a?.error||a?.data?.error?.code||"UNKNOWN",r="CONFIG_MISSING"===a?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":`创建视频任务失败：${t}`;return s.error(r),I(a=>a.map(a=>a.id===e?{...a,video:`视频生成失败：${t}`}:a)),void be(!1)}const i=a.data.id,n=await j(i,{intervalMs:1e4,timeoutMs:6e5});if(!n.ok){const a=n?.error||n?.data?.error?.code||"UNKNOWN",t="CONFIG_MISSING"===n?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":`查询视频任务失败：${a}`;return s.error(t),I(t=>t.map(t=>t.id===e?{...t,video:`视频生成失败：${a}`}:t)),void be(!1)}const l=n.data?.status,o=n.data?.content?.video_url||"";if("succeeded"===l&&o)I(a=>a.map(a=>a.id===e?{...a,video:o}:a)),s.success("视频生成完成");else{const a=n.data?.error?.code||n.data?.error?.message||n.data?.status||"UNKNOWN";s.error(`视频生成失败：${a}`),I(t=>t.map(t=>t.id===e?{...t,video:`视频生成失败：${a}`}:t))}}catch(i){s.error("视频生成异常"),I(a=>a.map(a=>a.id===e?{...a,video:"视频生成失败"}:a))}finally{be(!1)}},ot=e.useCallback(async()=>{const e=($||"中国传统文化元素").trim();try{const a=`请用中文概括该创作提示涉及的文化元素（最多60字，通俗易懂）：\n\n${e}`,t=String(await c.generateResponse(a)||"").trim();t&&pe(t),D(!0),s.success("文化识别完成")}catch{D(!0),s.error("文化识别失败，已显示默认说明")}},[$]);e.useMemo(()=>_.find(e=>e.id===E)||null,[_,E]),e.useMemo(()=>xe.some(e=>e.id===E),[xe,E]),e.useMemo(()=>Pe.map(e=>w.find(a=>a.id===e)).filter(Boolean),[Pe]),e.useMemo(()=>Ke.slice(0,5),[Ke]);const ct=e=>{const a=e=>{const a=e||"";return a.includes("诊断")?"search":a.includes("优化")?"magic":a.includes("步骤")?"list-check":a.includes("参考")||a.includes("风格")?"book-open":"pen-nib"},t=(e=>{const a=String(e||"").split(/\r?\n/),t=[];let s=null;for(const r of a){let e=r.trim();if(e=e.replace(/^#{1,6}\s*/,""),e=e.replace(/^```+\s*/,""),e=e.replace(/^>+\s*/,""),!e)continue;const a=e.match(/^(\d+)\)\s*(.+?)：/)||e.match(/^([一二三四五六七八九十]+)\)\s*(.+?)：/);if(a){s&&t.push(s),s={title:a[2],items:[]};continue}s||(s={title:"说明",items:[]});const i=e.replace(/^[-•]\s*/,"");s.items.push(i)}return s&&t.push(s),t})(e);return 0===t.length?r.jsx("pre",{className:(o?"bg-gray-800/80 text-gray-100 ring-1 ring-gray-700":"bg-white/80 text-gray-800 ring-1 ring-gray-200")+" whitespace-pre-wrap break-words rounded-2xl p-5 leading-relaxed shadow-md backdrop-blur-sm border border-white/40 dark:border-gray-700/40",children:e}):r.jsx("div",{className:"grid gap-4 md:gap-6",children:t.map((e,t)=>r.jsxs("div",{className:(o?"bg-gray-900/50 ring-1 ring-gray-700":"bg-white/60 ring-1 ring-gray-200")+" rounded-2xl p-5 shadow-lg backdrop-blur-sm border border-white/40 dark:border-gray-700/40",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:`fas fa-${a(e.title)} mr-2 text-blue-600`}),r.jsx("div",{className:"font-semibold tracking-wide",children:e.title})]})}),r.jsx("div",{className:"h-px w-full bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-500 mb-3 opacity-60"}),r.jsx("ul",{className:"grid md:grid-cols-2 gap-x-6 gap-y-2",children:e.items.map((e,a)=>{const t=String(e||""),s=/^#{1,6}\s*\d+\)\s*/.test(t)||/^#{1,6}\s*[一二三四五六七八九十]+\)\s*/.test(t),i=t.replace(/^#{1,6}\s*\d+\)\s*/,"").replace(/^#{1,6}\s*[一二三四五六七八九十]+\)\s*/,""),n=t.match(/^\*\*(.+?)\*\*：?(.*)$/),l=!!n,c=l&&n?.[1]||"",d=l&&n?.[2]||"",g=l||s?null:t.match(/^([^：:]+)[:：]\s*(.+)$/),m=l||s?null:t.match(/^(\d+|[一二三四五六七八九十]+)[\.、]\s*(.+)$/);return r.jsx("li",{className:s?"md:col-span-2 flex items-center py-1":"flex items-start py-1",children:s?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-angle-right mr-2 text-blue-600"}),r.jsx("span",{className:(o?"text-gray-100":"text-gray-800")+" text-sm font-semibold tracking-wide",children:i})]}):l?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 mr-2 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800",children:c}),r.jsx("span",{className:(o?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:d})]}):g?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 mr-2 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800",children:g[1]}),r.jsx("span",{className:(o?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:g[2]})]}):m?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 ring-1 ring-gray-300 mr-2 dark:bg-gray-700 dark:text-gray-200 dark:ring-gray-600",children:m[1]}),r.jsx("span",{className:(o?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:m[2]})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),r.jsx("span",{className:(o?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:t})]})},a)})})]},t))})},dt=()=>{Ba("manual")},gt=async()=>{try{const e=`请针对“${($||"品牌视觉设计").trim()}”给出中文版式建议：使用1)2)3)编号列出模块（标题、主视觉、卖点、配色、字体、留白），每条尽量短句。只输出建议。`,a=String(await c.generateResponse(e)||"").trim();X(a),s.success("已生成版式建议")}catch{s.error("版式建议生成失败")}},mt=()=>{te(!0),s.info("已应用 Mockup 预览效果（示意）")},xt=()=>{const e=($||"").trim();A(`${e}，重复平铺的图案纹样，适用于包装/壁纸`),s.success("已切换为图案平铺风格"),De&&qa()},ut=()=>{W?ht():bt()},ht=()=>{q({status:"pending",issues:[]}),setTimeout(()=>{const e=c.diagnoseCreationIssues((Q||$||"").slice(0,1e3)).map(e=>({type:/版权/.test(e)?"copyright":"content",severity:"warning",message:e}));0===e.length?q({status:"passed",issues:[]}):q({status:"warning",issues:e})},800)},bt=()=>{s.success("作品发布成功！正在进行版权存证..."),setTimeout(()=>{s.success("版权存证完成！"),setTimeout(()=>{f("/dashboard")},1e3)},1500)},yt=()=>{z>1?F(z-1):f("/dashboard")},pt=()=>{D(!M)};return L?r.jsxs(r.Fragment,{children:[r.jsx("nav",{className:`sticky top-0 z-50 ${o?"bg-gray-800":"bg-white"} border-b ${o?"border-gray-700":"border-gray-200"} px-4 py-3`,children:r.jsx("div",{className:"container mx-auto flex justify-between items-center",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),r.jsx("span",{className:"text-xl font-bold",children:"共创"})]})})}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:`h-8 w-1/3 rounded ${o?"bg-gray-800":"bg-white"} animate-pulse`}),r.jsx("div",{className:`h-10 rounded ${o?"bg-gray-800":"bg-white"} animate-pulse`}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:`col-span-1 ${o?"bg-gray-800":"bg-white"} rounded-2xl p-6 animate-pulse`,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:`h-12 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse`}),r.jsx("div",{className:`h-32 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse`}),r.jsx("div",{className:`h-12 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse`})]})}),r.jsx("div",{className:`col-span-2 ${o?"bg-gray-800":"bg-white"} rounded-2xl p-6 animate-pulse`,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:`h-6 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse w-1/4`}),r.jsx("div",{className:`h-40 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse`}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2].map(e=>r.jsx("div",{className:`h-12 rounded ${o?"bg-gray-700":"bg-gray-100"} animate-pulse`},e))})]})})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:`sticky top-0 z-50 ${o?"bg-gray-800":"bg-white"} border-b ${o?"border-gray-700":"border-gray-200"} px-4 py-3`,children:[r.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),r.jsx("span",{className:"text-xl font-bold",children:"共创"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>J(!0),className:"px-4 py-2 rounded-full transition-colors "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:"协作"}),r.jsx("button",{onClick:()=>B(!0),className:"px-4 py-2 rounded-full transition-colors "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:"选择模型"}),r.jsx("button",{onClick:()=>H(!0),className:"px-4 py-2 rounded-full transition-colors "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:"AI点评"}),r.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[r.jsx("label",{className:"text-sm "+(o?"text-gray-300":"text-gray-700"),children:"自动保存"}),r.jsx("button",{onClick:()=>Pa(e=>!e),className:"px-3 py-1.5 rounded-full text-sm "+(Ua?"bg-green-600 text-white":o?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:Ua?"开启":"关闭"}),r.jsxs("select",{value:Ja,onChange:e=>Ka(parseInt(e.target.value)||30),className:"px-2 py-1.5 rounded-full text-sm "+(o?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-700"),children:[r.jsx("option",{value:15,children:"15秒"}),r.jsx("option",{value:30,children:"30秒"}),r.jsx("option",{value:60,children:"60秒"})]})]}),r.jsx("button",{onClick:dt,className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full transition-colors ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} text-sm`,children:"保存"}),r.jsx("button",{onClick:ut,className:`px-3 py-1.5 md:px-4 md:py-2 rounded-full transition-colors ${ae?"bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-cyan-600 text-white":"bg-red-600 hover:bg-red-700 text-white"} text-sm`,disabled:z<3,children:"发布"})]})]}),r.jsx("div",{className:"container mx-auto mt-3 hidden",children:r.jsxs("div",{className:"space-y-3",ref:Ue,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:(o?"bg-gray-700 border border-gray-600":"bg-gray-50 border border-gray-200")+" p-3 rounded-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"text-sm font-medium flex items-center",children:[r.jsx("i",{className:"far fa-clock mr-2"}),"历史记录"]}),r.jsx("button",{onClick:dt,className:(o?"bg-gray-800 text-gray-200":"bg-white text-gray-800")+" text-xs px-3 py-1 rounded-full hover:opacity-90",children:"保存草稿"})]}),r.jsx("div",{className:"text-sm opacity-80",children:we?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:["最近草稿时间：",new Date(we).toLocaleString()]}),r.jsxs("div",{className:"mt-1",children:["提示摘要：",($||"").slice(0,24)||"（无）"]})]}):r.jsx("div",{children:"暂无创作历史"})})]}),r.jsxs("div",{className:(o?"bg-gray-700 border border-gray-600":"bg-gray-50 border border-gray-200")+" p-3 rounded-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"text-sm font-medium flex items-center",children:[r.jsx("i",{className:"fas fa-microchip mr-2"}),"AI生成引擎"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>f(`/generate?prompt=${encodeURIComponent($||"")}`),className:(o?"bg-gray-800 text-gray-200":"bg-white text-gray-800")+" text-xs px-3 py-1 rounded-full hover:opacity-90",children:"前往生成引擎"})})]}),r.jsx("div",{className:(o?"text-gray-300":"text-gray-600")+" text-xs",children:"文案优化、朗读与图片问答"})]})]}),r.jsxs("div",{className:(o?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" p-3 rounded-2xl shadow-sm",children:[r.jsx("div",{className:"mb-2 px-1 flex items-center justify-between",children:r.jsx("span",{className:(o?"text-gray-300":"text-gray-700")+" text-xs font-medium",children:"更多玩法"})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>{st()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-random mr-2"}),"风格重混"]}),r.jsxs("button",{onClick:()=>{gt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items中心 transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-th-large mr-2"}),"版式生成"]}),r.jsxs("button",{onClick:()=>{mt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-box-open mr-2"}),"Mockup预览"]}),r.jsxs("button",{onClick:()=>{xt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-border-all mr-2"}),"图案平铺"]}),r.jsxs("button",{onClick:()=>{et()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-lightbulb mr-2"}),"随机灵感"]}),r.jsxs("button",{onClick:()=>{ot()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-book-open mr-2"}),"AI文化识别"]})]})]})]})})]}),r.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"space-y-3",ref:Ue,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:(o?"bg-gray-700 border border-gray-600":"bg-gray-50 border border-gray-200")+" p-3 rounded-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"text-sm font-medium flex items-center",children:[r.jsx("i",{className:"far fa-clock mr-2"}),"历史记录"]}),r.jsx("button",{onClick:dt,className:(o?"bg-gray-800 text-gray-200":"bg-white text-gray-800")+" text-xs px-3 py-1 rounded-full hover:opacity-90",children:"保存草稿"})]}),r.jsx("div",{className:"text-sm opacity-80",children:we?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:["最近草稿时间：",new Date(we).toLocaleString()]}),r.jsxs("div",{className:"mt-1",children:["提示摘要：",($||"").slice(0,24)||"（无）"]})]}):r.jsx("div",{children:"暂无创作历史"})})]}),r.jsxs("div",{className:(o?"bg-gray-700 border border-gray-600":"bg-gray-50 border border-gray-200")+" p-3 rounded-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"text-sm font-medium flex items-center",children:[r.jsx("i",{className:"fas fa-microchip mr-2"}),"AI生成引擎"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>f(`/generate?prompt=${encodeURIComponent($||"")}`),className:(o?"bg-gray-800 text-gray-200":"bg-white text-gray-800")+" text-xs px-3 py-1 rounded-full hover:opacity-90",children:"前往生成引擎"})})]}),r.jsx("div",{className:(o?"text-gray-300":"text-gray-600")+" text-xs",children:"文案优化、朗读与图片问答"})]})]}),r.jsxs("div",{className:(o?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" p-3 rounded-2xl shadow-sm",children:[r.jsx("div",{className:"mb-2 px-1 flex items-center justify-between",children:r.jsx("span",{className:(o?"text-gray-300":"text-gray-700")+" text-xs font-medium",children:"更多玩法"})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>{st()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-random mr-2"}),"风格重混"]}),r.jsxs("button",{onClick:()=>{gt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-th-large mr-2"}),"版式生成"]}),r.jsxs("button",{onClick:()=>{mt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-box-open mr-2"}),"Mockup预览"]}),r.jsxs("button",{onClick:()=>{xt()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-border-all mr-2"}),"图案平铺"]}),r.jsxs("button",{onClick:()=>{et()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-lightbulb mr-2"}),"随机灵感"]}),r.jsxs("button",{onClick:()=>{ot()},className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-2 rounded-xl text-sm flex items-center transition-colors transform hover:scale-105",children:[r.jsx("i",{className:"fas fa-book-open mr-2"}),"AI文化识别"]})]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("nav",{className:"flex items-center text-sm","aria-label":"面包屑",children:[r.jsx("a",{href:"/dashboard",className:"hover:text-red-600 transition-colors",children:"首页"}),r.jsx("i",{className:"fas fa-chevron-right text-xs mx-2 opacity-50"}),r.jsx("a",{href:"#",className:"hover:text-red-600 transition-colors",children:"创作中心"}),r.jsx("i",{className:"fas fa-chevron-right text-xs mx-2 opacity-50"}),r.jsx("span",{className:"opacity-70",children:"AI创作"})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex justify-between items-center",children:[1,2,3].map(e=>r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all "+(e<z?"bg-green-500 text-white":e===z?"bg-red-600 text-white scale-110 shadow-md":o?"bg-gray-700 text-gray-400":"bg-gray-200 text-gray-500"),children:e<z?r.jsx("i",{className:"fas fa-check"}):e}),r.jsxs("span",{className:"text-xs "+(e===z?"font-medium":o?"text-gray-400":"text-gray-500"),children:[1===e&&"输入提示词",2===e&&"选择方案",3===e&&"编辑优化"]})]},e))}),r.jsxs("div",{className:"relative h-1 mt-2",children:[r.jsx("div",{className:"absolute inset-0 rounded-full "+(o?"bg-gray-700":"bg-gray-200")}),r.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full transition-all "+(ae?"bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-cyan-600":"bg-red-600"),style:{width:(z-1)/2*100+"%"},role:"progressbar","aria-label":"创作进度","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round((z-1)/2*100)})]})]}),r.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-2",children:[r.jsx(i.button,{type:"button",whileHover:{scale:1.03},onClick:()=>te(e=>!e),className:`px-3 py-1.5 rounded-lg ${ae?"bg-indigo-600 hover:bg-indigo-700 text-white":o?"bg-gray-800 text-white hover:bg-gray-700 ring-1 ring-gray-700":"bg-white text-gray-900 hover:bg-gray-50 ring-1 ring-gray-200"} focus:outline-none focus:ring-2 ${ae?"focus:ring-indigo-500":o?"focus:ring-gray-600":"focus:ring-gray-300"} focus:ring-offset-2`,children:ae?"融合模式：开":"融合模式：关"}),r.jsx(i.button,{type:"button",whileHover:{scale:Ve?1:1.03},onClick:da,disabled:Ve,className:`px-3 py-1.5 rounded-lg ${Ve?"opacity-70 cursor-not-allowed":""} ${o?"bg-purple-700 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-500"} focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2`,children:Ve?"生成策展中…":"AI智能策展"}),r.jsx("select",{value:Ye,onChange:e=>qe(e.target.value),className:"px-2 py-1.5 rounded-lg text-sm "+(o?"bg-gray-800 text-white ring-1 ring-gray-700":"bg-white text-gray-900 ring-1 ring-gray-200"),children:Object.keys(oa).map(e=>r.jsx("option",{value:e,children:e},e))}),r.jsx("button",{type:"button",onClick:()=>ea(e=>!e),className:(o?"bg-gray-800 text-white ring-1 ring-gray-700":"bg-white text-gray-900 ring-1 ring-gray-200")+" px-3 py-1.5 rounded-lg text-sm",children:Ze?"收起模板管理":"自定义模板"}),We&&r.jsx("span",{className:"text-xs "+(o?"text-red-400":"text-red-600"),children:We})]}),Ze&&r.jsxs("div",{className:(o?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" rounded-2xl p-4 shadow-sm mb-4",children:[r.jsx("div",{className:"font-medium mb-2",children:"新增模板"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mb-3",children:[r.jsx("input",{value:aa,onChange:e=>ta(e.target.value),placeholder:"模板名称（如：品牌活动方案）",className:(o?"bg-gray-700 text-white ring-1 ring-gray-600":"bg-white text-gray-900 ring-1 ring-gray-300")+" px-3 py-2 rounded-lg"}),r.jsx("input",{value:sa,onChange:e=>ra(e.target.value),placeholder:"模板指引（如：结构要点）",className:(o?"bg-gray-700 text-white ring-1 ring-gray-600":"bg-white text-gray-900 ring-1 ring-gray-300")+" px-3 py-2 rounded-lg md:col-span-2"})]}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("button",{className:"px-3 py-1.5 rounded bg-purple-600 text-white",onClick:()=>{const e=aa.trim(),a=sa.trim();e&&a&&(Xe(t=>({...t,[e]:a})),ta(""),ra(""))},children:"添加模板"}),r.jsx("button",{className:(o?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1.5 rounded",onClick:()=>{ta(""),ra("")},children:"清空"})]}),r.jsx("div",{className:"font-medium mb-2",children:"我的模板"}),r.jsx("ul",{className:"space-y-2",children:0===Object.keys(Qe).length?r.jsx("li",{className:"text-sm opacity-60",children:"暂无自定义模板"}):Object.entries(Qe).map(([e,a])=>r.jsxs("li",{className:`${o?"bg-gray-900":"bg-gray-50"} border ${o?"border-gray-700":"border-gray-200"} rounded p-2 text-xs`,children:[r.jsx("div",{className:"font-medium mb-1",children:e}),r.jsx("div",{className:"opacity-80 mb-2",children:a}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white",onClick:()=>qe(e),children:"设为当前"}),r.jsx("button",{className:(o?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded",onClick:async()=>{try{await navigator.clipboard.writeText(a)}catch{}},children:"复制指引"}),r.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white",onClick:()=>Xe(a=>{const t={...a};return delete t[e],t}),children:"删除"})]})]},e))})]}),r.jsxs(i.div,{className:(o?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" rounded-2xl p-4 shadow-sm mb-6",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},transition:{duration:.2},children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium",children:"提示词预览"}),r.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(ca)}catch{}},className:(o?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"复制提示词"})]}),r.jsx("div",{className:(o?"bg-gray-900":"bg-gray-50")+" rounded-lg p-3 text-xs whitespace-pre-wrap",children:ca})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:(o?"bg-gray-800":"bg-white")+" rounded-2xl p-6 shadow-md lg:sticky lg:top-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"创作工具"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",role:"group","aria-label":"创作工具",children:ga.map((e,a)=>r.jsxs(i.button,{onClick:()=>ma(e.id),className:`p-3 rounded-xl flex flex-col items-center transition-all ${C===e.id?"bg-red-50 text-red-600 border-red-200 border":o?"bg-gray-700 hover:bg-gray-600 border border-gray-600":"bg-gray-50 hover:bg-gray-100 border border-gray-200"} focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500`,whileHover:{scale:1.03},whileTap:{scale:.97},"aria-pressed":C===e.id,"aria-label":e.name,tabIndex:0,ref:e=>{Ce.current[a]=e},onKeyDown:e=>{const t=a;if("ArrowRight"===e.key){e.preventDefault();const a=Math.min(t+1,ga.length-1),s=ga[a];s&&(ma(s.id),Ce.current[a]?.focus())}else if("ArrowLeft"===e.key){e.preventDefault();const a=Math.max(t-1,0),s=ga[a];s&&(ma(s.id),Ce.current[a]?.focus())}else if("ArrowDown"===e.key){e.preventDefault();const a=Math.min(t+2,ga.length-1),s=ga[a];s&&(ma(s.id),Ce.current[a]?.focus())}else if("ArrowUp"===e.key){e.preventDefault();const a=Math.max(t-2,0),s=ga[a];s&&(ma(s.id),Ce.current[a]?.focus())}},children:[r.jsx("i",{className:`fas fa-${e.icon} text-xl mb-2`}),r.jsx("span",{className:"text-sm font-medium",children:e.name})]},e.id))})]}),(()=>{if("sketch"===C)return r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"一键设计"}),r.jsx("div",{className:"text-xs mb-3 text-gray-600 dark:text-gray-300",children:"输入提示后点击生成即可获得方案"}),O&&r.jsxs("div",{className:"mb-3 flex items-center justify-between text-xs p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:[r.jsxs("span",{children:["running"===Ie&&r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"running"===Ie&&"AI正在生成内容...","paused"===Ie&&"AI生成已暂停","completed"===Ie&&"AI生成完成","error"===Ie&&"AI生成出错"]}),r.jsx("button",{onClick:Ga,className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-300 dark:hover:bg-red-900/50",children:"取消"})]}),r.jsx("button",{onClick:Ya,disabled:O||!$.trim(),className:"w-full text-sm px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white disabled:opacity-50 min-h-[44px]",children:O?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"生成中..."]}):"立即生成"})]});if("pattern"===C)return r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"纹样嵌入"}),r.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"应用后自动生成"}),r.jsx("button",{onClick:()=>ze(e=>!e),className:(De?"bg-green-600":"bg-gray-400")+" text-white px-2 py-0.5 rounded-full",children:De?"开启":"关闭"})]}),r.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:w.slice(0,6).map(e=>r.jsx("button",{onClick:()=>$e(e.id),className:"rounded-lg overflow-hidden border "+(Se===e.id?"border-red-500":"border-gray-200 dark:border-gray-600"),children:r.jsx("img",{src:e.thumbnail,alt:e.name,className:"w-full h-full object-cover"})},e.id))}),r.jsx("button",{onClick:Qa,disabled:!Se,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50",children:"嵌入到提示词"})]});if("filter"===C){const e=["复古胶片","国画质感","霓虹赛博","黑白素描","水彩晕染"];return r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"AI滤镜"}),r.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"应用后自动生成"}),r.jsx("button",{onClick:()=>ze(e=>!e),className:(De?"bg-green-600":"bg-gray-400")+" text-white px-2 py-0.5 rounded-full",children:De?"开启":"关闭"})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("select",{value:Ae,onChange:e=>_e(e.target.value),className:"text-xs px-2 py-1 rounded bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600",children:e.map(e=>r.jsx("option",{value:e,children:e},e))}),r.jsx("input",{type:"range",min:1,max:10,value:Re,onChange:e=>Me(parseInt(e.target.value)),className:"flex-1"}),r.jsxs("span",{className:"text-xs",children:[Re,"/10"]})]}),r.jsx("button",{onClick:Xa,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"应用到提示词"})]})}return"trace"===C?r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"文化溯源"}),r.jsx("div",{className:"text-xs mb-3 text-gray-600 dark:text-gray-300",children:"生成文化元素说明并在右侧显示"}),r.jsx("button",{onClick:ot,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"生成说明"})]}):"remix"===C?r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"风格重混"}),r.jsx("textarea",{value:fe,onChange:e=>je(e.target.value),placeholder:"输入第二提示词",className:"w-full p-2 rounded-lg h-20 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 mb-3"}),r.jsx("button",{onClick:st,disabled:ve,className:"w-full text-sm px-3 py-2 rounded-lg bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-cyan-600 text-white disabled:opacity-50",children:"混合生成"})]}):"layout"===C?r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"版式生成"}),r.jsx("button",{onClick:gt,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"生成版式建议"})]}):"mockup"===C?r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"Mockup预览"}),r.jsx("button",{onClick:mt,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"应用预览效果"})]}):"tile"===C?r.jsxs("div",{className:"mb-6 p-3 rounded-xl bg-gray-50 border border-gray-200 dark:bg-gray-700 dark:border-gray-600",children:[r.jsx("div",{className:"font-medium mb-2",children:"图案平铺"}),r.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"切换后自动生成"}),r.jsx("button",{onClick:()=>ze(e=>!e),className:(De?"bg-green-600":"bg-gray-400")+" text-white px-2 py-0.5 rounded-full",children:De?"开启":"关闭"})]}),r.jsx("button",{onClick:xt,className:"w-full text-sm px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white",children:"切换为平铺风格"})]}):null})(),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"创作提示"}),r.jsx("button",{onClick:Za,disabled:le||!$.trim(),className:`text-sm px-3 py-1 rounded-full flex items-center transition-colors ${o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} ${le?"opacity-70 cursor-not-allowed":""}`,"aria-label":"智能润色创作提示",children:le?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"智能润色中..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-pen-fancy mr-1"}),"智能润色"]})}),r.jsxs("button",{onClick:et,className:"text-sm px-3 py-1 rounded-full ml-2 "+(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"),children:[r.jsx("i",{className:"fas fa-lightbulb mr-1"}),"随机灵感"]})]}),r.jsxs("div",{className:"mb-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-xs mr-2",children:"风格预设"}),r.jsxs("select",{value:ce,onChange:e=>de(e.target.value),className:"text-xs px-2 py-1 rounded "+(o?"bg-gray-700 text-white border border-gray-600":"bg-gray-100 text-gray-900 border border-gray-200"),"aria-label":"风格预设",children:[r.jsx("option",{value:"",children:"无"}),r.jsx("option",{value:"国潮",children:"国潮"}),r.jsx("option",{value:"极简",children:"极简"}),r.jsx("option",{value:"复古",children:"复古"}),r.jsx("option",{value:"教育科普",children:"教育科普"})]})]}),r.jsxs("div",{className:"flex items-center justify-end",children:[r.jsx("span",{className:"text-xs mr-2",children:"批量生成"}),r.jsx("input",{type:"number",min:1,max:6,value:ge,onChange:e=>me(Math.min(Math.max(parseInt(e.target.value||"3"),1),6)),className:"w-16 text-xs px-2 py-1 rounded "+(o?"bg-gray-700 text-white border border-gray-600":"bg-gray-100 text-gray-900 border border-gray-200"),"aria-label":"批量生成数量"})]})]}),r.jsx("textarea",{value:$,onChange:e=>A(e.target.value),placeholder:"描述您想要创作的内容，例如：具有中国传统元素的现代包装设计...",className:"w-full p-3 rounded-xl h-32 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors "+(o?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border"),"aria-label":"创作提示",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send"}),r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:v.map(e=>r.jsx(i.button,{onClick:()=>A(e.text),className:`text-xs px-3 py-1 rounded-full ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`填充模板：${e.name}`,children:e.name},e.id))}),(Pe.length>0||Ke.length>0)&&r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"最近使用"}),Pe.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs mb-1",children:"纹样"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map((e,a)=>{const t=w.find(a=>a.id===e),s=t?.name||`纹样${e}`;return r.jsx("button",{onClick:()=>{$e(e),Qa()},className:"text-xs px-3 py-1 rounded-full "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:s},`${e}-${a}`)})})]}),Ke.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-xs mb-1",children:"滤镜"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Ke.map((e,a)=>r.jsxs("button",{onClick:()=>{_e(e.name),Me(e.intensity),Xa()},className:"text-xs px-3 py-1 rounded-full "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:[e.name," ",e.intensity,"/10"]},`${e.name}-${e.intensity}-${a}`))})]})]}),"remix"===C&&r.jsxs("div",{className:"mt-4 p-3 rounded-xl "+(o?"bg-gray-700 border border-gray-600":"bg-gray-50 border border-gray-200"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("i",{className:"fas fa-flask mr-2"}),r.jsx("span",{className:"text-sm font-medium",children:"融合玩法"})]}),r.jsx("button",{onClick:()=>te(e=>!e),className:"text-xs px-2 py-1 rounded-full "+(ae?"bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-cyan-600 text-white":o?"bg-gray-800 text-gray-200":"bg-white text-gray-800"),children:ae?"已启用":"未启用"})]}),r.jsx("textarea",{value:fe,onChange:e=>je(e.target.value),placeholder:"输入第二提示词，例如：东方美学配色与极简版式...",className:"w-full p-2 rounded-lg h-20 focus:outline-none focus:ring-2 focus:ring-fuchsia-500 transition-colors "+(o?"bg-gray-800 border-gray-700 text-white placeholder-gray-400 border":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 border")}),r.jsx("div",{className:"mt-2",children:r.jsx("button",{onClick:st,disabled:ve,className:`w-full text-sm px-3 py-2 rounded-lg ${ve?"opacity-60 cursor-not-allowed":""} ${ae?"bg-gradient-to-r from-indigo-600 via-fuchsia-600 to-cyan-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:ve?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"混合生成中..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-bezier-curve mr-1"}),"混合生成（三张）"]})})})]}),"sketch"===C&&r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:Ya,disabled:O||z>1||!$.trim(),className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center",children:O?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"正在生成..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-magic mr-2"}),"生成设计"]})})})]})]}),r.jsxs("div",{className:`lg:col-span-2 ${o?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-md`,children:[M&&r.jsx(i.div,{className:"mb-6 p-4 rounded-xl border "+(o?"bg-gray-700 border-gray-600":"bg-yellow-50 border-yellow-200"),initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center mr-3 flex-shrink-0",children:r.jsx("i",{className:"fas fa-info"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-1",children:"文化元素：云纹"}),r.jsx("p",{className:"text-sm opacity-80",children:ye})]})]}),r.jsx("button",{onClick:pt,className:"text-gray-400 hover:text-gray-600",children:r.jsx("i",{className:"fas fa-times"})})]})}),1===z&&r.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center py-12",children:[r.jsx("div",{className:"mb-6 text-6xl text-red-600",children:r.jsx("i",{className:"fas fa-magic"})}),r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"开始您的AI创作之旅"}),r.jsx("p",{className:"opacity-80 max-w-lg mx-auto mb-8",children:"在左侧输入创作提示，AI将根据您的描述生成独特的设计作品。 您可以添加传统元素、指定风格，让AI为您带来无限创意。"}),r.jsx("img",{src:"https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=600&h=338&fit=crop",alt:"AI创作流程",className:"rounded-xl mx-auto max-w-full h-auto",loading:"lazy",decoding:"async"})]}),2===z&&r.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[Q&&!Z&&r.jsxs("div",{className:"mb-6 p-4 rounded-xl "+(o?"bg-gray-700":"bg-gray-50"),children:[r.jsx("h3",{className:"font-medium mb-2",children:"AI生成说明"}),r.jsx("div",{className:"text-sm",children:ct(Q)})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold",children:"选择您喜欢的设计方案"}),Q&&r.jsx("button",{onClick:()=>ee(e=>!e),className:"text-sm px-3 py-1 rounded-full "+(o?"bg-gray-700":"bg-gray-100"),children:Z?"展开说明":"收起说明"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:_.map((e,a)=>r.jsxs(i.div,{role:"radio","aria-checked":E===e.id,className:"text-left rounded-xl overflow-hidden border-2 transition-all focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 "+(E===e.id?"border-red-600 shadow-lg bg-red-50":o?"border-gray-700":"border-gray-200"),whileHover:{y:-5},onClick:()=>at(e.id),onKeyDown:t=>{if("Enter"===t.key||" "===t.key)return t.preventDefault(),void at(e.id);if("ArrowRight"===t.key){t.preventDefault();const e=Math.min(a+1,_.length-1),s=_[e]?.id;return void(s&&T(s))}if("ArrowLeft"===t.key){t.preventDefault();const e=Math.max(a-1,0),s=_[e]?.id;return void(s&&T(s))}if("ArrowDown"===t.key){t.preventDefault();const e=Math.min(a+2,_.length-1),s=_[e]?.id;return void(s&&T(s))}if("ArrowUp"===t.key){t.preventDefault();const e=Math.max(a-2,0),s=_[e]?.id;return void(s&&T(s))}},tabIndex:0,children:[r.jsxs("div",{className:"relative",children:[r.jsx(d,{src:e.thumbnail,alt:`AI生成方案 ${e.id}`,ratio:"landscape",rounded:"xl"}),r.jsxs("div",{className:"absolute top-3 right-3 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",children:["匹配度 ",e.score,"%"]}),r.jsx("button",{className:"absolute top-3 left-3 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded-full",onClick:a=>{a.stopPropagation(),rt(e.id)},children:xe.some(a=>a.id===e.id)?"已收藏":"收藏"}),E===e.id&&r.jsxs("div",{className:"absolute bottom-3 left-3 bg-red-600 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[r.jsx("i",{className:"fas fa-check-circle mr-1"}),"已选择"]})]}),r.jsx("div",{className:"p-4 "+(o?"bg-gray-700":"bg-gray-50"),children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"font-medium",children:["AI生成方案 ",e.id]}),r.jsx("button",{onClick:e=>{e.stopPropagation(),pt()},className:"text-sm text-red-600 hover:underline",children:"查看文化元素"})]})}),E===e.id&&r.jsx("span",{className:"absolute top-3 right-3 text-xs px-2 py-1 rounded-full bg-red-600 text-white",children:"已选择"})]},e.id))}),E&&r.jsx("div",{className:"mt-4 text-sm",children:r.jsxs("span",{className:o?"text-gray-300":"text-gray-700",children:["当前已选择：方案 ",E]})}),xe.length>0&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"我的收藏"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:xe.map(e=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e.thumbnail,alt:`收藏 ${e.id}`,className:"w-full h-full object-cover rounded-lg"}),r.jsxs("span",{className:"absolute top-2 left-2 text-xs px-2 py-1 rounded-full "+(o?"bg-gray-800/70 text-gray-200":"bg-white/80 text-gray-700"),children:["方案 ",e.id]})]},e.id))})]}),r.jsxs("div",{className:"mt-6 flex flex-wrap justify-between gap-3",children:[r.jsx("button",{onClick:yt,className:`px-4 py-2 rounded-full transition-colors ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} text-sm flex-1 md:flex-none`,children:"返回"}),r.jsx("button",{onClick:ot,className:`px-4 py-2 rounded-full ${o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors text-sm flex-1 md:flex-none`,children:"AI文化识别"}),r.jsx("button",{onClick:Ya,disabled:O,className:"px-4 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white transition-colors text-sm flex-1 md:flex-none",children:O?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"重新生成"]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-sync-alt mr-1"}),"重新生成"]})}),r.jsxs("button",{onClick:async()=>{if(!E)return void s.error("请先选择一个方案");const e=($||"天津文化设计灵感").trim();re(!0);try{const a=await c.generateImage({prompt:`${e} 的创意变体`,size:"1024x1024",n:1,response_format:"url",watermark:!0}),t=a?.data?.data||[],r=t[0]?.url||(t[0]?.b64_json?`data:image/png;base64,${t[0].b64_json}`:"");r?(I(e=>e.map(e=>e.id===E?{...e,thumbnail:r}:e)),s.success("已生成变体并更新预览")):s.info("未获取到变体图片")}catch{s.error("变体生成失败")}finally{re(!1)}},className:`px-4 py-2 rounded-full ${o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors text-sm flex-1 md:flex-none`,children:[r.jsx("i",{className:"fas fa-clone mr-1"}),"生成变体"]})]})]}),3===z&&r.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"编辑您的设计作品"}),Q&&r.jsxs("div",{className:"mb-6 p-4 rounded-xl "+(o?"bg-gray-700":"bg-gray-50"),children:[r.jsx("h3",{className:"font-medium mb-2",children:"AI生成说明"}),r.jsx("div",{className:"text-sm",children:ct(Q)})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:`relative rounded-xl overflow-hidden ${o?"bg-gray-700":"bg-gray-100"} flex items-center justify-center`,role:"button",tabIndex:0,"aria-label":"编辑预览",onClick:()=>{ua("resize")},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),ua("resize"))},children:E?r.jsxs("div",{className:"relative w-full",style:{transform:`scale(${ha})`,filter:Wa},children:[r.jsx(d,{src:_.find(e=>e.id===E)?.thumbnail||"",alt:"选中的设计方案",ratio:"square",rounded:"xl",fit:"contain",onClick:tt,className:"cursor-pointer"}),$a&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("span",{style:{fontSize:`${_a}px`,color:Ea},className:"font-semibold drop-shadow",children:$a})}),Fe&&r.jsxs("div",{className:"absolute inset-x-3 bottom-3 flex flex-wrap gap-2 items-center justify-center",children:[r.jsx("button",{type:"button",onClick:qa,disabled:ie,className:`px-2.5 py-1.5 rounded-md text-xs ${o?"bg-gray-800 hover:bg-gray-700 text-white ring-1 ring-gray-700":"bg-white/90 hover:bg-white text-gray-900 ring-1 ring-gray-200"} ${ie?"opacity-60 cursor-not-allowed":""}`,children:ie?"生成中…":"一键生成(3)"}),r.jsx("button",{type:"button",onClick:tt,className:"px-2.5 py-1.5 rounded-md text-xs "+(o?"bg-gray-800 hover:bg-gray-700 text-white ring-1 ring-gray-700":"bg-white/90 hover:bg-white text-gray-900 ring-1 ring-gray-200"),children:"重新生成"}),r.jsx("button",{type:"button",onClick:it,className:"px-2.5 py-1.5 rounded-md text-xs "+(o?"bg-gray-800 hover:bg-gray-700 text-white ring-1 ring-gray-700":"bg-white/90 hover:bg-white text-gray-900 ring-1 ring-gray-200"),children:"下载图片"}),r.jsx("button",{type:"button",onClick:nt,className:"px-2.5 py-1.5 rounded-md text-xs "+(o?"bg-gray-800 hover:bg-gray-700 text-white ring-1 ring-gray-700":"bg-white/90 hover:bg-white text-gray-900 ring-1 ring-gray-200"),children:"复制链接"}),r.jsx("button",{type:"button",onClick:lt,disabled:he,className:"px-2.5 py-1.5 rounded-md text-xs bg-blue-600 hover:bg-blue-700 text-white "+(he?"opacity-60 cursor-not-allowed":""),children:"生成视频"})]})]}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"absolute inset-0 grid grid-cols-1 md:grid-cols-3 gap-3 p-3",children:_.slice(0,3).map(e=>r.jsxs("button",{type:"button",onClick:()=>{T(e.id),F(3)},className:"relative group",children:[r.jsx("img",{src:e.thumbnail,alt:`AI生成方案 ${e.id}`,className:"w-full h-full object-cover rounded-lg",loading:"lazy",decoding:"async"}),r.jsxs("span",{className:"absolute top-2 right-2 text-xs px-2 py-1 rounded-full "+(o?"bg-gray-800/70 ring-1 ring-gray-700 text-gray-200":"bg-white/80 ring-1 ring-gray-200 text-gray-700"),children:["方案 ",e.id]})]},e.id))})})}),se&&r.jsx("div",{className:"mt-2 text-xs "+(o?"text-gray-400":"text-gray-500"),children:"豆包生成中…"}),E&&_.find(e=>e.id===E)?.video&&(_.find(e=>e.id===E).video.startsWith("http")?r.jsxs("div",{className:(o?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm mt-3",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("a",{href:_.find(e=>e.id===E).video,target:"_blank",rel:"noreferrer",className:"text-blue-600",children:"打开视频"}),r.jsx("button",{className:"text-xs px-2 py-1 rounded "+(o?"bg-gray-600 text-white":"bg-white ring-1 ring-gray-200"),onClick:async()=>{try{await navigator.clipboard.writeText(_.find(e=>e.id===E).video),s.success("链接已复制")}catch{s.error("复制失败")}},children:"复制链接"})]}),r.jsx("video",{controls:!0,src:`/api/proxy/video?url=${encodeURIComponent(_.find(e=>e.id===E).video)}`,className:"w-full mt-2 rounded"})]}):r.jsx("div",{className:(o?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm mt-3 break-all",children:_.find(e=>e.id===E).video})),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[r.jsx("button",{type:"button",onClick:qa,disabled:ie,className:"flex-1 px-3 py-1.5 rounded-md text-sm bg-red-600 hover:bg-red-700 text-white transition-colors "+(ie?"opacity-60 cursor-not-allowed":""),children:ie?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"正在生成（三张）"]}):r.jsx(r.Fragment,{children:"一键生成（三张）"})}),r.jsx("button",{type:"button",onClick:it,className:`flex-1 px-3 py-1.5 rounded-md text-sm ${o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors`,children:"下载图片"}),r.jsx("button",{type:"button",onClick:nt,className:`flex-1 px-3 py-1.5 rounded-md text-sm ${o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors`,children:"复制链接"}),r.jsx("button",{type:"button",onClick:lt,disabled:he,className:"flex-1 px-3 py-1.5 rounded-md text-sm bg-blue-600 hover:bg-blue-700 text-white transition-colors "+(he?"opacity-60 cursor-not-allowed":""),children:he?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"生成视频中..."]}):r.jsx(r.Fragment,{children:"生成视频"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-medium mb-3 cursor-pointer select-none",role:"button",tabIndex:0,"aria-expanded":!Oa,onClick:()=>Ra(!Oa),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Ra(!Oa))},children:"调整工具"}),!Oa&&r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"调整大小",icon:"arrows-alt"},{name:"滤镜效果",icon:"image"},{name:"色彩调整",icon:"palette"},{name:"添加文字",icon:"font"},{name:"图层管理",icon:"layers"},{name:"撤销/重做",icon:"undo"}].map((e,a)=>r.jsxs("button",{className:`p-2 rounded-lg flex flex-col items-center ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,onClick:()=>{const a={"调整大小":"resize","滤镜效果":"filter","色彩调整":"color","添加文字":"text","图层管理":"layers","撤销/重做":"history"}[e.name]||null;ua(a),"添加文字"!==e.name||$a||Aa("示例文字")},children:[r.jsx("i",{className:`fas fa-${e.icon} mb-1`}),r.jsx("span",{className:"text-xs",children:e.name})]},a))}),"resize"===xa&&r.jsx("div",{className:"mt-4 grid grid-cols-1 gap-3",children:r.jsxs("label",{className:"text-sm",children:["缩放：",ha.toFixed(2),r.jsx("input",{type:"range",min:.5,max:2,step:.01,value:ha,onChange:e=>{ba(Number(e.target.value)),La()},className:"w-full"})]})}),"filter"===xa&&r.jsx("div",{className:"mt-4 grid grid-cols-1 gap-3",children:r.jsxs("label",{className:"text-sm",children:["模糊：",Ca,"px",r.jsx("input",{type:"range",min:0,max:10,step:1,value:Ca,onChange:e=>{Sa(Number(e.target.value)),La()},className:"w-full"})]})}),"color"===xa&&r.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"text-sm",children:["亮度：",ya,"%",r.jsx("input",{type:"range",min:50,max:150,step:1,value:ya,onChange:e=>{pa(Number(e.target.value)),La()},className:"w-full"})]}),r.jsxs("label",{className:"text-sm",children:["对比度：",fa,"%",r.jsx("input",{type:"range",min:50,max:150,step:1,value:fa,onChange:e=>{ja(Number(e.target.value)),La()},className:"w-full"})]}),r.jsxs("label",{className:"text-sm",children:["饱和度：",va,"%",r.jsx("input",{type:"range",min:50,max:150,step:1,value:va,onChange:e=>{Na(Number(e.target.value)),La()},className:"w-full"})]}),r.jsxs("label",{className:"text-sm",children:["色相：",wa,"°",r.jsx("input",{type:"range",min:-180,max:180,step:1,value:wa,onChange:e=>{ka(Number(e.target.value)),La()},className:"w-full"})]})]}),"text"===xa&&r.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[r.jsx("input",{type:"text",value:$a,onChange:e=>{Aa(e.target.value),La()},placeholder:"输入叠加文字",className:(o?"bg-gray-700 text-white":"bg-white")+" px-3 py-2 rounded-md"}),r.jsxs("label",{className:"text-sm",children:["文字大小：",_a,"px",r.jsx("input",{type:"range",min:12,max:64,step:1,value:_a,onChange:e=>{Ia(Number(e.target.value)),La()},className:"w-full"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:"颜色"}),r.jsx("input",{type:"color",value:Ea,onChange:e=>{Ta(e.target.value),La()}})]})]}),"history"===xa&&r.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[r.jsx("button",{className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-1.5 rounded-md text-sm",onClick:()=>{Da(e=>{if(!e.length)return e;const a=e[e.length-1];return Fa(e=>[...e,{scale:ha,brightness:ya,contrast:fa,saturate:va,hueRotate:wa,blur:Ca,overlayText:$a,overlaySize:_a,overlayColor:Ea}]),ba(a.scale),pa(a.brightness),ja(a.contrast),Na(a.saturate),ka(a.hueRotate),Sa(a.blur),Aa(a.overlayText),Ia(a.overlaySize),Ta(a.overlayColor),e.slice(0,-1)})},children:"撤销"}),r.jsx("button",{className:(o?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900")+" px-3 py-1.5 rounded-md text-sm",onClick:()=>{Fa(e=>{if(!e.length)return e;const a=e[e.length-1];return La(),ba(a.scale),pa(a.brightness),ja(a.contrast),Na(a.saturate),ka(a.hueRotate),Sa(a.blur),Aa(a.overlayText),Ia(a.overlaySize),Ta(a.overlayColor),e.slice(0,-1)})},children:"重做"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-medium mb-3",children:"玩法扩展"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsxs("button",{onClick:st,className:(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")+" p-3 rounded-lg text-sm",children:[r.jsx("i",{className:"fas fa-random mr-1"}),"风格重混"]}),r.jsxs("button",{onClick:gt,className:(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")+" p-3 rounded-lg text-sm",children:[r.jsx("i",{className:"fas fa-th-large mr-1"}),"版式生成"]}),r.jsxs("button",{onClick:mt,className:(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")+" p-3 rounded-lg text-sm",children:[r.jsx("i",{className:"fas fa-box-open mr-1"}),"Mockup预览"]}),r.jsxs("button",{onClick:xt,className:(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")+" p-3 rounded-lg text-sm",children:[r.jsx("i",{className:"fas fa-border-all mr-1"}),"图案平铺"]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-medium mb-3",children:"AI共创对话"}),r.jsx(g,{})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-3",children:"传统纹样素材"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-3",children:w.map(e=>r.jsxs(i.div,{className:`rounded-lg overflow-hidden border ${o?"border-gray-700":"border-gray-200"} cursor-pointer`,whileHover:{scale:1.05},onClick:pt,children:[r.jsx(d,{src:e.thumbnail,alt:e.name,ratio:"square",rounded:"lg"}),r.jsx("div",{className:"p-2 text-xs text-center "+(o?"bg-gray-700":"bg-gray-50"),children:e.name})]},e.id))})]}),r.jsxs("div",{className:"mt-8 flex justify-between",children:[r.jsx("button",{onClick:yt,className:"px-5 py-2.5 rounded-full transition-colors "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:"返回"}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:dt,className:"px-5 py-2.5 rounded-full transition-colors "+(o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:"保存草稿"}),r.jsx("button",{onClick:ut,className:"px-5 py-2.5 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",children:"发布作品"})]})]})]})]})]})]}),P&&r.jsx(m,{isOpen:P,onClose:()=>J(!1)}),K&&r.jsx(x,{children:r.jsx(u,{workId:"123",onClose:()=>H(!1)})}),V&&r.jsx(h,{isOpen:V,onClose:()=>B(!1)}),Y&&"pending"!==Y.status&&r.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center ${o?"bg-gray-900 bg-opacity-80":"bg-gray-50 bg-opacity-80"} backdrop-blur-sm`,children:r.jsxs(i.div,{className:`rounded-2xl ${o?"bg-gray-800":"bg-white"} shadow-xl max-w-2xl w-full mx-4`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:`p-6 border-b ${o?"border-gray-700":"border-gray-200"} flex justify-between items-center`,children:[r.jsx("h3",{className:"text-xl font-bold",children:"AI内容预审"}),r.jsx("button",{onClick:()=>q(null),className:`p-2 rounded-full ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,"aria-label":"关闭",children:r.jsx("i",{className:"fas fa-times"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3 "+("passed"===Y.status?"bg-green-100 text-green-600":"warning"===Y.status?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"),children:"passed"===Y.status?r.jsx("i",{className:"fas fa-check"}):"warning"===Y.status?r.jsx("i",{className:"fas fa-exclamation-triangle"}):r.jsx("i",{className:"fas fa-times"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-lg",children:"passed"===Y.status?"预审通过":"warning"===Y.status?"预审有警告":"预审未通过"}),r.jsx("p",{className:"text-sm "+(o?"text-gray-400":"text-gray-600"),children:"passed"===Y.status?"您的作品符合平台规范，可以发布。":"warning"===Y.status?"您的作品存在一些潜在问题，建议进行调整。":"您的作品存在不符合平台规范的内容，请修改后重新提交。"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h5",{className:"font-medium mb-3",children:"预审详情"}),r.jsx("div",{className:"space-y-3",children:Y.issues.map((e,a)=>r.jsx("div",{className:"p-3 rounded-lg "+("error"===e.severity?o?"bg-red-900 bg-opacity-30":"bg-red-50":o?"bg-yellow-900 bg-opacity-30":"bg-yellow-50"),children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("i",{className:`fas ${"error"===e.severity?"fa-times-circle":"fa-exclamation-circle"} mr-2 mt-0.5 text-${"error"===e.severity?"red-500":"yellow-500"}`}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"content"===e.type?"内容合规性":"版权问题"}),r.jsx("p",{className:"text-sm mt-1",children:e.message})]})]})},a))})]}),r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("input",{type:"checkbox",id:"enable-precheck",checked:W,onChange:e=>G(e.target.checked),className:"mr-2 rounded text-red-600 focus:ring-red-500"}),r.jsx("label",{htmlFor:"enable-precheck",className:"text-sm",children:"启用AI内容预审（建议开启，帮助确保作品合规）"})]})]}),r.jsxs("div",{className:`p-6 border-t ${o?"border-gray-700":"border-gray-200"} flex justify-end space-x-3`,children:["warning"===Y.status&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>q(null),className:`px-4 py-2 rounded-lg ${o?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:"返回修改"}),r.jsx("button",{onClick:()=>{"warning"===Y?.status&&bt()},className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"确认发布"})]}),"passed"===Y.status&&r.jsx("button",{onClick:bt,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"继续发布"}),"failed"===Y.status&&r.jsx("button",{onClick:()=>q(null),className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors",children:"返回修改"})]})]})}),r.jsx("footer",{className:"border-t border-gray-200 bg-white py-6 px-4 z-10 relative",children:r.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row justify-between items-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"© 2025 AI共创平台. 保留所有权利"}),r.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[r.jsx("a",{href:"/privacy",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"隐私政策"}),r.jsx("a",{href:"/terms",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"服务条款"}),r.jsx("a",{href:"/help",className:"text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"帮助中心"})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{k as C,p as c,y as d,b as g,j as p};

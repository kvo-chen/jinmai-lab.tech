const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/components-ar-BwyTQuDu.js","chunks/vendor-react-7rlDZYVK.js","chunks/i18n-CPi6PAmy.js","chunks/vendor-other-CRhi5s5X.js","chunks/charts-recharts-D0ssCqK6.js","chunks/three-core-DHZMy_Lk.js","chunks/three-stdlib-C_4-sCbx.js","chunks/components-other-CUE0A1-z.js","chunks/components-analytics-D0Glag6r.js","chunks/components-admin-u5o8ISLL.js","chunks/db-libs-D0Hh-v_I.js","chunks/components-media-BNdY5qC-.js","chunks/components-layout-Bz7ZwRP6.js","chunks/components-core-Ca0f-3GT.js","chunks/components-auxiliary-DpPURHF4.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,i as a,l as r,m as s,t as i,p as l,w as n,g as o,u as d,A as c,R as x,B as m,X as g,Y as h,T as u,L as p,c as y,P as b,a as f,C as v}from"./vendor-react-7rlDZYVK.js";import{u as j,A as N}from"./components-analytics-D0Glag6r.js";import{A as w,a as k}from"./components-admin-u5o8ISLL.js";import{d as C,P as S,a as _,l as E,I as $,i as A,j as I,S as O,G as T,k as D,f as R,m as P,n as z,F,M as L,c as M,U,o as q,B,p as H,q as G,r as K,t as J,u as V,v as Y,w as W}from"./components-other-CUE0A1-z.js";import{m as Z,s as X}from"./components-layout-Bz7ZwRP6.js";import{t as Q,c as ee,z as te}from"./vendor-other-CRhi5s5X.js";import{p as ae,_ as re}from"./pages-community-KHLignuk.js";import{L as se}from"./components-media-BNdY5qC-.js";import{c as ie,p as le,d as ne,g as oe}from"./pages-create-CGx67Z2-.js";import{V as de}from"./components-virtual-map-CYXcpMR-.js";import{C as ce,a as xe,b as me,c as ge,d as he,e as ue,f as pe,g as ye,h as be,i as fe}from"./components-game-D5a9jAIU.js";const ve=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black text-white",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"津脉智坊"}),e.jsx("p",{className:"mb-8 text-gray-300",children:"连接传统与未来的数字共创生态"}),e.jsx("a",{href:"/",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full transition-all duration-300",children:"立即探索平台"})]})}),je=async function(e){return new Promise(e=>{setTimeout(()=>{e("语音已转换为文本")},1200)})},Ne=async function(e,t){const a={text:e,voice:t?.voice,speed:t?.speed,pitch:t?.pitch,format:t?.format||"mp3"};try{const e=await C.post("/api/volc/tts/synthesize",a,{timeoutMs:2e4,retries:0});if(!e.ok)throw new Error(e.error||"TTS_FAILED");const t=e.data?.audio_base64||"";if(!t)throw new Error("NO_AUDIO");const r=e.data?.content_type||"audio/mpeg";return{audioUrl:`data:${r};base64,${t}`,contentType:r}}catch(r){throw r}};function we(){const{isDark:l}=j();t.useContext(w);const n=a(),{t:o}=r(),[d,c]=t.useState(!1),[x,m]=t.useState(!1);t.useEffect(()=>{if("undefined"==typeof window)return;m(!0);const e=()=>{c(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const g=t.useCallback(()=>{window.location.href="/landing.html"},[]),[h,u]=t.useState(""),[p,y]=t.useState(!1),[b]=t.useState([]),[f]=t.useState(""),[v]=t.useState(!1),[N,k]=t.useState([]),[C,$]=t.useState(""),[A,I]=t.useState(!1),[O,T]=t.useState(""),D=t.useRef(null),R=t.useRef(null),P=t.useRef(null),z=t.useRef(null),F=t.useRef(null),L=()=>{const e=h.trim();return e?p?`${e} 灵感加持`:e:(i.warning("请输入关键词"),null)},M=t.useCallback(()=>{const e=L();e&&n(`/neo?from=home&query=${encodeURIComponent(e)}`)},[n]),U=t.useCallback(()=>{const e=L();e&&n(`/tools?from=home&query=${encodeURIComponent(e)}`)},[n]);t.useEffect(()=>{if("undefined"!=typeof localStorage)try{const e=localStorage.getItem("inspireOn");e&&y("true"===e)}catch{}},[]);const[q,B]=t.useState([]),H=e=>{B(t=>{const a=t.includes(e),r=a?t.filter(t=>t!==e):[...t,e];return u(t=>a?((e,t)=>e.replace(new RegExp(t,"g"),"").replace(/\s+/g," ").trim())(t,e):((e,t)=>e.includes(t)?e:e?`${e} ${t}`:t)(t,e)),r})},[G,K]=t.useState("A");t.useEffect(()=>{if("undefined"!=typeof localStorage)try{const e=localStorage.getItem("heroVariant");if("A"===e||"B"===e)K(e);else{const e=Math.random()>.5?"A":"B";K(e),localStorage.setItem("heroVariant",e)}}catch{K("A")}},[]),t.useEffect(()=>{if("undefined"!=typeof localStorage)try{localStorage.setItem("heroVariant",G)}catch{}},[G]);const J=t.useMemo(()=>Z.slice(0,12).filter(e=>e.id<=12),[]),V=t.useMemo(()=>Array.from(Z.filter(e=>e.id<=12).reduce((e,t)=>{const a=e.get(t.creator)||{name:t.creator,avatar:t.creatorAvatar,likes:0,works:[]};return a.likes+=t.likes,a.works.push(t),e.set(t.creator,a),e},new Map).values()).sort((e,t)=>t.likes-e.likes).slice(0,6),[]),Y=t.useMemo(()=>[...Z].filter(e=>e.id<=8).sort((e,t)=>t.id-e.id),[]),W=t.useMemo(()=>{const e=Z.filter(e=>e.id<=12).flatMap(e=>e.tags).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return Object.entries(e).sort(([,e],[,t])=>t-e).slice(0,20).map(([e])=>e)},[]),X=t.useMemo(()=>["国潮风格的品牌包装如何设计","杨柳青年画如何现代化表达","非遗元素适合哪些商业场景","天津传统色彩的应用指南","品牌与老字号共创的最佳实践"],[]);t.useEffect(()=>{const e=setTimeout(()=>{},800);return()=>clearTimeout(e)},[]);const Q=({className:t})=>e.jsx("div",{className:`w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse ${t}`});return e.jsxs("section",{className:`relative w-full pt-12 px-4 md:px-6 pb-20 ${l?"bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-b from-gray-50 via-white to-gray-50"} animate-fade-in`,children:[e.jsx(t.Suspense,{fallback:e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsx(Q,{className:"h-12 md:h-16 mb-4"}),e.jsx(Q,{className:"h-4 md:h-6 mb-8"}),e.jsx("div",{className:"h-64 rounded-3xl bg-gray-200 dark:bg-gray-700 animate-pulse"})]}),children:e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight leading-tight mb-4 text-center drop-shadow-md animate-gradient-text "+(l?"text-white":"text-black"),children:o("common.welcome")}),e.jsx("p",{className:`text-sm sm:text-base md:text-lg leading-relaxed opacity-90 max-w-2xl text-center mx-auto ${l?"text-gray-200":"text-gray-600"} mb-8`,children:o(x?"A"===G?"home.exploreTianjinCulture":"home.aiPoweredCreativity":"home.exploreTianjinCulture")}),e.jsxs("div",{className:`rounded-3xl shadow-lg ring-1 ${l?"bg-gray-800/80 backdrop-blur-sm ring-gray-700 hover:shadow-xl":"bg-white/80 backdrop-blur-sm ring-gray-200 hover:shadow-xl"} p-4 md:p-6 transition-all duration-300`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 space-y-4 md:space-y-0",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx(S,{value:h,onChange:u,isDark:l,placeholder:"输入创作提示词..."})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 w-full sm:w-auto",children:[e.jsxs("button",{onClick:M,className:`px-5 py-3.5 rounded-xl text-sm sm:text-base font-semibold ${l?"bg-gray-700 hover:bg-gray-600 text-white shadow-lg shadow-gray-500/30":"bg-white hover:bg-gray-50 text-gray-900 shadow-lg shadow-gray-200"} ring-2 ${l?"ring-gray-600 hover:ring-primary":"ring-gray-300 hover:ring-primary"} transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-xl hover:-translate-y-0.5 flex-1 sm:flex-none`,children:[e.jsx("i",{className:"fas fa-bolt transition-transform duration-300 hover:scale-110"}),o("home.inspire")]}),e.jsxs("button",{onClick:U,className:`px-5 py-3.5 rounded-xl text-sm sm:text-base font-semibold ${l?"bg-primary hover:bg-primary/90 text-white shadow-xl shadow-primary/30":"bg-black hover:bg-gray-800 text-white shadow-xl shadow-black/20"} ring-2 ${l?"ring-primary/50 hover:ring-primary":"ring-black/50 hover:ring-black"} transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-2xl hover:-translate-y-0.5 flex-1 sm:flex-none`,children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles transition-transform duration-300 hover:scale-110"}),o("home.generate")]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 w-full mt-3",children:[e.jsxs("button",{onClick:async()=>{const e=L();if(e){I(!0),T(""),$("");try{E.setCurrentModel("kimi"),E.updateConfig({stream:!1,system_prompt:"你是资深创作优化助手，请针对用户的创作问题进行结构化诊断与优化。输出格式包含：\n1) 问题诊断\n2) 优化方向\n3) 落地步骤\n4) 参考素材/风格\n语言简洁、可执行。"});const t=E.diagnoseCreationIssues(e);k(t);const a=await E.generateResponse(`${e}（请输出结构化的优化说明与下一步行动）`);a&&!/接口不可用|未返回内容/.test(a)&&$(a);const r=await E.generateResponse(`请将以下创作问题提炼为可直接用于AI生成的中文提示词（不超过60字，包含核心意象与风格约束），只输出提示词本句，不要额外说明：\n${e}`),s=(r.split(/\r?\n/).find(e=>e.trim())||r).replace(/^"|"$/g,"").replace(/^“|”$/g,"").replace(/^【|】$/g,"").replace(/^提示词[:：]\s*/,"").trim();s&&!/接口不可用|未返回内容/.test(s)&&(u(s),i.success("已生成优化提示词，并填入输入框")),i.success(`发现${t.length}条优化建议`)}finally{I(!1)}}},disabled:A,className:`px-5 py-3.5 rounded-xl text-sm sm:text-base font-semibold ${l?"bg-gray-700 hover:bg-gray-600 text-white shadow-lg shadow-gray-500/30":"bg-white hover:bg-gray-50 text-gray-900 shadow-lg shadow-gray-200"} ring-2 ${l?"ring-gray-600 hover:ring-primary":"ring-gray-300 hover:ring-primary"} transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-xl hover:-translate-y-0.5 ${A?"opacity-60 cursor-not-allowed hover:shadow-none hover:-translate-y-0":""} flex-1 sm:flex-none`,children:[e.jsx("i",{className:"fas fa-adjust transition-transform duration-300 hover:scale-110"}),o(A?"home.optimizing":"home.optimize")]}),e.jsxs("button",{onClick:()=>{const e=!p;if(y(e),"undefined"!=typeof localStorage)try{localStorage.setItem("inspireOn",String(e))}catch{}i.info(e?"灵感加持已开启":"灵感加持已关闭")},className:`px-5 py-3.5 rounded-xl text-sm sm:text-base font-semibold ${p?"bg-primary text-white shadow-xl shadow-primary/30":l?"bg-gray-700 hover:bg-gray-600 text-white shadow-lg shadow-gray-500/30":"bg-white hover:bg-gray-50 text-gray-900 shadow-lg shadow-gray-200"} ring-2 ${p?"ring-primary hover:ring-primary/80":l?"ring-gray-600 hover:ring-primary":"ring-gray-300 hover:ring-primary"} transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-xl hover:-translate-y-0.5 flex-1 sm:flex-none`,children:[o("home.inspirationBoost")," ",o(p?"common.on":"common.off")]})]}),e.jsx("div",{className:"mt-5 flex flex-wrap justify-center gap-3 scroll-mt-24",children:["国潮风格","适用人群","文献灵感","科创思维","地域素材","非遗元素"].map((t,a)=>{const r=q.includes(t),s=l?"bg-primary text-white ring-primary/50 shadow-lg shadow-primary/20":"bg-primary/10 text-primary ring-primary font-medium shadow-md shadow-primary/10",i=l?"bg-gray-800 text-gray-200 ring-gray-700 hover:bg-gray-700 hover:ring-primary/50 font-medium":"bg-white text-gray-800 ring-gray-300 hover:bg-gray-50 hover:ring-primary/50 font-medium";return e.jsx("button",{type:"button","aria-pressed":r,onClick:()=>H(t),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),H(t))},className:`ring-2 text-sm px-4 py-2 rounded-xl transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 ${r?s:i}`,children:t},a)})}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full justify-center md:justify-start",children:[e.jsxs("span",{className:`text-sm px-4 py-2.5 rounded-xl ${l?"bg-gradient-to-r from-gray-700 to-gray-800 text-gray-200":"bg-gradient-to-r from-white to-gray-50 text-gray-700"} ring-1 ${l?"ring-gray-600":"ring-gray-200"} shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5`,children:[e.jsx("i",{className:"fas fa-users mr-1.5"})," ",e.jsx("strong",{children:"12,536"})," ",o("common.creators")]}),e.jsxs("span",{className:`text-sm px-4 py-2.5 rounded-xl ${l?"bg-gradient-to-r from-gray-700 to-gray-800 text-gray-200":"bg-gradient-to-r from-white to-gray-50 text-gray-700"} ring-1 ${l?"ring-gray-600":"ring-gray-200"} shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5`,children:[e.jsx("i",{className:"fas fa-image mr-1.5"})," ",e.jsx("strong",{children:"2,148"})," ",o("common.works")]}),e.jsxs("span",{className:`text-sm px-4 py-2.5 rounded-xl ${l?"bg-gradient-to-r from-gray-700 to-gray-800 text-gray-200":"bg-gradient-to-r from-white to-gray-50 text-gray-700"} ring-1 ${l?"ring-gray-600":"ring-gray-200"} shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5`,children:[e.jsx("i",{className:"fas fa-handshake mr-1.5"})," ",e.jsx("strong",{children:"36"})," ",o("common.cooperation")]}),e.jsxs("span",{className:`text-sm px-4 py-2.5 rounded-xl ${l?"bg-gradient-to-r from-primary/20 to-primary/10 text-primary":"bg-gradient-to-r from-primary/5 to-primary/10 text-primary"} ring-1 ${l?"ring-primary/50":"ring-primary/30"} shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5`,children:[e.jsx("i",{className:"fas fa-star mr-1.5 text-yellow-400"})," ",e.jsx("strong",{children:"96%"})," ",o("common.satisfaction")]})]}),e.jsxs("div",{className:"flex flex-row items-center gap-3 w-full",children:[e.jsxs("button",{onClick:U,className:`px-4 py-3 rounded-xl font-semibold ${l?"bg-gradient-to-r from-primary to-primary/90 text-white ring-2 ring-primary/50 shadow-xl shadow-primary/20":"bg-gradient-to-r from-black to-gray-800 text-white ring-2 ring-black/20 shadow-xl shadow-black/10"} transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 flex-1 justify-center text-center text-sm sm:text-base`,children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles mr-1 sm:mr-2"})," ",o("common.startCreating")]}),e.jsxs("button",{onClick:g,className:`px-4 py-3 rounded-xl font-semibold ${l?"bg-gradient-to-r from-gray-700 to-gray-800 text-white ring-2 ring-gray-600 shadow-lg shadow-gray-500/20":"bg-gradient-to-r from-white to-gray-50 text-gray-900 ring-2 ring-gray-300 shadow-lg shadow-gray-200"} transition-all duration-300 hover:shadow-xl hover:-translate-y-1 flex-1 justify-center text-center text-sm sm:text-base`,children:[e.jsx("i",{className:"fas fa-compass mr-1 sm:mr-2"})," ",o("common.browseWorks")]})]})]})]})]})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"max-w-7xl mx-auto mb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Array(5).fill(0).map((t,a)=>e.jsxs("div",{className:`p-4 rounded-xl ${l?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} flex items-center justify-between`,children:[e.jsx(Q,{className:"w-3/4"}),e.jsx(Q,{className:"w-16"})]},a))})}),children:e.jsx("div",{className:"max-w-7xl mx-auto mb-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:X.map((t,a)=>e.jsxs("div",{className:`p-5 rounded-2xl ${l?"bg-gradient-to-r from-gray-800 to-gray-800/90 ring-1 ring-gray-700 hover:ring-primary/50":"bg-gradient-to-r from-white to-gray-50 ring-1 ring-gray-200 hover:ring-primary/50"} flex items-center justify-between transition-all duration-300 hover:shadow-lg hover:-translate-y-1 animate-slide-up-${a+1}`,children:[e.jsx("span",{className:(l?"text-gray-100":"text-gray-800")+" text-sm md:text-base font-medium",children:t}),e.jsx("button",{onClick:()=>(e=>{const t={"国潮风格的品牌包装如何设计":{q:"国潮",tags:["礼盒","联名"],tagMode:"OR"},"杨柳青年画如何现代化表达":{q:"杨柳青年画"},"非遗元素适合哪些商业场景":{q:"非遗"},"天津传统色彩的应用指南":{q:"传统色"},"品牌与老字号共创的最佳实践":{q:"品牌",tags:["联名"],tagMode:"OR"}};let a=t[e]||{q:e};if(!t[e]){const t=e,r=[{match:["国潮","国潮风格"],q:"国潮",tags:["联名","礼盒"],tagMode:"OR"},{match:["杨柳青年画","杨柳青"],q:"杨柳青年画"},{match:["非遗"],q:"非遗"},{match:["传统色","传统色彩","中国红"],q:"传统色"},{match:["联名"],q:a.q||"品牌",tags:["联名"],tagMode:"OR"},{match:["礼盒"],q:a.q||"包装",tags:["礼盒"],tagMode:"OR"},{match:["京剧"],q:"京剧",tags:["戏曲"]},{match:["海河"],q:"海河"},{match:["同仁堂"],q:"同仁堂"},{match:["景德镇"],q:"景德镇"}];let s=a.q;const i=[];let l;for(const e of r)e.match.some(e=>t.includes(e))&&(e.q&&(s=e.q),e.tags&&i.push(...e.tags),e.tagMode&&(l=e.tagMode));a={q:s,tags:Array.from(new Set(i)),tagMode:l}}let r=new URLSearchParams;a.q&&r.set("q",a.q),a.tags&&a.tags.length&&r.set("tags",a.tags.join(",")),a.tagMode&&r.set("tagMode",a.tagMode),u(a.q||e),n(`/explore?${r.toString()}`)})(t),className:`px-4 py-2 rounded-xl font-medium text-sm ${l?"bg-primary/10 text-primary hover:bg-primary/20":"bg-primary/5 text-primary hover:bg-primary/10"} transition-all duration-300 hover:shadow-md`,children:e.jsx("i",{className:"fas fa-arrow-right ml-1"})})]},a))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-10 animate-slide-up",children:[b.length>0&&e.jsxs("div",{ref:D,className:`p-4 rounded-xl scroll-mt-24 ${l?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} mb-3 transition-all duration-300 hover:shadow-md`,children:[e.jsx("div",{className:"font-medium mb-2 text-primary",children:"创意方向"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((t,a)=>e.jsx("span",{className:(l?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800")+" text-xs px-3 py-1 rounded-full transition-all duration-200 hover:bg-primary/10",children:t},a))})]}),f&&e.jsxs("div",{ref:R,className:`p-4 rounded-xl scroll-mt-24 ${l?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} mb-3 transition-all duration-300 hover:shadow-md`,children:[e.jsx("div",{className:"font-medium mb-2 text-primary",children:"AI生成"}),e.jsx("div",{className:(l?"text-gray-300":"text-gray-700")+" text-sm whitespace-pre-wrap",children:f}),v&&e.jsx("div",{className:(l?"text-gray-500":"text-gray-400")+" text-xs mt-2",children:"生成中…"})]}),(N.length>0||C||A)&&e.jsxs("div",{ref:P,className:`p-4 rounded-xl scroll-mt-24 ${l?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} transition-all duration-300 hover:shadow-md`,children:[e.jsx("div",{className:"font-medium mb-2 text-primary",children:"优化建议"}),A&&e.jsx("div",{className:`mb-3 p-4 rounded-lg ${l?"bg-gray-700 ring-1 ring-gray-600":"bg-gray-50 ring-1 ring-gray-200"} `,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mr-2"}),e.jsx("div",{className:"text-sm font-semibold text-primary",children:"正在生成优化建议..."})]})}),C&&e.jsxs("div",{className:`mb-3 p-4 rounded-lg ${l?"bg-gray-700 ring-1 ring-gray-600":"bg-gray-50 ring-1 ring-gray-200"} `,children:[e.jsx("div",{className:"text-sm font-semibold mb-2 text-primary",children:"AI优化说明"}),e.jsx("div",{"aria-live":"polite",className:(l?"text-gray-200":"text-gray-800")+" text-sm",children:(t=>{if(!t.trim())return null;const a=t.split(/\r?\n/),r=[];let s=[],i=[];const l=()=>{s.length&&(r.push(e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:s.map((t,a)=>e.jsx("li",{dangerouslySetInnerHTML:{__html:t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}},a))},`ul-${r.length}`)),s=[]),i.length&&(r.push(e.jsx("ol",{className:"list-decimal pl-5 space-y-1",children:i.map((t,a)=>e.jsx("li",{dangerouslySetInnerHTML:{__html:t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}},a))},`ol-${r.length}`)),i=[])};for(const n of a){const t=n.trimEnd();if(t.trim()){if(t.startsWith("###")){l();const a=t.replace(/^###\s*/,"");r.push(e.jsx("h3",{className:"text-base font-semibold mb-2",children:a},`h-${r.length}`));continue}/^\d+\./.test(t)?i.push(t.replace(/^\d+\.\s*/,"")):t.startsWith("- ")?s.push(t.replace(/^-\s*/,"")):(l(),r.push(e.jsx("p",{dangerouslySetInnerHTML:{__html:t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}},`p-${r.length}`)))}}return l(),e.jsx("div",{className:"space-y-2 leading-relaxed",children:r})})(C)})]}),N.length>0&&e.jsx("ul",{className:"list-disc pl-5 text-sm",children:N.map((t,a)=>e.jsx("li",{className:(l?"text-gray-300":"text-gray-700")+" transition-all duration-200 hover:text-primary",children:t},a))}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:async()=>{const e=C.trim()||N.join("；");if(e)try{const t=await Ne(e,{format:"mp3"});T(t.audioUrl)}catch(t){i.error(t?.message||"朗读失败")}else i.warning("暂无建议可朗读")},className:"text-xs px-3 py-1 rounded bg-accent hover:bg-accent/90 text-white transition-all duration-300 hover:shadow-sm",children:"朗读建议"}),e.jsx("button",{onClick:async()=>{const e=C.trim()||N.join("\n");if(e)try{await navigator.clipboard.writeText(e),i.success("建议已复制")}catch{i.error("复制失败")}else i.warning("暂无建议可复制")},className:`text-xs px-3 py-1 rounded ${l?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900 ring-1 ring-gray-300"} transition-all duration-300 hover:shadow-sm`,children:"复制建议"}),e.jsx("button",{onClick:()=>{n(`/create?from=home&query=${encodeURIComponent(C||h)}`)},className:"text-xs px-3 py-1 rounded bg-primary hover:bg-primary/90 text-white transition-all duration-300 hover:shadow-sm",children:"应用到创作中心"})]}),O&&e.jsx("audio",{controls:!0,src:O,className:"mt-2 w-full rounded-lg ring-1 "+(l?"ring-gray-700":"ring-gray-200")})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 animate-slide-up",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:o("home.recommendedForYou")}),e.jsx("button",{onClick:g,className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all duration-300",children:o("home.viewPortfolio")})]}),e.jsx("div",{ref:z,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 scroll-mt-24",children:J.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1*a},whileHover:{y:-5,boxShadow:l?"0 20px 25px -5px rgba(245, 158, 11, 0.2), 0 10px 10px -5px rgba(245, 158, 11, 0.1)":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},className:`rounded-2xl overflow-hidden shadow-md transition-all duration-300 ${l?"bg-gradient-to-b from-gray-800 to-gray-800/90 ring-1 ring-gray-700 hover:ring-primary/50":"bg-gradient-to-b from-white to-gray-50 ring-1 ring-gray-200 hover:ring-primary/50"} cursor-pointer`,role:"button",tabIndex:0,onClick:()=>{n(`/explore?q=${encodeURIComponent(t.title)}`)},onKeyDown:e=>{"Enter"===e.key&&n(`/explore?q=${encodeURIComponent(t.title)}`)},children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-t-2xl group",children:[e.jsx(_,{src:t.thumbnail,alt:t.title,ratio:"landscape",rounded:"2xl",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",disableFallback:!0}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs(s.span,{whileHover:{scale:1.1},className:`absolute top-3 right-3 text-sm px-3 py-1.5 rounded-full backdrop-blur-md ${l?"bg-gray-800/80 ring-1 ring-gray-700 text-gray-200":"bg-white/90 ring-1 ring-gray-200 text-gray-800"} shadow-md transition-all duration-300 hover:shadow-lg`,children:[e.jsx("i",{className:"far fa-heart mr-1"}),t.likes]})]}),e.jsxs("div",{className:`p-5 ${l?"bg-gray-800":"bg-white"} transition-all duration-300`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:`font-semibold text-base md:text-lg transition-all duration-200 hover:text-primary ${l?"text-gray-100":"text-gray-900"} line-clamp-1`,children:t.title}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${l?"bg-primary/20 text-primary":"bg-primary/10 text-primary"} transition-all duration-200 hover:bg-primary/30`,children:t.category})]}),e.jsxs("div",{className:(l?"text-gray-300":"text-gray-600")+" text-sm flex items-center",children:[e.jsx("i",{className:"fas fa-star text-yellow-400 mr-1.5"}),e.jsx("span",{children:"精选创作 · 高质量示例"})]})]})]},t.id))})]}),e.jsxs("div",{ref:F,className:"container mx-auto w-full relative z-10 mb-12 scroll-mt-24",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 animate-slide-up",children:[e.jsxs("h3",{className:"text-2xl font-bold flex items-center bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:[e.jsx("i",{className:"fas fa-landmark text-primary mr-2"}),o("sidebar.tianjinFeatures")]}),e.jsxs("button",{onClick:()=>n("/tianjin"),className:"flex items-center px-4 py-2 rounded-lg text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all duration-300 hover:shadow-md",children:[o("home.viewMore"),e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:`rounded-2xl overflow-hidden shadow-lg border ${l?"border-gray-700 hover:border-primary/50 bg-gradient-to-b from-gray-800 to-gray-800/90":"border-gray-200 hover:border-primary/50 bg-gradient-to-b from-white to-gray-50"} transition-all duration-300 hover:shadow-xl hover:-translate-y-2 cursor-pointer animate-slide-up-1 group`,onClick:()=>n("/tianjin"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n("/tianjin")},children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-t-2xl",children:[e.jsx(_,{src:"https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=1920&h=1080&fit=crop",alt:"天津文化知识库封面",ratio:"landscape",fit:"cover",className:"transition-transform duration-700 group-hover:scale-110",disableFallback:!0}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-5 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 "+(l?"bg-primary/80 text-white":"bg-primary text-white"),children:"文化传承"})})]}),e.jsxs("div",{className:`p-6 ${l?"bg-gray-800":"bg-white"} transition-all duration-300`,children:[e.jsx("h4",{className:"font-bold mb-3 text-lg md:text-xl transition-colors duration-200 hover:text-primary "+(l?"text-gray-100":"text-gray-900"),children:"天津文化知识库"}),e.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"} leading-relaxed`,children:"探索天津独特的历史文化、非遗技艺和地方特色，感受津门文化的深厚底蕴。"}),e.jsxs("div",{className:"mt-4 flex items-center text-primary text-sm font-medium group-hover:translate-x-1 transition-transform duration-300",children:[e.jsx("span",{children:"立即探索"}),e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]}),e.jsxs("div",{className:`rounded-2xl overflow-hidden shadow-lg border ${l?"border-gray-700 hover:border-primary/50 bg-gradient-to-b from-gray-800 to-gray-800/90":"border-gray-200 hover:border-primary/50 bg-gradient-to-b from-white to-gray-50"} transition-all duration-300 hover:shadow-xl hover:-translate-y-2 cursor-pointer animate-slide-up-2 group`,onClick:()=>n("/tianjin"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n("/tianjin")},children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-t-2xl",children:[e.jsx(_,{src:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=1920&h=1080&fit=crop",alt:"津味共创活动封面",ratio:"landscape",fit:"cover",className:"transition-transform duration-700 group-hover:scale-110",disableFallback:!0}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-5 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 "+(l?"bg-primary/80 text-white":"bg-primary text-white"),children:"创作活动"})})]}),e.jsxs("div",{className:`p-6 ${l?"bg-gray-800":"bg-white"} transition-all duration-300`,children:[e.jsx("h4",{className:"font-bold mb-3 text-lg md:text-xl transition-colors duration-200 hover:text-primary "+(l?"text-gray-100":"text-gray-900"),children:"津味共创活动"}),e.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"} leading-relaxed`,children:"参与天津特色主题创作活动，展示津门文化魅力，与创作者们一起交流分享。"}),e.jsxs("div",{className:"mt-4 flex items-center text-primary text-sm font-medium group-hover:translate-x-1 transition-transform duration-300",children:[e.jsx("span",{children:"参与活动"}),e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]}),e.jsxs("div",{className:`rounded-2xl overflow-hidden shadow-lg border ${l?"border-gray-700 hover:border-primary/50 bg-gradient-to-b from-gray-800 to-gray-800/90":"border-gray-200 hover:border-primary/50 bg-gradient-to-b from-white to-gray-50"} transition-all duration-300 hover:shadow-xl hover:-translate-y-2 cursor-pointer animate-slide-up-3 group`,onClick:()=>n("/create"),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n("/create")},children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-t-2xl",children:[e.jsx(_,{src:"https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=1920&h=1080&fit=crop",alt:"方言指令创作封面",ratio:"landscape",fit:"cover",className:"transition-transform duration-700 group-hover:scale-110",disableFallback:!0}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-5 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 "+(l?"bg-primary/80 text-white":"bg-primary text-white"),children:"AI创作"})})]}),e.jsxs("div",{className:`p-6 ${l?"bg-gray-800":"bg-white"} transition-all duration-300`,children:[e.jsx("h4",{className:"font-bold mb-3 text-lg md:text-xl transition-colors duration-200 hover:text-primary "+(l?"text-gray-100":"text-gray-900"),children:"方言指令创作"}),e.jsx("p",{className:`text-sm ${l?"text-gray-300":"text-gray-600"} leading-relaxed`,children:"使用天津方言指令进行AI创作，体验独特的交互方式，生成具有天津特色的创意作品。"}),e.jsxs("div",{className:"mt-4 flex items-center text-primary text-sm font-medium group-hover:translate-x-1 transition-transform duration-300",children:[e.jsx("span",{children:"开始创作"}),e.jsx("i",{className:"fas fa-arrow-right ml-2"})]})]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-16 scroll-mt-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 animate-slide-up",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"热门创作者"}),e.jsx("button",{onClick:g,className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all duration-300 hover:shadow-md",children:"查看全部创作者"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-5",children:V.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4,delay:.08*a},whileHover:{y:-8,boxShadow:l?"0 25px 50px -12px rgba(245, 158, 11, 0.25)":"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},className:`flex flex-col items-center p-5 rounded-2xl ${l?"bg-gradient-to-b from-gray-800 to-gray-800/90 ring-1 ring-gray-700 hover:ring-primary/50":"bg-gradient-to-b from-white to-gray-50 ring-1 ring-gray-200 hover:ring-primary/50"} transition-all duration-300 hover:shadow-xl cursor-pointer group`,role:"button",tabIndex:0,onClick:()=>{n(`/explore?creator=${encodeURIComponent(t.name)}`)},onKeyDown:e=>{"Enter"===e.key&&n(`/explore?creator=${encodeURIComponent(t.name)}`)},children:[e.jsxs("div",{className:"relative w-24 h-24 mb-4 overflow-hidden rounded-full border-4 border-primary/20 group-hover:border-primary transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/50 to-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(s.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:300},children:e.jsx(_,{src:t.avatar,alt:t.name,rounded:"full",className:"w-full h-full object-cover object-center",ratio:"square",fit:"cover",disableFallback:!0})})]}),e.jsx("h3",{className:`font-semibold text-base text-center ${l?"text-gray-100":"text-gray-900"} group-hover:text-primary transition-colors duration-300`,children:t.name}),e.jsxs(s.div,{whileHover:{scale:1.1,translateY:1},className:"flex items-center gap-1 text-sm text-primary mt-2",children:[e.jsx("i",{className:"far fa-heart group-hover:text-red-500 transition-colors duration-300"}),e.jsx("span",{children:t.likes.toLocaleString()})]}),e.jsxs(s.div,{whileHover:{scale:1.1,translateY:1},className:"text-xs mt-1 "+(l?"text-gray-400":"text-gray-500"),children:[t.works.length," 件作品"]})]},a))})]}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-16 scroll-mt-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 animate-slide-up",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"最新作品"}),e.jsx("button",{onClick:g,className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all duration-300 hover:shadow-md",children:"查看全部作品"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5",children:Y.map((t,a)=>e.jsxs(s.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.5,delay:.08*a},whileHover:{y:-5,boxShadow:l?"0 20px 25px -5px rgba(245, 158, 11, 0.2), 0 10px 10px -5px rgba(245, 158, 11, 0.1)":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},className:`rounded-2xl overflow-hidden shadow-lg transition-all duration-300 ${l?"bg-gradient-to-b from-gray-800 to-gray-800/90 ring-1 ring-gray-700 hover:ring-primary/50":"bg-gradient-to-b from-white to-gray-50 ring-1 ring-gray-200 hover:ring-primary/50"} cursor-pointer group`,role:"button",tabIndex:0,onClick:()=>{n(`/explore?q=${encodeURIComponent(t.title)}`)},onKeyDown:e=>{"Enter"===e.key&&n(`/explore?q=${encodeURIComponent(t.title)}`)},children:[e.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-t-2xl",children:[e.jsx(s.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:300},children:e.jsx(_,{src:t.thumbnail,alt:t.title,ratio:"landscape",className:"w-full h-full object-cover",disableFallback:!0})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs(s.span,{whileHover:{scale:1.1},className:`absolute top-3 right-3 text-sm px-3 py-1.5 rounded-full backdrop-blur-md ${l?"bg-gray-800/80 ring-1 ring-gray-700 text-gray-200":"bg-white/90 ring-1 ring-gray-200 text-gray-800"} shadow-md transition-all duration-300 group-hover:shadow-lg`,children:[e.jsx("i",{className:"far fa-heart mr-1 group-hover:text-red-500 transition-colors duration-300"}),t.likes]})]}),e.jsxs("div",{className:`p-5 ${l?"bg-gray-800":"bg-white"} transition-all duration-300`,children:[e.jsx("h3",{className:`font-semibold text-base transition-all duration-200 hover:text-primary ${l?"text-gray-100":"text-gray-900"} line-clamp-1`,children:t.title}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full mt-2 inline-block ${l?"bg-primary/20 text-primary":"bg-primary/10 text-primary"} transition-all duration-300 hover:bg-primary/30`,children:t.category})]})]},t.id))})]}),e.jsxs("div",{className:"max-w-7xl mx-auto mb-16 scroll-mt-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 animate-slide-up",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"热门标签"}),e.jsx("button",{onClick:g,className:"px-3 py-1.5 rounded-lg text-sm font-medium bg-primary/10 text-primary hover:bg-primary/20 transition-all duration-300 hover:shadow-md",children:"查看全部标签"})]}),e.jsx("div",{className:"flex flex-wrap gap-3 p-8 rounded-2xl "+(l?"bg-gradient-to-br from-gray-800 to-gray-800/90 ring-1 ring-gray-700":"bg-gradient-to-br from-white to-gray-50 ring-1 ring-gray-200"),children:W.map((t,a)=>e.jsx("button",{type:"button",className:`px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 hover:shadow-lg hover:-translate-y-1 transform hover:scale-105 ${l?"bg-gray-700 text-gray-200 hover:bg-primary hover:text-white":"bg-gray-100 text-gray-800 hover:bg-primary hover:text-white"} animate-slide-up-${a%6+1}`,onClick:()=>{n(`/explore?tags=${encodeURIComponent(t)}`)},children:t},a))})]})]})}function ke(...e){return Q(ee(e))}function Ce(){const{toggleTheme:r,isDark:n}=j(),{login:o,isAuthenticated:d,quickLogin:c}=t.useContext(w),x=a(),[m,g]=t.useState(""),[h,u]=t.useState(""),[p,y]=t.useState(!1),[b,f]=t.useState({email:"",password:""}),[v,N]=t.useState({email:!1,password:!1});t.useEffect(()=>{d&&x("/dashboard")},[d,x]);const k=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"请输入有效的邮箱地址":"请输入邮箱",C=e=>e?e.length<6?"密码长度不能少于6位":"":"请输入密码",S={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 "+(n?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -right-20 w-96 h-96 bg-red-600 opacity-10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-96 h-96 bg-blue-600 opacity-10 rounded-full blur-3xl"})]}),e.jsxs(s.div,{className:`relative z-10 w-full max-w-md ${n?"bg-gray-800":"bg-white"} rounded-2xl shadow-xl p-8 border ${n?"border-gray-700":"border-gray-100"}`,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"共创"})]}),e.jsx("button",{onClick:r,className:`p-2 rounded-full ${n?"bg-gray-700 text-yellow-400":"bg-gray-100 text-gray-700"} transition-colors`,"aria-label":"切换主题",children:n?e.jsx("i",{className:"fas fa-sun"}):e.jsx("i",{className:"fas fa-moon"})})]}),e.jsx(s.h1,{className:"text-2xl font-bold mb-6",variants:S,children:"欢迎回来"}),e.jsx(s.p,{className:"mb-8 opacity-70",variants:S,children:"登录您的AI共创平台账号，继续您的创作之旅"}),e.jsxs(s.form,{onSubmit:async e=>{e.preventDefault();const t=k(m),a=C(h);if(t||a)return f({email:t,password:a}),void i.error("请检查输入信息");y(!0);try{await o(m,h)?(i.success("登录成功！"),x("/dashboard")):i.error("邮箱或密码错误，请重试")}catch(r){i.error("登录失败，请稍后重试")}finally{y(!1)}},className:"space-y-6",variants:S,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"邮箱"}),b.email&&e.jsx("span",{className:"text-xs text-red-500",children:b.email})]}),e.jsx("input",{type:"email",id:"email",value:m,onChange:e=>{const t=e.target.value;g(t),f(e=>({...e,email:k(t)}))},onFocus:()=>N(e=>({...e,email:!0})),onBlur:()=>N(e=>({...e,email:!1})),className:ke("w-full px-4 py-3 rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",n?`bg-gray-700 border ${b.email||v.email?"border-red-500":"border-gray-600"} text-white placeholder-gray-400`:`bg-gray-50 border ${b.email||v.email?"border-red-500":"border-gray-200"} text-gray-900 placeholder-gray-400`),placeholder:"请输入您的邮箱",autoComplete:"email",inputMode:"email",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"next",required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:"密码"}),e.jsx("a",{href:"#",className:"text-sm text-red-600 hover:text-red-700 transition-colors",children:"忘记密码？"})]}),e.jsx("input",{type:"password",id:"password",value:h,onChange:e=>{const t=e.target.value;u(t),f(e=>({...e,password:C(t)}))},onFocus:()=>N(e=>({...e,password:!0})),onBlur:()=>N(e=>({...e,password:!1})),className:ke("w-full px-4 py-3 rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",n?`bg-gray-700 border ${b.password||v.password?"border-red-500":"border-gray-600"} text-white placeholder-gray-400`:`bg-gray-50 border ${b.password||v.password?"border-red-500":"border-gray-200"} text-gray-900 placeholder-gray-400`),placeholder:"请输入您的密码",autoComplete:"current-password",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"done",required:!0}),b.password&&e.jsx("span",{className:"text-xs text-red-500 mt-1 block",children:b.password})]}),e.jsx(s.button,{type:"submit",disabled:p,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:p?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"登录中..."]}):"登录"})]}),e.jsx(s.div,{className:"mt-8 text-center",variants:S,children:e.jsxs("p",{className:"opacity-70",children:["还没有账号？"," ",e.jsx(l,{to:"/register",className:"text-red-600 hover:text-red-700 font-medium transition-colors",children:"立即注册"})]})}),e.jsxs(s.div,{className:"mt-12",variants:S,children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx("div",{className:"flex-1 h-px "+(n?"bg-gray-700":"bg-gray-200")}),e.jsx("span",{className:"px-4 text-sm opacity-60",children:"或使用以下方式登录"}),e.jsx("div",{className:"flex-1 h-px "+(n?"bg-gray-700":"bg-gray-200")})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{name:"wechat",color:"bg-green-500",icon:"fa-weixin"},{name:"alipay",color:"bg-blue-500",icon:"fa-alipay"},{name:"qq",color:"bg-blue-400",icon:"fa-qq"},{name:"weibo",color:"bg-red-500",icon:"fa-weibo"}].map(t=>e.jsx(s.button,{className:`h-14 sm:h-12 rounded-xl ${t.color} flex items-center justify-center text-white transition-transform min-h-[44px]`,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`使用${t.name}登录`,onClick:async()=>{await c(t.name)&&(i.success("登录成功！"),x("/dashboard"))},children:e.jsx("i",{className:`fab ${t.icon} text-xl`})},t.name))}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:async()=>{await c("phone")&&(i.success("手机号一键登录成功！"),x("/dashboard"))},className:`w-full ${n?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} text-gray-800 font-medium py-3 px-4 rounded-xl transition-colors`,children:"手机号一键登录"})})]})]})]})}const Se=te.object({username:te.string().min(2,{message:"用户名至少需要2个字符"}).max(20,{message:"用户名最多20个字符"}),email:te.string().email({message:"请输入有效的邮箱地址"}),password:te.string().min(8,{message:"密码至少需要8个字符"}).regex(/[a-zA-Z]/,{message:"密码需要包含至少一个字母"}).regex(/[0-9]/,{message:"密码需要包含至少一个数字"}),age:te.string().optional(),tags:te.array(te.string()).optional()});function _e(){const{toggleTheme:r,isDark:n}=j(),{register:o,isAuthenticated:d}=t.useContext(w),c=a(),[x,m]=t.useState(""),[g,h]=t.useState(""),[u,p]=t.useState(""),[y,b]=t.useState({}),[f,v]=t.useState(!1),[N,k]=t.useState(!1),[C,S]=t.useState(""),[_,E]=t.useState(["国潮爱好者"]);d&&c("/dashboard");const I={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 "+(n?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -right-20 w-96 h-96 bg-red-600 opacity-10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-20 -left-20 w-96 h-96 bg-blue-600 opacity-10 rounded-full blur-3xl"})]}),e.jsxs(s.div,{className:`relative z-10 w-full max-w-md ${n?"bg-gray-800":"bg-white"} rounded-2xl shadow-xl p-8 border ${n?"border-gray-700":"border-gray-100"}`,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-600",children:"AI"}),e.jsx("span",{className:"text-xl font-bold",children:"共创"})]}),e.jsx("button",{onClick:r,className:`p-2 rounded-full ${n?"bg-gray-700 text-yellow-400":"bg-gray-100 text-gray-700"} transition-colors`,"aria-label":"切换主题",children:n?e.jsx("i",{className:"fas fa-sun"}):e.jsx("i",{className:"fas fa-moon"})})]}),e.jsx(s.h1,{className:"text-2xl font-bold mb-6",variants:I,children:"创建新账号"}),e.jsx(s.p,{className:"mb-8 opacity-70",variants:I,children:"加入AI共创平台，开启您的创意之旅"}),e.jsxs(s.form,{onSubmit:async e=>{e.preventDefault();try{Se.parse({username:x,email:g,password:u}),b({})}catch(t){if(t instanceof te.ZodError){const e={};t.issues.forEach(t=>{e[t.path[0]]=t.message}),b(e)}return}v(!0);try{const e=await o(x,g,u,C,_);if(e.success)i.success("注册成功！自动登录中..."),c("/dashboard");else{const t=e.error||"注册失败，请检查输入信息或稍后重试";i.error(t)}}catch(a){const e=a.message||"注册失败，请稍后重试";i.error(`注册失败: ${e}`)}finally{v(!1)}},className:"space-y-6",variants:I,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"用户名"}),e.jsx("input",{type:"text",id:"username",value:x,onChange:e=>m(e.target.value),className:ke("w-full px-4 py-3 rounded-xl transition-colors focus:outline-none focus:ring-2",y.username?"border-red-500 focus:ring-red-500":n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border focus:ring-red-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border focus:ring-red-500"),placeholder:"请输入您的用户名",required:!0}),y.username&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.username})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-medium mb-2",children:"年龄"}),e.jsx("input",{type:"number",id:"age",value:C,onChange:e=>S(e.target.value),className:ke("w-full px-4 py-3 rounded-xl transition-colors focus:outline-none focus:ring-2",n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border focus:ring-red-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border focus:ring-red-500"),placeholder:"请输入您的年龄"})]}),e.jsx($,{value:_,onChange:E}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"邮箱"}),e.jsx("input",{type:"email",id:"email",value:g,onChange:e=>h(e.target.value),className:ke("w-full px-4 py-3 rounded-xl transition-colors focus:outline-none focus:ring-2",y.email?"border-red-500 focus:ring-red-500":n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border focus:ring-red-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border focus:ring-red-500"),placeholder:"请输入您的邮箱",required:!0}),y.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"密码"}),e.jsx("input",{type:"password",id:"password",value:u,onChange:e=>p(e.target.value),className:ke("w-full px-4 py-3 rounded-xl transition-colors focus:outline-none focus:ring-2",y.password?"border-red-500 focus:ring-red-500":n?"bg-gray-700 border-gray-600 text-white placeholder-gray-400 border focus:ring-red-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 border focus:ring-red-500"),placeholder:"请设置您的密码",required:!0}),y.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:y.password}),e.jsx("p",{className:"mt-1 text-xs opacity-60",children:"密码至少8个字符，包含至少一个字母和一个数字"})]}),e.jsx(s.button,{type:"submit",disabled:f,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-xl transition-colors flex items-center justify-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:f?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"注册中..."]}):"注册"})]}),e.jsx(s.div,{className:"mt-8 text-center",variants:I,children:e.jsxs("p",{className:"opacity-70",children:["已有账号？"," ",e.jsx(l,{to:"/login",className:"text-red-600 hover:text-red-700 font-medium transition-colors",children:"立即登录"})]})}),e.jsx(s.div,{className:"mt-8 text-center text-xs opacity-60",variants:I,children:'点击"注册"，即表示您同意我们的服务条款和隐私政策'}),e.jsx(A,{open:N,onAccept:()=>k(!1),onClose:()=>k(!1)})]})]})}const Ee=t.createContext({state:{},setState:()=>{},reset:()=>{}}),$e=({children:a})=>{const[r,s]=t.useState({});return e.jsx(Ee.Provider,{value:{state:r,setState:e=>s(t=>({...t,...e})),reset:()=>s({})},children:a})},Ae=t.createContext(void 0),Ie=({children:a})=>{const r=t.useContext(w),s=r?.user,[i,l]=t.useState([]),[n,o]=t.useState([]),[d,c]=t.useState({}),[x,m]=t.useState(!1),[g,h]=t.useState(null);t.useEffect(()=>{let e;return s&&(b("online"),p(),u(),e=f()),()=>{s&&b("offline"),e&&e()}},[s,i]);const u=async()=>{if(!s)return[];m(!0),h(null);try{if(k){let t=[];try{const e=await k.from("friend_requests").select("*").eq("receiver_id",s.id).eq("status","pending").order("created_at",{ascending:!1});if(e.error){if("PGRST205"!==e.error.code)throw e.error;t=[]}else t=e.data}catch(e){if("PGRST205"!==e.code)throw e;t=[]}const a=await Promise.all((t||[]).map(async e=>{let t;try{const{data:a}=await k.from("users").select("*").eq("id",e.sender_id).single();t=a}catch(a){a.code}return{...e,sender:t}}));return o(a),a}return o([]),[]}catch(t){return h("获取好友请求失败"),[]}finally{m(!1)}},p=async()=>{if(!s)return[];m(!0),h(null);try{if(k){let t=[];try{const e=await k.from("friends").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(e.error){if("PGRST205"!==e.error.code)throw e.error;t=[]}else t=e.data}catch(e){if("PGRST205"!==e.code)throw e;t=[]}const a=await Promise.all((t||[]).map(async e=>{let t;try{const{data:a}=await k.from("users").select("*").eq("id",e.friend_id).single();t=a}catch(r){r.code}const a=await y(e.friend_id);return{...e,friend:t?{...t,status:a}:void 0}}));return l(a),a}return l([]),[]}catch(t){return h("获取好友列表失败"),[]}finally{m(!1)}},y=async e=>{if(k){const{data:t,error:a}=await k.from("user_status").select("status").eq("user_id",e).single();return a||!t?"offline":t.status}return"offline"},b=async e=>{if(!s)return!1;try{if(k){const{error:t}=await k.from("user_status").upsert({user_id:s.id,status:e,last_seen:(new Date).toISOString()});if(t){if("PGRST205"===t.code)return!0;throw t}}return!0}catch(t){return!1}},f=()=>{if(k){const e=setInterval(()=>{i.forEach(async e=>{if(e.friend?.id){const t=e.friend.id,a=await y(t);c(e=>({...e,[t]:a}))}})},3e4);return()=>clearInterval(e)}},v={searchUsers:async e=>{if(!e||!s)return[];m(!0),h(null);try{if(k){const{data:t,error:a}=await k.from("users").select("*").ilike("username",`%${e}%`).or(`email.ilike.%${e}%,id.eq.${e}`).neq("id",s.id).limit(20);if(a){if("PGRST205"===a.code)return[];throw a}return await Promise.all((t||[]).map(async e=>{const t=await y(e.id);return{...e,status:t}}))}return[]}catch(t){return h("搜索用户失败"),[]}finally{m(!1)}},sendFriendRequest:async e=>{if(!s)return!1;m(!0),h(null);try{if(k){let a;try{const{data:t}=await k.from("friend_requests").select("*").eq("sender_id",s.id).eq("receiver_id",e).single();a=t}catch(t){if("PGRST205"!==t.code)throw t}if(a)return h("已经发送过好友请求"),!1;const{error:r}=await k.from("friend_requests").insert({sender_id:s.id,receiver_id:e,status:"pending"});if(r){if("PGRST205"===r.code)return!0;throw r}return!0}return!0}catch(a){return h("发送好友请求失败"),!1}finally{m(!1)}},acceptFriendRequest:async e=>{if(!s)return!1;m(!0),h(null);try{if(k){let s;try{const{data:t,error:a}=await k.from("friend_requests").select("*").eq("id",e).single();if(a)throw a;s=t}catch(t){if("PGRST205"===t.code)return o(t=>t.filter(t=>t.id!==e)),p(),!0;throw t}if(!s)return h("好友请求不存在"),!1;try{const{error:t}=await k.from("friend_requests").update({status:"accepted"}).eq("id",e);if(t)throw t}catch(a){if("PGRST205"!==a.code)throw a}try{await k.from("friends").insert([{user_id:s.sender_id,friend_id:s.receiver_id},{user_id:s.receiver_id,friend_id:s.sender_id}])}catch(r){if("PGRST205"!==r.code)throw r}return o(t=>t.filter(t=>t.id!==e)),p(),!0}return o(t=>t.filter(t=>t.id!==e)),!0}catch(i){return h("接受好友请求失败"),!1}finally{m(!1)}},rejectFriendRequest:async e=>{if(!s)return!1;m(!0),h(null);try{if(k){try{const{error:t}=await k.from("friend_requests").update({status:"rejected"}).eq("id",e);if(t&&"PGRST205"!==t.code)throw t}catch(t){if("PGRST205"!==t.code)throw t}return o(t=>t.filter(t=>t.id!==e)),!0}return o(t=>t.filter(t=>t.id!==e)),!0}catch(a){return h("拒绝好友请求失败"),!1}finally{m(!1)}},getFriendRequests:u,friendRequests:n,getFriends:p,friends:i,updateUserStatus:b,friendStatuses:d,deleteFriend:async e=>{if(!s)return!1;m(!0),h(null);try{if(k){try{const{error:t}=await k.from("friends").delete().or(`and(user_id.eq.${s.id},friend_id.eq.${e}),and(user_id.eq.${e},friend_id.eq.${s.id})`);if(t&&"PGRST205"!==t.code)throw t}catch(t){if("PGRST205"!==t.code)throw t}return l(t=>t.filter(t=>t.friend_id!==e)),!0}return l(t=>t.filter(t=>t.friend_id!==e)),!0}catch(a){return h("删除好友失败"),!1}finally{m(!1)}},setFriendNote:async(e,t)=>{if(!s)return!1;m(!0),h(null);try{if(k){try{const{error:a}=await k.from("friends").update({user_note:t}).eq("user_id",s.id).eq("friend_id",e);if(a&&"PGRST205"!==a.code)throw a}catch(a){if("PGRST205"!==a.code)throw a}return l(a=>a.map(a=>a.friend_id===e?{...a,user_note:t}:a)),!0}return l(a=>a.map(a=>a.friend_id===e?{...a,user_note:t}:a)),!0}catch(r){return h("设置好友备注失败"),!1}finally{m(!1)}},loading:x,error:g};return e.jsx(Ae.Provider,{value:v,children:a})},Oe=new class{exportWork(e,t){switch(t.format){case"png":case"jpg":this.exportAsImage(e,t);break;case"svg":this.exportAsSVG(e,t);break;case"pdf":this.exportAsPDF(e,t);break;case"json":this.exportAsJSON(e,t);break;case"markdown":this.exportAsMarkdown(e,t);break;case"text":this.exportAsText(e,t)}}exportAsImage(e,t){e.images.length>0&&this.downloadFile(e.images[0],`${e.title}.${t.format}`)}exportAsSVG(e,t){const a=this.generateSVGContent(e,t);this.downloadFileFromContent(a,`${e.title}.svg`,"image/svg+xml")}exportAsPDF(e,t){const a=this.generatePDFContent(e,t);this.downloadFileFromContent(a,`${e.title}.pdf`,"application/pdf")}exportAsJSON(e,t){const a=this.generateJSONContent(e,t);this.downloadFileFromContent(a,`${e.title}.json`,"application/json")}exportAsMarkdown(e,t){const a=this.generateMarkdownContent(e,t);this.downloadFileFromContent(a,`${e.title}.md`,"text/markdown")}exportAsText(e,t){const a=this.generateTextContent(e,t);this.downloadFileFromContent(a,`${e.title}.txt`,"text/plain")}generateSVGContent(e,t){return`<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">\n  <rect width="800" height="600" fill="#f0f0f0" />\n  <text x="400" y="50" font-size="24" text-anchor="middle" fill="#333">${e.title}</text>\n  <text x="400" y="80" font-size="16" text-anchor="middle" fill="#666">${e.description}</text>\n  \x3c!-- 实际项目中可能会包含更复杂的SVG内容 --\x3e\n</svg>`}generatePDFContent(e,t){return`%PDF-1.4\n%¥±ë\n1 0 obj\n<< /Type /Catalog /Pages 2 0 R >>\nendobj\n2 0 obj\n<< /Type /Pages /Kids [3 0 R] /Count 1 >>\nendobj\n3 0 obj\n<< /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 4 0 R >>\nendobj\n4 0 obj\n<< /Length 500 >>\nstream\nBT\n/F1 24 Tf\n100 700 Td\n(${e.title}) Tj\nET\nBT\n/F1 12 Tf\n100 680 Td\n(${e.description}) Tj\nET\nendstream\nendobj\n5 0 obj\n<< /Type /Font /Subtype /Type1 /Name /F1 /BaseFont /Helvetica >>\nendobj\nxref\n0 6\n0000000000 65535 f \n0000000010 00000 n \n0000000053 00000 n \n0000000095 00000 n \n0000000167 00000 n \n0000000335 00000 n \ntrailer\n<< /Size 6 /Root 1 0 R >>\nstartxref\n410\n%%EOF`}generateJSONContent(e,t){return JSON.stringify(e,null,2)}generateMarkdownContent(e,t){let a=`# ${e.title}\n\n`;return a+=`## 描述\n\n${e.description}\n\n`,a+="## 基本信息\n\n",a+=`- **分类**: ${e.category}\n`,a+=`- **标签**: ${e.tags.join(", ")}\n`,a+=`- **创作日期**: ${e.date}\n`,a+=`- **作者**: ${e.author}\n`,a+=`- **点赞数**: ${e.likes}\n`,a+=`- **浏览量**: ${e.views}\n\n`,t.includeCulturalElements&&e.culturalElements.length>0&&(a+=`## 文化元素\n\n${e.culturalElements.map(e=>`- ${e}`).join("\n")}\n\n`),t.includeColorScheme&&e.colorScheme.length>0&&(a+=`## 配色方案\n\n${e.colorScheme.map(e=>`- ${e}`).join("\n")}\n\n`),t.includeToolsUsed&&e.toolsUsed.length>0&&(a+=`## 使用工具\n\n${e.toolsUsed.map(e=>`- ${e}`).join("\n")}\n\n`),t.includeComments&&e.comments&&e.comments.length>0&&(a+="## 评论\n\n",e.comments.forEach(e=>{a+=`### ${e.author} (${e.date})\n\n${e.content}\n\n`})),e.images.length>0&&(a+="## 作品图片\n\n",e.images.forEach((e,t)=>{a+=`![作品图片${t+1}](${e})\n\n`})),a}generateTextContent(e,t){let a=`${e.title}\n\n`;return a+=`${e.description}\n\n`,a+="基本信息:\n",a+=`- 分类: ${e.category}\n`,a+=`- 标签: ${e.tags.join(", ")}\n`,a+=`- 创作日期: ${e.date}\n`,a+=`- 作者: ${e.author}\n`,a+=`- 点赞数: ${e.likes}\n`,a+=`- 浏览量: ${e.views}\n\n`,t.includeCulturalElements&&e.culturalElements.length>0&&(a+=`文化元素:\n${e.culturalElements.map(e=>`- ${e}`).join("\n")}\n\n`),t.includeColorScheme&&e.colorScheme.length>0&&(a+=`配色方案:\n${e.colorScheme.map(e=>`- ${e}`).join("\n")}\n\n`),t.includeToolsUsed&&e.toolsUsed.length>0&&(a+=`使用工具:\n${e.toolsUsed.map(e=>`- ${e}`).join("\n")}\n\n`),e.images.length>0&&(a+=`作品图片:\n${e.images.join("\n")}\n`),a}downloadFile(e,t){const a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}downloadFileFromContent(e,t,a){const r=new Blob([e],{type:a}),s=URL.createObjectURL(r);this.downloadFile(s,t),URL.revokeObjectURL(s)}batchExport(e,t){e.forEach((a,r)=>{const s={...t,resolution:t.resolution||"medium"};this.exportWork(a,s),r<e.length-1&&setTimeout(()=>{},500)})}getSupportedFormats(){return["png","jpg","svg","pdf","json","markdown","text"]}getFormatMimeType(e){return{png:"image/png",jpg:"image/jpeg",svg:"image/svg+xml",pdf:"application/pdf",json:"application/json",markdown:"text/markdown",text:"text/plain"}[e]}},Te=t.lazy(()=>re(()=>import("./components-ar-BwyTQuDu.js"),__vite__mapDeps([0,1,2,3,4,5,6])));class De extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}resetError=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onRetry()};render(){return this.state.hasError?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",children:e.jsxs("div",{className:"text-white text-center p-6 bg-red-900 bg-opacity-70 rounded-lg max-w-md",children:[e.jsx("div",{className:"text-5xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-2xl font-bold mb-3",children:"AR预览加载失败"}),e.jsx("p",{className:"mb-4",children:this.state.error?this.state.error.message:"请检查网络连接或稍后重试"}),e.jsx("div",{className:"flex justify-center gap-3",children:e.jsx("button",{onClick:this.resetError,className:"px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg transition-colors font-medium",children:"重试"})}),!1]})}):this.props.children}}const Re=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),i=a(),{id:l}=n(),[o,d]=t.useState(!1),[c,x]=t.useState(0),[m,g]=t.useState(!1),[h,u]=t.useState(!1),[p,y]=t.useState(0),[b,f]=t.useState(!1),[v,N]=t.useState({format:"png",resolution:"medium",quality:.8,includeMetadata:!0,includeComments:!1,includeCulturalElements:!1,includeColorScheme:!1,includeToolsUsed:!1}),[w,k]=t.useState(null),[C,S]=t.useState([]);if(t.useEffect(()=>{if(l){const e=Z.find(e=>e.id===parseInt(l));if(k(e),e){const t=ae.getUserBookmarks(),a=ae.getUserLikes();g(t.includes(l)),d(a.includes(l)),x(e.likes);const r=Z.filter(t=>t.category===e.category&&t.id!==parseInt(l)).slice(0,6);S(r)}}},[l]),!w)return e.jsx("div",{className:"min-h-screen "+(r?"bg-gray-900":"bg-gray-100"),children:e.jsx("main",{className:"max-w-7xl mx-auto p-0 py-6",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:e.jsx("i",{className:"far fa-image"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"未找到作品"}),e.jsx("p",{className:r?"text-gray-400":"text-gray-600",children:"请返回探索页选择其他作品"}),e.jsx("button",{className:"mt-6 px-4 py-2 rounded-lg bg-red-600 text-white",onClick:()=>i("/explore"),children:"返回探索"})]})})});const _=(e,t)=>{N(a=>({...a,[e]:t}))};return w?e.jsx("div",{className:"min-h-screen "+(r?"bg-gray-900":"bg-gray-100"),children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"mb-6 flex items-center text-sm",children:[e.jsx("a",{href:"/explore",className:"hover:text-red-600 transition-colors",children:"探索作品"}),e.jsx("i",{className:"fas fa-chevron-right text-xs mx-2 opacity-50"}),e.jsx("span",{className:"opacity-70",children:w.title})]}),e.jsx(s.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{duration:.4},className:"rounded-xl shadow-lg overflow-hidden "+(r?"bg-gray-800":"bg-white"),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-0",children:[e.jsxs("div",{className:"p-6 sm:p-8 order-2 lg:order-1 lg:col-span-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:w.title}),e.jsx("span",{className:"text-sm px-2 py-0.5 rounded-full "+(r?"bg-gray-700":"bg-gray-100"),children:w.category})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(se,{src:w.creatorAvatar,alt:"avatar",className:"w-10 h-10 rounded-full mr-3 object-cover",ratio:"square",fit:"cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.creator}),e.jsx("div",{className:(r?"text-gray-400":"text-gray-500")+" text-sm",children:"创作者"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-heart mr-2 "+(o?"text-red-500":"")}),e.jsx("span",{className:"text-base",children:c})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-comment mr-2"}),e.jsx("span",{className:"text-base",children:w.comments})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-eye mr-2"}),e.jsx("span",{className:"text-base",children:w.views})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"font-semibold mb-2",children:"标签"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.tags.map((t,a)=>e.jsx("span",{className:"text-sm px-2 py-1 rounded-full "+(r?"bg-gray-700":"bg-gray-100"),children:t},a))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>{if(w){const e=w.id.toString();o?(ae.unlikePost(e),x(Math.max(0,c-1))):(ae.likePost(e),x(c+1)),d(!o)}},className:"px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-medium transition-all hover:shadow-md",children:o?"取消点赞":"点赞"}),e.jsx("button",{onClick:()=>{if(w){const e=w.id.toString();m?ae.unbookmarkPost(e):ae.bookmarkPost(e),g(!m)}},className:`px-4 py-2 rounded-lg ${m?"bg-blue-700 text-white":"bg-blue-600 text-white"} text-sm font-medium transition-all hover:shadow-md`,children:m?"已收藏":"收藏"}),e.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 rounded-lg bg-green-600 text-white flex items-center gap-2 text-sm font-medium transition-all hover:shadow-md",children:[e.jsx("i",{className:"fas fa-camera"}),"AR预览"]}),e.jsxs("button",{onClick:()=>f(!0),className:"px-4 py-2 rounded-lg bg-purple-600 text-white flex items-center gap-2 text-sm font-medium transition-all hover:shadow-md",children:[e.jsx("i",{className:"fas fa-download"}),"导出作品"]})]})]}),e.jsx("div",{className:"order-1 lg:order-2 lg:col-span-3",children:w.videoUrl?e.jsx("video",{src:w.videoUrl,poster:w.thumbnail,controls:!0,className:"w-full h-full min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] object-cover"}):e.jsx(se,{src:w.thumbnail,alt:w.title,className:"w-full h-full min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] object-cover",fit:"cover",priority:!0})})]})}),e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.1},className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"相关作品"}),e.jsx("button",{className:`px-3 py-1.5 rounded-lg text-sm ${r?"bg-gray-800":"bg-white"} shadow`,onClick:()=>i("/explore"),children:"返回探索"})]}),C.length?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5",children:C.map(t=>e.jsxs(s.div,{whileHover:{scale:1.02},className:`rounded-xl overflow-hidden cursor-pointer ${r?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} flex flex-col h-full`,onClick:()=>i(`/explore/${t.id}`),children:[e.jsx(se,{src:t.thumbnail,alt:t.title,className:"w-full h-48 object-cover",fit:"cover"}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx("div",{className:"text-base font-medium line-clamp-2 mb-2",children:t.title}),e.jsx("div",{className:`text-sm ${r?"text-gray-400":"text-gray-500"} mt-auto`,children:t.creator})]})]},t.id))}):e.jsx("div",{className:`p-6 rounded-xl ${r?"bg-gray-800":"bg-white"} shadow`,children:"暂无同类作品"})]}),h&&e.jsx(De,{onRetry:()=>y(e=>e+1),children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-t-transparent border-white rounded-full mx-auto mb-3"}),e.jsx("p",{children:"正在加载AR预览..."}),e.jsx("p",{className:"text-sm opacity-80 mt-2",children:"请稍候..."})]})}),children:e.jsx(Te,{config:{imageUrl:w.thumbnail,type:"2d",scale:5,rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0}},onClose:()=>u(!1)})})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70",children:e.jsxs("div",{className:(r?"bg-gray-800 text-white":"bg-white text-gray-900")+" rounded-xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"导出作品"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"导出格式"}),e.jsxs("select",{value:v.format,onChange:e=>_("format",e.target.value),className:`w-full p-2 rounded-lg ${r?"bg-gray-700 border-gray-600":"bg-gray-100 border-gray-300"} border`,children:[e.jsx("option",{value:"png",children:"PNG"}),e.jsx("option",{value:"jpg",children:"JPG"}),e.jsx("option",{value:"svg",children:"SVG"}),e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"json",children:"JSON"}),e.jsx("option",{value:"markdown",children:"Markdown"}),e.jsx("option",{value:"text",children:"纯文本"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"分辨率"}),e.jsxs("select",{value:v.resolution,onChange:e=>_("resolution",e.target.value),className:`w-full p-2 rounded-lg ${r?"bg-gray-700 border-gray-600":"bg-gray-100 border-gray-300"} border`,children:[e.jsx("option",{value:"low",children:"低"}),e.jsx("option",{value:"medium",children:"中"}),e.jsx("option",{value:"high",children:"高"})]})]}),("jpg"===v.format||"png"===v.format)&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["质量: ",Math.round(100*(v.quality||.8)),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:v.quality,onChange:e=>_("quality",parseFloat(e.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeMetadata",checked:v.includeMetadata,onChange:e=>_("includeMetadata",e.target.checked),className:"mr-2 "+(r?"text-purple-500":"text-purple-600")}),e.jsx("label",{htmlFor:"includeMetadata",className:"text-sm",children:"包含元数据"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCulturalElements",checked:v.includeCulturalElements,onChange:e=>_("includeCulturalElements",e.target.checked),className:"mr-2 "+(r?"text-purple-500":"text-purple-600")}),e.jsx("label",{htmlFor:"includeCulturalElements",className:"text-sm",children:"包含文化元素"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:`px-4 py-2 rounded-lg ${r?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"} transition-colors`,children:"取消"}),e.jsx("button",{onClick:()=>{if(!w)return;const e={id:w.id.toString(),title:w.title,description:w.title,images:[w.thumbnail],category:w.category,tags:w.tags,culturalElements:w.tags.filter(e=>["国潮","传统","非遗","民俗","文化"].some(t=>e.includes(t))),colorScheme:[],toolsUsed:[],date:(new Date).toISOString(),author:w.creator,likes:w.likes,views:w.views,comments:[]};Oe.exportWork(e,v),f(!1)},className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors",children:"导出"})]})]})})]})}):e.jsx("div",{className:"min-h-screen "+(r?"bg-gray-900":"bg-gray-100"),children:e.jsx("main",{className:"max-w-7xl mx-auto p-0 py-0",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:e.jsx("i",{className:"far fa-image"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"未找到作品"}),e.jsx("p",{className:r?"text-gray-400":"text-gray-600",children:"请返回探索页选择其他作品"}),e.jsx("button",{className:"mt-6 px-4 py-2 rounded-lg bg-red-600 text-white",onClick:()=>i("/explore"),children:"返回探索"})]})})})}},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:t}=j();return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"relative container mx-auto px-6 md:px-8 py-12",children:[e.jsx("div",{className:"pointer-events-none absolute -top-10 -left-10 w-64 h-64 bg-gradient-to-br from-blue-500/20 via-red-500/20 to-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-10 -right-10 w-72 h-72 bg-gradient-to-tr from-red-500/15 via-yellow-500/15 to-blue-500/15 blur-3xl rounded-full"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight mb-2",children:"关于津脉智坊"}),e.jsx("div",{className:"w-20 h-1 rounded-full bg-gradient-to-r from-blue-600 via-red-500 to-yellow-500 mx-auto lg:mx-0 mb-4"}),e.jsx("p",{className:(t?"text-gray-400":"text-gray-600")+" max-w-xl mx-auto lg:mx-0",children:"我们致力于用 AI 赋能天津传统文化创新，让津门老字号焕发新生，连接创意与品牌，实现文化与商业的双向奔赴。"})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(_,{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=landscape_16_9&prompt=Warm%20modern%20studio%20illustration%20of%20Tianjin%20cultural%20fusion%20with%20designers%20collaborating",alt:"津门文化与现代设计融合",ratio:"landscape",rounded:"2xl"})})]}),e.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"文化传承",icon:"landmark",desc:"以现代方式演绎传统文化"},{title:"创意共创",icon:"hands-helping",desc:"连接创作者与品牌共同创新"},{title:"低门槛工具",icon:"tools",desc:"人人都能用的 AI 创作工具"},{title:"商业转化",icon:"chart-line",desc:"让好创意走向真实商业场景"}].map((a,r)=>e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*r},whileHover:{y:-3,scale:1.01},children:e.jsx("div",{className:"rounded-2xl p-[1px] bg-gradient-to-br from-blue-500/25 via-red-500/25 to-yellow-500/25",children:e.jsxs("div",{className:(t?"bg-gray-800":"bg-white")+" rounded-2xl p-6 shadow-sm backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-4 "+(t?"bg-gray-700 ring-1 ring-gray-600":"bg-gray-100 ring-1 ring-gray-200"),children:e.jsx("i",{className:`fas fa-${a.icon} text-xl ${t?"text-gray-200":"text-gray-700"}`})}),e.jsx("h3",{className:"font-bold mb-1",children:a.title}),e.jsx("p",{className:(t?"text-gray-400":"text-gray-600")+" text-sm",children:a.desc})]})})},a.title))}),e.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"rounded-2xl p-[1px] bg-gradient-to-br from-blue-500/20 via-red-500/20 to-yellow-500/20",children:e.jsxs("div",{className:(t?"bg-gray-800":"bg-white")+" rounded-2xl p-8 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"我们的使命"}),e.jsxs("ul",{className:`space-y-3 ${t?"text-gray-300":"text-gray-700"} text-sm`,children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check text-green-500 mr-2"})," 推动传统与现代的融合表达"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check text-green-500 mr-2"})," 赋能创作者与品牌的共创"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check text-green-500 mr-2"})," 打造低门槛的 AI 创作工具"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check text-green-500 mr-2"})," 促进优秀创意的商业落地"]})]})]})}),e.jsx("div",{className:"rounded-2xl p-[1px] bg-gradient-to-br from-blue-500/20 via-red-500/20 to-yellow-500/20",children:e.jsxs("div",{className:(t?"bg-gray-800":"bg-white")+" rounded-2xl p-8 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"联系方式"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-envelope mr-2"})," contact@aicreate.com"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-phone mr-2"})," 400-123-4567"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-map-marker-alt mr-2"})," 北京市海淀区中关村大街"]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:`px-4 py-2 rounded-lg ${t?"bg-gray-700 hover:bg-gray-600 text-white":"bg-red-600 hover:bg-red-700 text-white"} transition-colors`,children:"发送邮件"})})]})})]})]}),e.jsx(I,{})]}),e.jsx("footer",{className:`border-t ${t?"border-gray-800 bg-gray-900":"border-gray-200 bg-white"} py-6 px-4 z-10 relative`,children:e.jsxs("div",{className:"container mx-auto flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-sm "+(t?"text-gray-400":"text-gray-600"),children:"© 2025 AI共创平台. 保留所有权利"}),e.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[e.jsx(l,{to:"/privacy",className:(t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900")+" transition-colors",children:"隐私政策"}),e.jsx(l,{to:"/terms",className:(t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900")+" transition-colors",children:"服务条款"}),e.jsx(l,{to:"/help",className:(t?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900")+" transition-colors",children:"帮助中心"})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));class ze{metrics={initialLoadTime:0,timeToInteractive:0,firstContentfulPaint:0,largestContentfulPaint:0,cumulativeLayoutShift:0,totalBlockingTime:0,imageLoadTimes:[],componentRenderTimes:[],memoryUsage:0,fps:0,bundleSize:0,cacheHitRate:0};startTime=0;renderTimes=[];imageLoadStartTimes=new Map;observer=null;startTest(){this.startTime=performance.now(),this.setupPerformanceObservers(),this.startMemoryMonitoring(),this.startFpsMonitoring()}setupPerformanceObservers(){"PerformanceObserver"in window&&(this.observer=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{switch(e.entryType){case"paint":"first-paint"===e.name?this.metrics.initialLoadTime=e.startTime:"first-contentful-paint"===e.name&&(this.metrics.firstContentfulPaint=e.startTime);break;case"largest-contentful-paint":this.metrics.largestContentfulPaint=e.startTime;break;case"layout-shift":const t=e;t.hadRecentInput||(this.metrics.cumulativeLayoutShift+=t.value)}})}),this.observer.observe({entryTypes:["paint","largest-contentful-paint","layout-shift"]}))}startMemoryMonitoring(){"memory"in performance&&setInterval(()=>{this.metrics.memoryUsage=performance.memory.usedJSHeapSize/1024/1024},1e3)}startFpsMonitoring(){let e=0,t=performance.now();const a=()=>{e++;const r=performance.now();r-t>=1e3&&(this.metrics.fps=Math.round(1e3*e/(r-t)),e=0,t=r),requestAnimationFrame(a)};requestAnimationFrame(a)}markComponentRender(e){const t=performance.now()-this.startTime;this.metrics.componentRenderTimes.push(t),"Square"===e&&0===this.metrics.timeToInteractive&&(this.metrics.timeToInteractive=t)}markImageLoadStart(e){this.imageLoadStartTimes.set(e,performance.now())}markImageLoadComplete(e){const t=this.imageLoadStartTimes.get(e);if(t){const a=performance.now()-t;this.metrics.imageLoadTimes.push(a),this.imageLoadStartTimes.delete(e)}}calculateCacheHitRate(e,t){this.metrics.cacheHitRate=t/e*100}getReport(){const e=this.metrics.imageLoadTimes.length>0?this.metrics.imageLoadTimes.reduce((e,t)=>e+t,0)/this.metrics.imageLoadTimes.length:0,t=this.metrics.componentRenderTimes.length>0?this.metrics.componentRenderTimes.reduce((e,t)=>e+t,0)/this.metrics.componentRenderTimes.length:0;return{...this.metrics,imageLoadTimes:[e],componentRenderTimes:[t]}}getSummary(){const e=this.getReport();return`\n性能测试报告:\n================\n初始加载时间: ${e.initialLoadTime.toFixed(2)}ms\n可交互时间: ${e.timeToInteractive.toFixed(2)}ms\n首次内容绘制: ${e.firstContentfulPaint.toFixed(2)}ms\n最大内容绘制: ${e.largestContentfulPaint.toFixed(2)}ms\n累计布局偏移: ${e.cumulativeLayoutShift.toFixed(4)}\n平均图片加载时间: ${e.imageLoadTimes[0]?.toFixed(2)||0}ms\n平均组件渲染时间: ${e.componentRenderTimes[0]?.toFixed(2)||0}ms\n内存使用: ${e.memoryUsage.toFixed(2)}MB\nFPS: ${e.fps}\n缓存命中率: ${e.cacheHitRate.toFixed(2)}%\n================\n    `}}const Fe=t.lazy(()=>re(()=>import("./components-other-CUE0A1-z.js").then(e=>e.Z),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10,11,12,13,14]))),Le=t.lazy(()=>re(()=>import("./components-other-CUE0A1-z.js").then(e=>e.z),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10,11,12,13,14]))),Me=[{id:"seed-1",title:"国潮插画设计",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Chinese%20traditional%20cultural%20illustration%20design&image_size=1024x1024",likes:324,comments:[],date:"2025-11-01",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-2",title:"麻花赛博朋克",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Tianjin%20mahua%20cyberpunk&image_size=1024x1024",likes:512,comments:[],date:"2025-11-02",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-3",title:"杨柳青年画海报",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Yangliuqing%20New%20Year%20poster%2C%20vibrant%20colors&image_size=1024x1024",likes:338,comments:[],date:"2025-11-03",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-4",title:"桂发祥联名插画海报",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Guifaxiang%20collab%20illustration%20poster%2C%20oriental%20style&image_size=1024x1024",likes:256,comments:[],date:"2025-11-03",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-5",title:"同仁堂品牌视觉年鉴",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Tongrentang%20brand%20yearbook%2C%20red%20and%20gold&image_size=1024x1024",likes:264,comments:[],date:"2025-11-04",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]}],Ue=[{id:"seed-6",title:"京剧舞台视觉系统",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Peking%20opera%20stage%20visual%20system&image_size=1024x1024",likes:231,comments:[],date:"2025-11-04",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-7",title:"景德镇文创器皿插画",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Jingdezhen%20cultural%20ware%20illustration%2C%20blue%20and%20white&image_size=1024x1024",likes:242,comments:[],date:"2025-11-05",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-8",title:"海河导视与标识",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Haihe%20wayfinding%20and%20signage%2C%20blue%20accent&image_size=1024x1024",likes:244,comments:[],date:"2025-11-05",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-9",title:"东方美学字体集",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Oriental%20aesthetic%20typeface%20specimen&image_size=1024x1024",likes:382,comments:[],date:"2025-11-06",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-10",title:"狗不理联名海报",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Goubuli%20brand%20collab%20poster%2C%20bold%20graphics&image_size=1024x1024",likes:198,comments:[],date:"2025-11-06",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-11",title:"耳朵眼品牌IP形象",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Erduoyan%20brand%20mascot%20illustration%2C%20cute&image_size=1024x1024",likes:312,comments:[],date:"2025-11-07",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]},{id:"seed-12",title:"果仁张秋季礼盒",thumbnail:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Guorenzhang%20autumn%20gift%20box%20packaging&image_size=1024x1024",likes:224,comments:[],date:"2025-11-07",category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]}],qe=Z.map(e=>({id:`ex-${e.id}`,title:e.title,thumbnail:e.thumbnail,likes:e.likes,comments:[],date:(new Date).toISOString().slice(0,10),category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]})),Be=[...qe,...[2,3].flatMap(e=>Z.slice(0,20).map(t=>{const a=t.thumbnail;return{id:`ex${e}-${t.id}`,title:`${t.title}·${e}期`,thumbnail:a,likes:Math.max(0,t.likes+10*e-20),comments:[],date:(new Date).toISOString().slice(0,10),category:"design",tags:[],description:"",views:0,shares:0,isFeatured:!1,isDraft:!1,completionStatus:"completed",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]}}))],He=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),i=n(),l=a(),[o,d]=t.useState([]),[c,x]=t.useState(!1),[m]=t.useState(null),g=t.useRef(null);t.useEffect(()=>{g.current||(g.current=new ze,g.current.startTest(),setTimeout(()=>{g.current?.markComponentRender("Square")},100));const e=e=>{e.detail&&e.detail.url&&g.current?.markImageLoadStart(e.detail.url)},t=e=>{e.detail&&e.detail.url&&g.current?.markImageLoadComplete(e.detail.url)};return window.addEventListener("performance:imageLoadStart",e),window.addEventListener("performance:imageLoaded",t),()=>{window.removeEventListener("performance:imageLoadStart",e),window.removeEventListener("performance:imageLoaded",t)}},[]);const h=["国潮设计","非遗传承","品牌联名","校园活动","文旅推广"],u="jmzf_tag_clicks",p="jmzf_tags_cache",[y,b]=t.useState(()=>{try{const e=localStorage.getItem(u);return e?JSON.parse(e):{}}catch{return{}}}),[f,v]=t.useState(h),[N,w]=t.useState({}),[k,S]=t.useState(!1),[E,$]=t.useState(null),A=(e,t)=>{const a=new Map(e.map((e,t)=>[e,t]));return e.slice().sort((e,r)=>{const s=t[e]||0,i=t[r]||0;return s>0&&i>0?i-s:s>0?-1:i>0?1:a.get(e)-a.get(r)})},I=async()=>{try{const e=localStorage.getItem(p);if(e){const{data:t,timestamp:a}=JSON.parse(e);if(Date.now()-a<3e5)return v(A(t.tags,y)),void w(t.meta)}}catch{}S(!0),$(null);try{const e=await C.get("/api/community/tags");if(e.ok&&Array.isArray(e.data?.data)){const t=e.data.data,a=t.map(e=>String(e.name||"")),r=t.reduce((e,t)=>(e[t.name]={weight:t.weight,group:t.group,desc:t.desc},e),{});localStorage.setItem(p,JSON.stringify({data:{tags:a,meta:r},timestamp:Date.now()})),v(A(a,y)),w(r)}else v(h),$(e.error||"加载失败")}catch(e){v(h),$(e?.message||"网络错误")}finally{S(!1)}};t.useEffect(()=>{I()},[y]);const D=e=>{const t={...y,[e]:(y[e]||0)+1};b(t);try{localStorage.setItem(u,JSON.stringify(t))}catch{}v(A(h,t))},R=t.useMemo(()=>new Set(f),[f]),P=[{name:"国潮共创组",members:128,path:"/community?group=guochao"},{name:"非遗研究社",members:96,path:"/community?group=heritage"},{name:"品牌联名工坊",members:73,path:"/community?group=brand"}],z="jmzf_featured_cache",[F,L]=t.useState(P),[M,U]=t.useState(!1),[q,B]=t.useState(null),[H,G]=t.useState("all"),[K,J]=t.useState("全部"),[V,Y]=t.useState("全部"),[W,Z]=t.useState(""),[X,Q]=t.useState(""),[ee,te]=t.useState("hot"),[re,ie]=t.useState(""),[le,ne]=t.useState(!1),[oe,de]=t.useState({}),[ce,xe]=t.useState(1),[me,ge]=t.useState(null),[he,ue]=t.useState(!1),[pe,ye]=t.useState(null),[be]=t.useState(()=>{try{const e=localStorage.getItem("jmzf_favs");return e?JSON.parse(e):[]}catch{return[]}}),[fe,ve]=t.useState(!1),[je,Ne]=t.useState(!0),[we,ke]=t.useState(!0),Ce=t.useRef(null),Se=t.useRef(null),_e=t.useRef(new Map);t.useEffect(()=>{requestAnimationFrame(()=>{ke(!0);const e="initial-posts",t=_e.current.get(e);if(t)return d(t),void ke(!1);const a=[...ae.getPosts(),...Me.slice(0,3)];_e.current.set(e,a),d(a),ke(!1)})},[]);const Ee=async e=>{ue(!0),ye(null);try{await new Promise(e=>setTimeout(e,300));let t=ae.getPosts().find(t=>t.id===e);t||(t=Me.find(t=>t.id===e)||Ue.find(t=>t.id===e)||Be.find(t=>t.id===e)),t?ge(t):ye("未找到该资讯内容")}catch(t){ye("加载资讯详情失败，请稍后重试")}finally{ue(!1)}};t.useEffect(()=>{const e=i.id;e&&Ee(e)},[i.id]),t.useEffect(()=>{if(me){const e=ae.getPosts().find(e=>e.id===me.id);e&&ge(e)}},[o]);const $e=e=>{const t=e.toLowerCase();return/[国潮]/.test(e)?"国潮":t.includes("cyberpunk")||/赛博/.test(e)?"赛博朋克":/复古|vintage/i.test(e)?"复古":/手绘|插画/.test(e)?"手绘插画":/线稿|黑白/.test(e)?"黑白线稿":/景德镇|青花瓷|蓝白/.test(e)?"蓝白瓷":/极简|minimal/i.test(e)?"极简":"国潮"},Ae=e=>/同仁堂|老字号/.test(e)?"老字号":/非遗|技艺/.test(e)?"非遗":/京剧|戏/.test(e)?"京剧":/景德镇|瓷/.test(e)?"景德镇":/高校|社团|校园/.test(e)?"校园社团":"老字号",Ie=t.useMemo(()=>{const e=[...o];return Me.forEach(t=>{e.find(e=>e.id===t.id)||e.push(t)}),Ue.forEach(t=>{e.find(e=>e.id===t.id)||e.push(t)}),e},[o]),Oe=t.useMemo(()=>{let e=[...Ie];if(je){const t=20*ce;Be.slice(0,t).forEach(t=>{e.find(e=>e.id===t.id)||e.push(t)})}const t=re.trim().toLowerCase();let a=e;if(t){const r=/^\s*(style|风格)\s*:\s*(.+)\s*$/.exec(t),s=/^\s*(topic|题材)\s*:\s*(.+)\s*$/.exec(t);a=e.filter(e=>r?$e(e.title).toLowerCase()===r[2].toLowerCase():s?Ae(e.title).toLowerCase()===s[2].toLowerCase():e.title.toLowerCase().includes(t))}const r=a.filter(e=>"style"===H&&"全部"!==K?$e(e.title)===K:"topic"!==H||"全部"===V||Ae(e.title)===V);return[...fe?r.filter(e=>be.includes(e.id)):r].sort((e,t)=>"hot"===ee?(t.likes||0)-(e.likes||0):new Date(t.date).getTime()-new Date(e.date).getTime())},[Ie,ee,re,H,K,V,fe,be,je,ce]),Te=t.useMemo(()=>Oe.slice(0,18*ce),[Oe,ce]);t.useEffect(()=>{const e=Ce.current;if(!e)return;let t=!1;const a=new IntersectionObserver(e=>{const a=e[0];a&&a.isIntersecting&&!t&&Te.length<Oe.length&&(t=!0,requestAnimationFrame(()=>{Te.length<=8&&1===ce?setTimeout(()=>{const e=Ue.slice(0,4);d(t=>[...t,...e]),xe(e=>e+1),t=!1},300):(xe(e=>e+1),setTimeout(()=>{t=!1},500))}))},{root:null,rootMargin:"300px",threshold:.1});return a.observe(e),()=>a.disconnect()},[Ce,Oe,Te.length,ce]);const De=t.useMemo(()=>{const e={};return Te.forEach(t=>{const a=$e(t.title);e[a]=(e[a]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,6)},[Te]),Re=t.useMemo(()=>{const e={};return Te.forEach(t=>{const a=Ae(t.title);e[a]=(e[a]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,6)},[Te]),Pe=t.useMemo(()=>{const e=re.trim().toLowerCase();return e?[...De.map(([e])=>({id:`style-${e}`,text:`风格:${String(e)}`,type:O.CATEGORY})).filter(t=>t.text.toLowerCase().includes(e)),...Re.map(([e])=>({id:`topic-${e}`,text:`题材:${String(e)}`,type:O.TAG})).filter(t=>t.text.toLowerCase().includes(e))].slice(0,8):[]},[re,De,Re]),[He,Ge]=t.useState(!0),[Ke,Je]=t.useState(!1);t.useEffect(()=>{He&&!Ke&&(I(),(async()=>{try{const e=localStorage.getItem(z);if(e){const{data:t,timestamp:a}=JSON.parse(e);if(Date.now()-a<6e5)return void L(t)}}catch{}U(!0),B(null);try{const e=await C.get("/api/community/featured");if(e.ok&&Array.isArray(e.data?.data)){const t=e.data.data.map(e=>({name:String(e.name||""),members:Number(e.members)||0,path:String(e.path||"/community"),official:Boolean(e.official),topic:e.topic?String(e.topic):void 0,tags:Array.isArray(e.tags)?e.tags.map(e=>String(e)):void 0}));localStorage.setItem(z,JSON.stringify({data:t,timestamp:Date.now()})),L(t)}else L(P),B(e.error||"加载失败")}catch(e){L(P),B(e?.message||"网络错误")}finally{U(!1)}})(),Je(!0))},[He,Ke]);const Ve=t.useRef(null),Ye=e=>{const t=(e||"").trim();let a="/community";t&&(a=t.startsWith("/")?t:t.startsWith("?")?`/community${t}`:`/community/${t}`),l(a)},We=()=>{const e=W.trim(),t=X.trim();if(!e)return void alert("请输入标题");const a=t||`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e)}&image_size=1024x1024`;ae.addPost({title:e,thumbnail:a,category:"design",tags:[],description:"",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]}),Z(""),Q("");const r=ae.getPosts();d(r)};return e.jsxs("main",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-6 w-full",children:[e.jsx(T,{title:"共创广场",subtitle:`热榜每周更新 · 当前作品 ${Oe.length} 条 · 收藏 ${be.length} 条`,badgeText:"Beta",theme:"blue",size:"md",showDecor:!1,stats:[{label:"模式",value:"all"===H?"全部":"style"===H?"风格":"题材"},{label:"筛选",value:fe?"收藏":"全部"},{label:"排序",value:"hot"===ee?"热度":"最新"},{label:"联动",value:je?"已导入":"未导入"}]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"px-4 py-2 flex items-center justify-between rounded-lg transition-colors "+(r?"hover:bg-gray-700":"hover:bg-gray-50"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-user-friends "+(r?"text-gray-300":"text-gray-600")}),e.jsx("span",{className:(r?"text-gray-200":"text-gray-700")+" text-sm font-medium",children:"共创社群"})]}),e.jsx("button",{className:"p-2 rounded-lg ring-1 transition duration-200 "+(r?"ring-gray-700/70 hover:bg-gray-700/60":"ring-gray-200/70 hover:bg-white/70"),onClick:()=>Ge(e=>{const t=!e;try{localStorage.setItem("jmzf_community_open",JSON.stringify(t))}catch{}return t}),"aria-expanded":He,"aria-label":"展开/收起社群模块",children:e.jsx("i",{className:`fas ${He?"fa-chevron-up":"fa-chevron-down"} ${r?"text-gray-300":"text-gray-600"}`})})]}),He&&e.jsxs(s.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:(r?"bg-gray-800/60 ring-1 ring-gray-700":"bg-white/60 ring-1 ring-gray-200")+" px-4 pb-3 rounded-xl cursor-pointer",style:{willChange:"transform, opacity"},role:"button",tabIndex:0,"aria-label":"打开社群首页",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Ye("?context=cocreation&tab=joined"))},onClick:e=>{e.target.closest("button, a, input, textarea")||Ye("?context=cocreation&tab=joined")},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-xs opacity-70 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-fire "+(r?"text-orange-400":"text-orange-500")}),e.jsx("span",{children:"热门话题"})]}),e.jsx("button",{onClick:()=>Ye(""),className:"text-[10px] px-2 py-0.5 rounded-full "+(r?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"),"aria-label":"查看全部社群",children:"查看全部"})]}),e.jsxs("div",{ref:Ve,className:"flex gap-1 mb-3 overflow-x-auto scrollbar-hide pb-1",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch"},children:[k&&e.jsx("div",{className:"flex gap-1 w-full",children:[...Array(5)].map((t,a)=>e.jsx("div",{className:"animate-pulse h-6 px-6 rounded-full "+(r?"bg-gray-700":"bg-gray-200")},a))}),!k&&f.map((t,a)=>e.jsxs(s.button,{onClick:()=>{D(t),Ye(`?tag=${encodeURIComponent(t)}`)},"aria-label":`按话题 ${t} 筛选社群`,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),D(t),Ye(`?tag=${encodeURIComponent(t)}`))},whileTap:{scale:.97},transition:{type:"spring",stiffness:400,damping:17},className:"text-[8px] sm:text-xs px-1.25 sm:px-4 py-0.5 sm:py-2 min-h-[18px] sm:min-h-[32px] rounded-full transition-all duration-150 ease-out focus:outline-none focus:ring-2 flex-shrink-0 whitespace-nowrap "+(r?"bg-gray-700 text-gray-200 ring-1 ring-gray-600 hover:bg-gray-600 focus:ring-blue-400":"bg-gray-100 text-gray-700 ring-1 ring-gray-200 hover:bg-gray-200 focus:ring-blue-500"),style:{willChange:"transform"},title:N[t]?.desc||N[t]?.group||"",children:[e.jsx("i",{className:"fas fa-hashtag mr-0.25 sm:mr-1 text-[7px] sm:text-xs"}),t,e.jsx("span",{className:"ml-0.25 sm:ml-1 inline-flex items-center px-0.75 sm:px-2 py-[0.25px] sm:py-0.5 rounded-full text-[7px] sm:text-xs "+(r?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),title:"点击热度",children:"3"}),R.has(t)&&e.jsx("i",{className:`fas fa-fire ml-0.25 sm:ml-1 ${r?"text-orange-400":"text-orange-500"} text-[7px] sm:text-xs`,title:"热度较高"})]},t)),!k&&E&&e.jsx("div",{className:"text-[11px] mt-1 "+(r?"text-gray-400":"text-gray-500"),children:"标签加载失败，已使用默认列表"})]}),e.jsx("style",{children:"\n                .scrollbar-hide {\n                  -ms-overflow-style: none;\n                  scrollbar-width: none;\n                }\n                .scrollbar-hide::-webkit-scrollbar {\n                  display: none;\n                }\n              "}),e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"精选社群"}),e.jsx("div",{className:"sr-only",children:"精选社群列表"}),e.jsxs("ul",{className:`divide-y ${r?"divide-gray-700":"divide-gray-200"} rounded-lg ring-1 ${r?"ring-gray-700":"ring-gray-200"} overflow-hidden`,role:"list",children:[M&&e.jsx("li",{children:e.jsx("div",{className:`px-3 py-2 ${r?"bg-gray-800":"bg-white"} animate-pulse`,children:e.jsx("div",{className:"h-3 w-32 rounded "+(r?"bg-gray-700":"bg-gray-200")})})}),!M&&F.map(t=>e.jsx("li",{role:"listitem",children:e.jsxs(s.button,{onClick:()=>Ye(t.path),"aria-label":`打开社群 ${t.name}`,whileHover:{x:2},transition:{duration:.15,ease:"easeOut"},className:"w-full text-left px-3 py-2 flex items-center justify-between transition-all duration-150 ease-out focus:outline-none focus:ring-2 "+(r?"hover:bg-gray-700 focus:ring-blue-400":"hover:bg-gray-50 focus:ring-blue-500"),style:{willChange:"transform"},tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),Ye(t.path))},children:[e.jsxs("span",{className:"text-xs font-medium flex items-center gap-2",children:[e.jsx("i",{className:`fas fa-users ${r?"text-gray-300":"text-gray-500"} text-[11px]`}),t.name,t.official&&e.jsx("span",{className:"px-1.5 py-[1px] rounded text-[10px] font-medium shadow-sm "+(r?"bg-blue-600 text-white ring-1 ring-blue-500":"bg-blue-500 text-white ring-1 ring-blue-400"),children:"官方"})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-[10px] "+(r?"text-gray-400":"text-gray-500"),children:[t.members," 人"]}),e.jsx("i",{className:"fas fa-chevron-right text-gray-400 text-[10px]"})]})]})},t.name)),!M&&q&&e.jsx("li",{children:e.jsx("div",{className:"px-3 py-2 text-[11px] "+(r?"text-gray-400":"text-gray-500"),children:"社群加载失败，已使用默认列表"})})]}),!M&&q&&e.jsx("div",{className:"text-[11px] mt-1 "+(r?"text-gray-400":"text-gray-500"),children:"精选社群加载失败，已使用默认列表"}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs("button",{onClick:()=>Ye("?context=cocreation&tab=joined"),"aria-label":"进入社群列表",className:"flex-1 px-3 py-1.5 text-xs rounded-lg font-medium shadow-md transition-all duration-200 "+(r?"bg-blue-500 text-white hover:bg-blue-400 active:bg-blue-600":"bg-blue-600 text-white hover:bg-blue-500 active:bg-blue-700"),children:["进入社群",e.jsx("i",{className:"fas fa-arrow-right ml-1 text-[10px]"})]}),e.jsxs("button",{onClick:()=>Ye("?context=cocreation&tab=user"),"aria-label":"创建社群",className:"px-3 py-1.5 text-xs rounded-lg "+(r?"bg-purple-700 text-white hover:bg-purple-600":"bg-purple-600 text-white hover:bg-purple-500"),children:["创建社群",e.jsx("i",{className:"fas fa-plus ml-1 text-[10px]"})]})]}),e.jsx("div",{className:"mt-2 text-[11px] "+(r?"text-gray-400":"text-gray-500"),children:"加入后可参与共创招募、线上活动与资源共享（每周精选推荐）。"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>ve(e=>!e),className:(fe?"bg-blue-600 text-white shadow-md ring-1 ring-blue-500":r?"bg-gray-700 text-white ring-1 ring-gray-600":"bg-gray-100 text-gray-900 ring-1 ring-gray-200")+" px-3 py-1 rounded-full text-sm font-medium transition-all duration-200",children:fe?"仅看收藏":"全部作品"}),e.jsx("button",{onClick:()=>{Ne(!0),alert(`已导入 ${qe.length} 条策展作品`)},disabled:je,className:(je?"bg-gray-400 text-white":"bg-green-600 text-white")+" px-3 py-1 rounded-full text-sm",children:je?"已导入策展":"导入策展作品"})]}),e.jsxs("div",{className:`mb-6 ${r?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-4`,children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-sm opacity-70",children:"社区类型："}),e.jsx("button",{onClick:()=>G("all"),className:("all"===H?"bg-red-600 text-white":r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:"全部"}),e.jsx("button",{onClick:()=>G("style"),className:("style"===H?"bg-red-600 text-white":r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:"风格社区"}),e.jsx("button",{onClick:()=>G("topic"),className:("topic"===H?"bg-red-600 text-white":r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:"题材社区"}),e.jsx("span",{className:"ml-auto text-xs opacity-70",children:"热门风格/题材 · 点击查看"}),e.jsx("a",{href:"/community",className:"text-xs px-3 py-1 rounded-full bg-blue-600 text-white font-medium shadow-sm ring-1 ring-blue-500 hover:bg-blue-500 transition-all duration-200",children:"进入创作者社区（新版）"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[De.map(([t,a])=>e.jsxs("button",{onClick:()=>{G("style"),J(String(t))},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:[t,"（",a,"）"]},t)),Re.map(([t,a])=>e.jsxs("button",{onClick:()=>{G("topic"),Y(String(t))},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:[t,"（",a,"）"]},t))]}),"style"===H&&e.jsx("div",{className:"flex flex-wrap gap-2",children:["全部","国潮","极简","复古","赛博朋克","手绘插画","黑白线稿","蓝白瓷"].map(t=>e.jsx("button",{onClick:()=>J(t),className:(K===t?"bg-red-600 text-white":r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:t},t))}),"topic"===H&&e.jsx("div",{className:"flex flex-wrap gap-2",children:["全部","老字号","非遗","京剧","景德镇","校园社团"].map(t=>e.jsx("button",{onClick:()=>Y(t),className:(V===t?"bg-red-600 text-white":r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-1 rounded-full text-sm",children:t},t))})]}),e.jsxs("div",{className:`mb-6 ${r?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-4`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{value:W,onChange:e=>Z(e.target.value),onKeyDown:e=>{"Enter"===e.key&&We()},className:(r?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" px-3 py-2 rounded-lg border",placeholder:"输入作品标题（如：麻花赛博朋克）"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:X,onChange:e=>Q(e.target.value),className:(r?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full px-3 py-2 rounded-lg border pr-28",placeholder:"封面图片URL（可留空自动生成）"}),e.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex gap-2",children:[e.jsx("button",{onClick:()=>{const e=W.trim()||"创意封面",t=`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e)}&image_size=1024x1024`;Q(t)},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"生成"}),e.jsx("button",{onClick:()=>Se.current?.click(),className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"上传"}),e.jsx("button",{onClick:()=>Q(""),className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"清空"})]}),e.jsx("input",{ref:Se,type:"file",accept:"image/*",className:"hidden",onChange:e=>{const t=e.target.files?.[0];if(!t)return;const a=new FileReader;a.onload=()=>{const e=String(a.result||"");e&&Q(e)},a.readAsDataURL(t),e.target.value=""}})]}),e.jsx("button",{onClick:We,className:"bg-red-600 text-white px-3 py-2 rounded-lg",children:"发布到广场"})]}),X.trim()&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"text-xs opacity-70",children:"封面预览："}),e.jsx(_,{src:X,alt:"封面预览",ratio:"square",rounded:"md",className:"w-16 h-16"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("div",{className:"relative",children:e.jsx(t.Suspense,{fallback:e.jsx("input",{className:(r?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full px-3 py-2 rounded-lg border",placeholder:"加载搜索组件...",disabled:!0}),children:e.jsx(Le,{search:re,setSearch:ie,showSuggest:le,setShowSuggest:ne,suggestions:Pe,isDark:r,onSearch:e=>{ie(e),ne(!1)},onSuggestionSelect:e=>{ie(e.text),ne(!1)}})})}),e.jsxs("select",{value:ee,onChange:e=>te(e.target.value),className:(r?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" px-3 py-2 rounded-lg border",children:[e.jsx("option",{value:"hot",children:"按点赞热度"}),e.jsx("option",{value:"new",children:"按最新时间"})]}),e.jsx("button",{onClick:()=>{const e=location.origin+"/square";navigator.clipboard?.writeText(e),alert("链接已复制，可去小红书/抖音分享")},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-3 py-2 rounded-lg",children:"复制广场链接"})]})]}),we?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[...Array(6)].map((t,a)=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm p-3 animate-pulse",children:[e.jsx("div",{className:"w-full aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg mb-3"}),e.jsx("div",{className:"h-4 sm:h-5 bg-gray-200 dark:bg-gray-700 rounded mb-1"}),e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded mb-1"}),e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 sm:w-20"})]},a))}):e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[...Array(6)].map((t,a)=>e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm p-3 animate-pulse",children:[e.jsx("div",{className:"w-full aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg mb-3"}),e.jsx("div",{className:"h-4 sm:h-5 bg-gray-200 dark:bg-gray-700 rounded mb-1"}),e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded mb-1"}),e.jsx("div",{className:"h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 sm:w-20"})]},a))}),children:e.jsx(Fe,{posts:Te,onPostClick:e=>{Ee(e.id),l(`/square/${e.id}`)},onLike:e=>{ae.likePost(e);const t=ae.getPosts();d(t),me&&me.id===e&&ge(e=>e?{...e,likes:e.likes+1}:null)},onComment:e=>{const t=oe[e];if(!t)return;ae.addComment(e,t),de(t=>({...t,[e]:""}));const a=ae.getPosts();if(d(a),me&&me.id===e){const t=a.find(t=>t.id===e);t&&ge(t)}},isDark:r})}),e.jsx("div",{ref:Ce,className:"w-full h-8"}),Te.length<Oe.length&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("button",{onClick:()=>xe(e=>e+1),className:"px-4 py-2 rounded-lg bg-gray-200",children:"加载更多"})}),(me||he)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:(r?"bg-gray-800 text-white":"bg-white text-gray-900")+" w-full max-w-2xl rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"font-bold text-lg",children:he?"加载中...":me?.title||"资讯详情"}),e.jsx("button",{onClick:()=>{ge(null),ue(!1),ye(null),l("/square")},className:"px-3 py-1 rounded "+(r?"bg-gray-700 text-white":"bg-gray-200 text-gray-900"),children:"关闭"})]}),he?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-sm opacity-70",children:"正在加载资讯详情..."})]}):pe?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl"})}),e.jsx("p",{className:"text-sm text-red-500 mb-4",children:pe}),e.jsx("button",{onClick:()=>me&&Ee(me.id),className:"px-4 py-2 rounded "+(r?"bg-blue-600 text-white":"bg-blue-500 text-white"),children:"重试"})]}):me?e.jsxs(e.Fragment,{children:[e.jsx(se,{src:me.thumbnail,alt:me.title,className:"w-full h-64 object-cover rounded-lg mb-4"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[e.jsxs("span",{children:[e.jsx("i",{className:"far fa-thumbs-up mr-1"}),me.likes]}),e.jsx("span",{children:new Date(me.date).toLocaleString()})]}),e.jsxs("div",{className:"text-sm opacity-80",children:["全部评论（",me.comments.length,"）"]}),e.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto",children:0===me.comments.length?e.jsx("div",{className:"text-sm opacity-60",children:"暂无评论"}):me.comments.map(t=>e.jsxs("div",{className:(r?"border-gray-700":"border-gray-200")+" border-t py-2 text-sm",children:[e.jsx("span",{className:"opacity-60 mr-2",children:new Date(t.date).toLocaleString()}),e.jsx("span",{children:t.content})]},t.id))})]}):null]})}),e.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[e.jsx("button",{onClick:()=>x(!c),className:`p-2 rounded-full shadow-lg transition-all duration-200 ${r?"bg-gray-800 text-gray-200 hover:bg-gray-700":"bg-white text-gray-800 hover:bg-gray-100"} ${c?"ring-2 ring-blue-500":""}`,"aria-label":c?"隐藏性能监控":"显示性能监控",title:"性能监控面板",children:e.jsx("i",{className:`fas ${c?"fa-chart-line":"fa-chart-bar"} text-sm`})}),c&&e.jsxs(s.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2,ease:"easeOut"},className:"mt-2 w-80 rounded-lg shadow-xl overflow-hidden "+(r?"bg-gray-900 text-gray-200":"bg-white text-gray-900"),style:{willChange:"transform, opacity"},children:[e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between "+(r?"bg-gray-800":"bg-gray-100"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-chart-line text-blue-500"}),e.jsx("span",{className:"font-medium text-sm",children:"性能监控"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{g.current},className:"text-xs px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",title:"输出性能报告到控制台",children:"报告"}),e.jsx("button",{onClick:()=>x(!1),className:"text-xs px-2 py-1 rounded bg-gray-600 text-white hover:bg-gray-700",title:"关闭面板",children:"关闭"})]})]}),e.jsx("div",{className:"p-4 max-h-96 overflow-y-auto",children:m?e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"组件挂载"}),e.jsxs("div",{className:"font-mono text-sm",children:[m.componentMountTime.toFixed(1),"ms"]})]}),e.jsxs("div",{className:"p-2 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"图片加载"}),e.jsxs("div",{className:"font-mono text-sm",children:[m.imageLoadTime.toFixed(1),"ms"]})]}),e.jsxs("div",{className:"p-2 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"标签加载"}),e.jsxs("div",{className:"font-mono text-sm",children:[m.tagLoadTime.toFixed(1),"ms"]})]}),e.jsxs("div",{className:"p-2 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"社群加载"}),e.jsxs("div",{className:"font-mono text-sm",children:[m.communityLoadTime.toFixed(1),"ms"]})]})]}),e.jsxs("div",{className:"p-3 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-2",children:"渲染性能"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"渲染次数"}),e.jsx("div",{className:"font-mono text-sm",children:m.renderCount})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"平均时间"}),e.jsxs("div",{className:"font-mono text-sm",children:[m.averageRenderTime.toFixed(1),"ms"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70",children:"帧率"}),e.jsxs("div",{className:"font-mono text-sm "+(m.fps>=55?"text-green-500":m.fps>=30?"text-yellow-500":"text-red-500"),children:[m.fps,"FPS"]})]})]})]}),e.jsxs("div",{className:"p-3 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-2",children:"内存使用"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-600 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300 "+(m.memoryUsage<50?"bg-green-500":m.memoryUsage<100?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(m.memoryUsage/2,100)}%`}})}),e.jsxs("div",{className:"font-mono text-sm",children:[m.memoryUsage.toFixed(1),"MB"]})]})]}),e.jsxs("div",{className:"p-3 rounded "+(r?"bg-gray-800":"bg-gray-50"),children:[e.jsx("div",{className:"text-xs opacity-70 mb-2",children:"性能状态"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full "+(m.fps>=55&&m.memoryUsage<50?"bg-green-500":m.fps>=30&&m.memoryUsage<100?"bg-yellow-500":"bg-red-500")}),e.jsx("span",{className:"text-xs",children:m.fps>=55&&m.memoryUsage<50?"优秀":m.fps>=30&&m.memoryUsage<100?"良好":"需要优化"})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-sm opacity-70",children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-lg mb-2"}),e.jsx("div",{children:"正在收集性能数据..."})]})}),e.jsx("div",{className:"px-4 py-2 text-xs opacity-70 border-t "+(r?"border-gray-700 bg-gray-800":"border-gray-200 bg-gray-100"),children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"实时监控"}),e.jsx("span",{children:"每秒更新"})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"}));function Ge(e){const t=[],a=/([\u4e00-\u9fa5]+)|([a-zA-Z0-9]+)/g;let r;for(;r=a.exec(e);)if(r[1]){const e=r[1];if(1===e.length)t.push(e);else for(let a=0;a<e.length-1;a++)t.push(e.slice(a,a+2))}else r[2]&&t.push(r[2].toLowerCase());return t}function Ke(e,t){const a=function(e,t){const a=Ge(e),r=Ge(t),s={};a.forEach(e=>{s[e]=s[e]||[0,0],s[e][0]+=1}),r.forEach(e=>{s[e]=s[e]||[0,0],s[e][1]+=1});let i=0,l=0,n=0;return Object.values(s).forEach(([e,t])=>{i+=e*t,l+=e*e,n+=t*t}),l&&n?i/(Math.sqrt(l)*Math.sqrt(n)):0}(e,t);let r=Math.round(100*a);if(0===r&&e.trim()&&t.trim()){const a=Array.from(new Set(Ge(e))),s=Array.from(new Set(Ge(t))),i=a.filter(e=>s.includes(e)).length,l=new Set([...a,...s]).size,n=l?i/l:0;r=Math.round(100*n)}r<0&&(r=0),r>100&&(r=100);const s=[];return r<70&&s.push("请加强传统元素表达"),/麻花/.test(t)&&!/褶/.test(e)&&s.push("请加传统褶数"),{score:r,feedback:s}}const Je={},Ve={mahua:"始于清末，以多褶形态与香酥口感著称，传统工艺要求条条分明，不含水分。",baozi:"创始于光绪年间，皮薄馅大、鲜香味美，传承天津传统小吃的经典风味。",niuren:"以细腻彩塑著称，人物生动传神，见证天津手艺与美学传承。",erduoyan:"创建于清光绪年间的耳朵眼炸糕，外酥里糯、香甜不腻，是天津特色小吃代表。",laomeihua:"老美华鞋店始于民国时期，保留传统手工缝制技艺与“舒适耐穿”的品牌口碑。",dafulai:"大福来锅巴菜以糊辣香浓著称，讲究火候与调和，口感层次丰富。",guorenzhang:"果仁张为百年坚果老字号，以糖炒栗子闻名，香甜适口、粒粒饱满。",chatangli:"茶汤李源自清末，茶汤细腻柔滑、甘香回甜，是老天津的温暖记忆。"},Ye=["国潮","杨柳青年画","传统纹样","红蓝配色"],We=e=>{try{localStorage.setItem("NEO_CUSTOM_TAGS",JSON.stringify(e))}catch{}},Ze=e=>{try{localStorage.setItem("NEO_STYLE_PRESETS",JSON.stringify(e))}catch{}},Xe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),r=d(),s=Je?.VITE_API_BASE_URL?.trim()||("undefined"!=typeof window&&/localhost:3000$/.test(window.location.host)?"http://localhost:3001":""),l=e=>{try{const t=new URL(e),a=t.pathname.length>24?t.pathname.slice(0,24)+"…":t.pathname;return`${t.hostname}${a}`}catch{return e.length>64?e.slice(0,64)+"…":e}},[n,o]=t.useState([]),[c,x]=t.useState([]),[m,g]=t.useState({}),[h,u]=t.useState(""),[p,y]=t.useState("all"),[b,f]=t.useState("latest"),[v,N]=t.useState({start:"",end:""}),[w,k]=t.useState({resolution:"",minDuration:"",maxDuration:""}),[C,S]=t.useState([]),[$,A]=t.useState(!1),[I,O]=t.useState("json"),[R,P]=t.useState({format:"png",quality:90,resolution:"original"});t.useState({format:"mp4",quality:"high",resolution:"original"});const[z,F]=t.useState(!1),[L,M]=t.useState([]),[U,q]=t.useState([]),[B,H]=t.useState(!1),[G]=t.useState({enableDesktop:!0,enableSound:!0,showNotifications:!0,maxNotifications:50}),[K,J]=t.useState(0),V=[{id:"welcome",title:"欢迎使用津门·灵感引擎",description:"这是一个强大的AI创作平台，帮助您快速生成津门文化相关的创意内容。",targetSelector:".relative.container",position:"top",nextText:"开始了解"},{id:"brand-selection",title:"选择品牌",description:"从预设品牌中选择一个，或者输入您自己的品牌名称。",targetSelector:'select[name="brand"]',position:"bottom",nextText:"下一步",prevText:"上一步"},{id:"tags",title:"选择标签",description:"选择相关标签，或者添加您自己的自定义标签，帮助AI更好地理解您的需求。",targetSelector:".flex.flex-wrap.gap-2",position:"bottom",nextText:"下一步",prevText:"上一步"},{id:"prompt",title:"输入提示词",description:"输入您的创作需求，AI会根据您的提示生成创意内容。",targetSelector:'textarea[placeholder*="掌柜的"]',position:"bottom",nextText:"下一步",prevText:"上一步"},{id:"generate",title:"生成内容",description:'点击"注入灵感"按钮，AI将开始生成创意内容。',targetSelector:'button:contains("注入灵感")',position:"bottom",nextText:"完成",prevText:"上一步"},{id:"results",title:"查看结果",description:"生成完成后，您可以查看AI生成的创意内容，包括图片、视频和文本。",targetSelector:".grid.grid-cols-1.gap-4",position:"top",nextText:"完成",prevText:"上一步",skipText:"跳过教程"}],[Y,W]=t.useState(!1),[Z,X]=t.useState(0),[Q,ee]=t.useState(!1);t.useEffect(()=>{try{if(!localStorage.getItem("NEO_TUTORIAL_COMPLETED")){const e=setTimeout(()=>{W(!0)},3e3);return()=>clearTimeout(e)}}catch{}},[]),t.useEffect(()=>{try{const e=localStorage.getItem("NEO_VIDEO_HISTORY"),t=e?JSON.parse(e):[];if(Array.isArray(t)){const e=t.map(e=>({...e,isFavorite:e.isFavorite||!1,type:e.type||"video"}));x(e)}}catch{}},[]);const te=(e,t)=>{const a=De[e];if(!a)return;const r=R,s=`neo-image-${e}-${(new Date).getTime()}.${r.format}`;i.info(`图片将以 ${r.format} 格式导出，质量：${r.quality}%，分辨率：${r.resolution}`);const l=document.createElement("a");l.href=a,l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l)},ae=()=>{F(!1)},re=c.filter(e=>{if(!e||!e.url)return!1;const t=""===h||e.url&&e.url.includes(h)||e.width&&e.height&&`${e.width}×${e.height}`.includes(h),a="all"===p||"favorite"===p&&e.isFavorite||"video"===p&&"video"===e.type,r=!v.start||!v.end||(()=>{const t=new Date(e.createdAt||0),a=new Date(v.start),r=new Date(v.end);return r.setHours(23,59,59,999),t>=a&&t<=r})(),s=!w.resolution||`${e.width}×${e.height}`.includes(w.resolution),i=(()=>{const t=e.duration||0,a=w.minDuration?parseFloat(w.minDuration):0,r=w.maxDuration?parseFloat(w.maxDuration):1/0;return t>=a&&t<=r})();return t&&a&&r&&s&&i}).sort((e,t)=>e&&t&&"number"==typeof e.createdAt&&"number"==typeof t.createdAt?"latest"===b?t.createdAt-e.createdAt:e.createdAt-t.createdAt:0),[se,oe]=t.useState({}),[de,ce]=t.useState(null);t.useEffect(()=>{try{const e=localStorage.getItem("NEO_FEEDBACKS"),t=e?JSON.parse(e):{};oe(t)}catch{}},[]);const xe=(e,t,a)=>{const r={rating:t,comment:a};oe(t=>{const a={...t,[e]:r};try{localStorage.setItem("NEO_FEEDBACKS",JSON.stringify(a))}catch{}return a}),ce(null),i.success("反馈已提交，感谢您的参与！")},me=e=>e&&isFinite(e)?`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`:"",ge=(e,t)=>e&&t?`${e}×${t}`:"",he=e=>{if(!e)return"";const t=new Date(e>1e10?e:1e3*e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},[ue,pe]=t.useState("mahua"),[ye,be]=t.useState(Ve.mahua),[fe,ve]=t.useState([]),[je,we]=t.useState((()=>{try{const e=localStorage.getItem("NEO_CUSTOM_TAGS"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch{return[]}})()),[ke,Ce]=t.useState(""),[Se,_e]=t.useState(null),[Ee,$e]=t.useState(""),[Ae,Ie]=t.useState(0),[Oe,Te]=t.useState(!1),[De,Re]=t.useState([]),[Pe,ze]=t.useState(0),[Fe,Le]=t.useState([]),[Me,Ue]=t.useState(""),[qe,Be]=t.useState([]),[He,Ge]=t.useState(!1),[Xe,Qe]=t.useState(!1),[et,tt]=t.useState("idle"),[at,rt]=t.useState(""),[st,it]=t.useState(""),[lt,nt]=t.useState(""),[ot,dt]=t.useState("sdxl"),[ct,xt]=t.useState(""),[mt,gt]=t.useState(!1),[ht,ut]=t.useState([]),[pt,yt]=t.useState(""),[bt,ft]=t.useState(!1),[vt,jt]=t.useState(""),[Nt,wt]=t.useState("creative"),[kt,Ct]=t.useState(""),[St,_t]=t.useState({}),[Et,$t]=t.useState({}),[At,It]=t.useState(null),[Ot,Tt]=t.useState("crop"),[Dt,Rt]=t.useState({x:0,y:0,width:0,height:0}),[Pt,zt]=t.useState(0),[Ft,Lt]=t.useState(1),[Mt,Ut]=t.useState("none"),[qt,Bt]=t.useState([]),[Ht,Gt]=t.useState(""),[Kt,Jt]=t.useState(!1),[Vt,Yt]=t.useState({duration:5,resolution:"720p",cameraFixed:!1}),[Wt,Zt]=t.useState([]),[Xt,Qt]=t.useState(!1),[ea,ta]=t.useState(null),[aa,ra]=t.useState({name:"",description:"",brand:"",tags:[],prompt:"",engine:"sdxl",textStyle:"creative",videoParams:{duration:5,resolution:"720p",cameraFixed:!1}}),sa=t.useRef(null),ia=t.useRef(null),la=()=>{const e=ke.trim();if(e&&!je.includes(e)&&!Ye.includes(e)){const t=[...je,e];we(t),We(t),Ce("")}},na=()=>{if(Se){const e=ke.trim();if(e&&e!==Se){const t=je.map(t=>t===Se?e:t);we(t),We(t),ve(t=>t.map(t=>t===Se?e:t))}_e(null),Ce("")}};t.useEffect(()=>{const e=new URLSearchParams(r.search),t=e.get("query")||"",a=e.get("from")||"";t&&$e(t),"home"===a&&sa.current?.scrollIntoView({behavior:"smooth",block:"start"})},[r.search]),t.useEffect(()=>{Zt((()=>{try{const e=localStorage.getItem("NEO_STYLE_PRESETS"),t=e?JSON.parse(e):[];return Array.isArray(t)?t:[]}catch{return[]}})())},[]),t.useEffect(()=>()=>{ia.current&&clearTimeout(ia.current)},[]);const oa=e=>{e?(ta(e.id),ra({name:e.name,description:e.description||"",brand:e.brand,tags:e.tags,prompt:e.prompt,engine:e.engine,textStyle:e.textStyle,videoParams:e.videoParams})):(ta(null),ra({name:"",description:"",brand:ue,tags:fe,prompt:Ee,engine:ot,textStyle:Nt,videoParams:Vt})),Qt(!0)},da=()=>{Qt(!1),setTimeout(()=>{ta(null),ra({name:"",description:"",brand:"",tags:[],prompt:"",engine:"sdxl",textStyle:"creative",videoParams:{duration:5,resolution:"720p",cameraFixed:!1}})},300)},ca=e=>{pe(e);be(Ve[e]||(e?`为 ${e} 创作的灵感简介，请结合品牌特色与天津文化。`:""))},xa=async()=>{const e=Ee.trim();if(!e)return void i.warning("请输入提示词");Qe(!0),tt("running"),rt(""),it(e);const t=E.getCurrentModel().id,a=E.getConfig().stream;try{const a=await E.ensureAvailableModel(["deepseek","kimi","qwen","wenxinyiyan"]);a!==t&&E.setCurrentModel(a),E.updateConfig({stream:!0});const r=`请将以下提示词优化为更清晰、可直接用于AI绘图的单句提示，包含主体、风格、构图、细节、光影、材质、配色，避免解释：\n${`${e} ${fe.join(" ")} ${ue}`.trim()}`,s=await E.generateResponse(r,{onDelta:e=>rt(e)}),l=(s||e).trim();$e(l),nt(l),tt("done"),s&&!/未配置密钥|返回模拟响应/.test(s)?i.success("已用DeepSeek优化提示词"):i.info("已使用模拟响应优化提示词")}catch(r){i.error(r?.message||"优化失败")}finally{E.setCurrentModel(t),E.updateConfig({stream:a}),Qe(!1)}},ma=e=>{ve(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ga=(e="")=>{const t=`${Ee} ${fe.join(" ")} ${ue} ${e}`.trim()||"Tianjin cultural design";return[`https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=600&h=400&fit=crop&prompt=${encodeURIComponent(t+" variant A")}`,`https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=600&h=400&fit=crop&prompt=${encodeURIComponent(t+" variant B")}`,`https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=600&h=400&fit=crop&prompt=${encodeURIComponent(t+" variant C")}`]},ha=()=>{It(null),Jt(!1),Gt(""),Bt([])},ua=e=>{zt(t=>(t+e)%360)},pa=e=>{Lt(t=>Math.max(.1,Math.min(3,t+e)))},ya=()=>{Te(!0),Re([]),Ie(0),Ue(""),Ge(!0),Ct("正在分析输入...");const e=`${Ee} ${fe.join(" ")} ${ue}`.trim()||"天津文化设计灵感",t=[{status:"正在分析输入...",progress:10},{status:"正在生成创意方向...",progress:30},{status:"正在生成AI文案...",progress:50},{status:"正在生成图片...",progress:70},{status:"正在计算纯正性评分...",progress:90},{status:"生成完成",progress:100}];let a=0;const r=setInterval(()=>{a<t.length&&(Ct(t[a].status),Ie(t[a].progress),a++)},600);try{const t=E.generateCreativeDirections(e);Be(t)}catch{}E.generateResponse(e,{onDelta:e=>Ue(e)}).then(t=>{clearInterval(r),Ie(100),Ct("正在生成图片...");const a=E.getCurrentModel();E.generateImage({prompt:t||e,size:"1024x1024",n:3,response_format:"url",watermark:!0}).then(e=>{const r=(e?.data?.data||[]).map(e=>e?.url?String(e.url):"").filter(e=>!!e);0===r.length?(i.info(`${a.name}未返回图片，已提供占位图`),Re(ga(t)),ut(new Array(3).fill(""))):(Re(r),ut(new Array(r.length).fill("")),i.success(`${a.name}生图完成`)),Ct("")}).catch(r=>{D.logError(r instanceof Error?r:"SERVER_ERROR",{scope:"neo-doubao",prompt:t||e}),i.error(`${a.name}生图失败，已回退为占位图`),Re(ga(t)),ut(new Array(3).fill("")),Ct("")});const s=Ke(t||Ee,ye);ze(s.score),Le(s.feedback)}).catch(()=>{clearInterval(r),Ie(100);const e=ga();Re(e);const t=Ke(Ee,ye);ze(t.score),Le(t.feedback),Ct("")}).finally(()=>{Ge(!1)})},ba=async e=>{const t=De[e]||"",a=t&&t.startsWith("https://")&&(t.includes("volces.com")||t.includes("tos-cn-beijing")),r=(s=ue,`${`${Ee} ${fe.join(" ")} ${s}`.trim()||"Tianjin cultural design"}  --resolution ${Vt.resolution}  --duration ${Vt.duration} --camerafixed ${Vt.cameraFixed}`);var s;const l=`task-${e}-${Date.now()}`;ut(t=>t.map((t,a)=>a===e?"生成中...":t)),_t(e=>({...e,[l]:0})),$t(e=>({...e,[l]:"初始化视频生成任务..."}));const n=setInterval(()=>{_t(e=>{const t=e[l]||0;return t<90?{...e,[l]:t+5}:e})},1e4);try{const s=a?[{type:"text",text:r},{type:"image_url",image_url:{url:t}}]:[{type:"text",text:r}],d=await ie({model:"doubao-seedance-1-0-pro-250528",content:s});if(!d.ok||!d.data?.id){clearInterval(n);const t="CONFIG_MISSING"===d?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":"创建失败";return i.error(t),void ut(t=>t.map((t,a)=>a===e?"视频生成失败":t))}const c=await le(d.data.id,{intervalMs:1e4,timeoutMs:6e5});if(!c.ok){clearInterval(n);const t="CONFIG_MISSING"===c?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":c.error||"查询失败";return i.error(t),void ut(t=>t.map((t,a)=>a===e?"视频生成失败":t))}const m=c.data?.content?.video_url||"",g=c.data?.content?.last_frame_url||"";if("succeeded"===c.data?.status&&m){clearInterval(n),_t(e=>({...e,[l]:100})),$t(e=>({...e,[l]:"视频生成完成"})),i.success("视频生成完成"),ut(t=>t.map((t,a)=>a===e?m:t));const a=c.data?.created_at||c.data?.updated_at||Date.now();o(t=>t.map((t,r)=>r===e?{...t,createdAt:"number"==typeof a?a:Date.now()}:t)),(e=>{const t={...e,isFavorite:!1,type:"video"};x(e=>{const a=[t,...e].slice(0,30);try{localStorage.setItem("NEO_VIDEO_HISTORY",JSON.stringify(a))}catch{}return a})})({url:m,image:t,createdAt:"number"==typeof a?a:Date.now(),thumb:g||void 0}),setTimeout(()=>{_t(e=>{const t={...e};return delete t[l],t}),$t(e=>{const t={...e};return delete t[l],t})},1e3)}else clearInterval(n),i.error("视频生成失败"),ut(t=>t.map((t,a)=>a===e?"视频生成失败":t))}catch(d){clearInterval(n),D.logError(d instanceof Error?d:"SERVER_ERROR",{scope:"neo-video"}),i.error("视频生成异常"),ut(t=>t.map((t,a)=>a===e?"视频生成失败":t))}};return t.useEffect(()=>{ht.forEach((e,t)=>{if(e&&e.startsWith("http")){const a=n[t];if(!a?.sizeBytes){const a=`${s?`${s}`:""}/api/proxy/video/meta?url=${encodeURIComponent(e)}`;fetch(a).then(e=>e.json()).then(e=>{e?.ok&&o(a=>{const r=[...a];return r[t]={...r[t]||{},sizeBytes:Number(e.content_length||0),contentType:String(e.content_type||"")},r})}).catch(()=>{})}}})},[ht,n]),e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"relative container mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-6 sm:py-8 md:py-12",children:[e.jsx("div",{className:"pointer-events-none absolute -top-10 -left-10 w-48 h-48 sm:w-64 sm:h-64 bg-gradient-to-br from-blue-500/20 via-red-500/20 to-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-10 -right-10 w-56 h-56 sm:w-72 sm:h-72 bg-gradient-to-tr from-red-500/15 via-yellow-500/15 to-blue-500/15 blur-3xl rounded-full"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-40",children:[e.jsxs("button",{onClick:()=>H(!B),className:`relative p-2 rounded-full transition-all duration-200 hover:scale-110 ${a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-white hover:bg-gray-100 text-gray-900"} shadow-lg`,"aria-label":"通知",children:[e.jsx("i",{className:"fas fa-bell"}),K>0&&e.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-600 text-white text-xs",children:K>99?"99+":K})]}),B&&e.jsxs("div",{className:`absolute right-0 mt-2 w-80 rounded-2xl shadow-xl ${a?"bg-gray-800":"bg-white"} border ${a?"border-gray-700":"border-gray-200"} p-3 max-h-96 overflow-y-auto transition-all duration-300 transform scale-100 opacity-100`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold",children:"通知中心"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{q(e=>{const t=e.map(e=>({...e,read:!0}));return J(0),t})},className:"text-xs px-2 py-1 rounded text-blue-600 hover:text-blue-700 "+(a?"bg-blue-900 bg-opacity-20 hover:bg-opacity-30":"bg-blue-50 hover:bg-blue-100"),children:"全部标为已读"}),e.jsx("button",{onClick:()=>{q([]),J(0)},className:"text-xs px-2 py-1 rounded text-red-600 hover:text-red-700 "+(a?"bg-red-900 bg-opacity-20 hover:bg-opacity-30":"bg-red-50 hover:bg-red-100"),children:"清空"})]})]}),0===U.length?e.jsxs("div",{className:"text-xs py-6 text-center "+(a?"text-gray-400":"text-gray-500"),children:[e.jsx("i",{className:"fas fa-bell-slash text-2xl mb-2 block"}),"暂无通知"]}):e.jsx("div",{className:"space-y-2",children:U.map(t=>e.jsx("div",{className:"p-3 rounded-lg transition-all duration-200 hover:bg-opacity-80 cursor-pointer "+(a?`bg-gray-700 hover:bg-gray-600 ${!t.read&&"ring-1 ring-blue-500"}`:`bg-gray-50 hover:bg-gray-100 ${!t.read&&"ring-1 ring-blue-500"}`),onClick:()=>{var e;e=t.id,q(t=>{const a=t.map(t=>t.id===e?{...t,read:!0}:t);return J(a.filter(e=>!e.read).length),a}),t.url&&window.open(t.url,"_blank")},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+("success"===t.type?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400":"warning"===t.type?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"error"===t.type?"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-400":"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400"),children:e.jsx("i",{className:"fas fa-"+("success"===t.type?"check-circle":"warning"===t.type?"exclamation-triangle":"error"===t.type?"times-circle":"info-circle")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h4",{className:"text-sm font-medium truncate",children:t.title}),e.jsx("button",{onClick:e=>{var a;e.stopPropagation(),a=t.id,q(e=>{const t=e.filter(e=>e.id!==a);return J(t.filter(e=>!e.read).length),t})},className:"text-xs text-gray-400 hover:text-red-600 transition-colors","aria-label":"删除",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.message}),e.jsx("div",{className:"mt-1 text-xs text-gray-400 dark:text-gray-500",children:new Date(t.timestamp).toLocaleString()})]})]})},t.id))})]})]}),e.jsx(T,{title:"津门 · 灵感引擎",subtitle:"面向传统文化创新的AI创作助手",theme:"red",stats:[{label:"引擎",value:ot},{label:"风格",value:Wt.length.toString()},{label:"模式",value:"普通"},{label:"状态",value:He?"生成中":"就绪"}],pattern:!0,size:"lg"}),e.jsxs("div",{ref:sa,className:`mt-6 rounded-2xl shadow-md ${a?"bg-gray-800/95 backdrop-blur-sm":"bg-white/95 backdrop-blur-sm"} p-4 sm:p-6 mb-6 transition-all duration-300 hover:shadow-lg`,style:{borderRadius:"24px"},children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"津门 · 灵感引擎"}),e.jsx("div",{className:"w-20 h-1 rounded-full bg-gradient-to-r from-blue-600 via-red-500 to-yellow-500 mb-4"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-sm",children:"生成引擎"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>dt("sdxl"),className:"px-3 py-1.5 rounded-full text-sm transition-colors "+("sdxl"===ot?"bg-red-600 hover:bg-red-700 text-white":a?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"SDXL"}),e.jsx("button",{onClick:()=>dt("doubao"),className:"px-3 py-1.5 rounded-full text-sm transition-colors "+("doubao"===ot?"bg-red-600 hover:bg-red-700 text-white":a?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Doubao"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"风格预设"}),e.jsx("button",{onClick:()=>oa(),className:"text-xs px-3 py-2 rounded-md transition-all duration-200 bg-green-600 hover:bg-green-700 text-white active:scale-98",children:"+ 保存当前设置为预设"})]}),Wt.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:Wt.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>(e=>{pe(e.brand),ca(e.brand),ve(e.tags),$e(e.prompt),dt(e.engine),wt(e.textStyle),Yt(e.videoParams),i.success("预设已应用")})(t),className:"text-xs px-3 py-2 rounded-xl border transition-all duration-200 transform hover:scale-105 active:scale-95 "+(a?"border-purple-500 text-purple-400 bg-purple-900 bg-opacity-20 hover:bg-opacity-30":"border-purple-500 text-purple-600 bg-purple-50 hover:bg-purple-100"),style:{minWidth:"80px",textAlign:"center"},title:t.description,children:t.name}),e.jsxs("div",{className:"absolute right-0 -top-1 -translate-x-full group-hover:flex hidden flex-col gap-1 ml-1 bg-white dark:bg-gray-800 p-1 rounded-lg shadow-lg border dark:border-gray-700 z-10",children:[e.jsx("button",{onClick:()=>oa(t),className:"text-xs px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center justify-center",style:{minWidth:"45px"},children:"编辑"}),e.jsx("button",{onClick:()=>(e=>{const t=Wt.filter(t=>t.id!==e);Zt(t),Ze(t),i.success("预设已删除")})(t.id),className:"text-xs px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center",style:{minWidth:"45px"},children:"删除"})]})]},t.id))}):e.jsx("div",{className:`text-xs ${a?"text-gray-400":"text-gray-500"} mb-3`,children:'暂无预设，点击"+ 保存当前设置为预设"创建您的第一个预设'})]}),e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm mb-2 block",children:"选择品牌"}),e.jsxs("select",{value:bt?"custom":ue,onChange:e=>{const t=e.target.value;if("custom"===t){ft(!0);const e=vt.trim();e?ca(e):(pe(""),be("请输入品牌名称进行创作"))}else ft(!1),ca(t)},className:(a?"bg-gray-700/80 border-gray-600 text-white":"bg-white/80 border-gray-300")+" w-full px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300 min-h-[48px] text-sm sm:text-base",children:[e.jsx("option",{value:"mahua",children:"桂发祥十八街麻花"}),e.jsx("option",{value:"baozi",children:"狗不理包子"}),e.jsx("option",{value:"niuren",children:"泥人张彩塑"}),e.jsx("option",{value:"erduoyan",children:"耳朵眼炸糕"}),e.jsx("option",{value:"laomeihua",children:"老美华鞋店"}),e.jsx("option",{value:"dafulai",children:"大福来锅巴菜"}),e.jsx("option",{value:"guorenzhang",children:"果仁张糖炒栗子"}),e.jsx("option",{value:"chatangli",children:"茶汤李茶汤"}),e.jsx("option",{value:"custom",children:"自定义品牌"})]}),bt&&e.jsx("input",{value:vt,onChange:e=>{const t=e.target.value;jt(t),ca(t)},placeholder:"输入品牌名称（支持自定义）",className:(a?"bg-gray-700/80 border-gray-600 text-white":"bg-white/80 border-gray-300 text-gray-900")+" w-full mt-2 px-4 py-3 rounded-xl border focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300 min-h-[48px] text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm mb-2 block",children:"创作标签"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[Ye.map(t=>{const r=fe.includes(t);return e.jsx("button",{onClick:()=>ma(t),className:"text-sm sm:text-xs px-3 py-2 rounded-xl border transition-all duration-200 transform hover:scale-105 active:scale-95 "+(r?a?"border-red-500 text-red-400 bg-red-900 bg-opacity-20 hover:bg-opacity-30":"border-red-500 text-red-600 bg-red-50 hover:bg-red-100":a?"border-gray-600 text-gray-300 hover:border-gray-500 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-100"),style:{minWidth:"65px",textAlign:"center",fontSize:"0.85rem"},children:t},`built-in-${t}`)}),je.map(t=>{const r=fe.includes(t);return e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>ma(t),className:"text-sm sm:text-xs px-3 py-2 rounded-xl border transition-all duration-200 transform hover:scale-105 active:scale-95 "+(r?a?"border-purple-500 text-purple-400 bg-purple-900 bg-opacity-20 hover:bg-opacity-30":"border-purple-500 text-purple-600 bg-purple-50 hover:bg-purple-100":a?"border-gray-600 text-gray-300 hover:border-gray-500 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-100"),style:{minWidth:"65px",textAlign:"center",fontSize:"0.85rem"},children:t}),e.jsxs("div",{className:"absolute right-0 -top-1 -translate-x-full group-hover:flex hidden flex-col gap-1 ml-1 bg-white dark:bg-gray-800 p-1 rounded-lg shadow-lg border dark:border-gray-700 z-10",children:[e.jsx("button",{onClick:()=>{return _e(e=t),void Ce(e);var e},className:"text-xs px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors flex items-center justify-center",style:{minWidth:"45px"},children:"编辑"}),e.jsx("button",{onClick:()=>(e=>{const t=je.filter(t=>t!==e);we(t),We(t),ve(t=>t.filter(t=>t!==e))})(t),className:"text-xs px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center",style:{minWidth:"45px"},children:"删除"})]})]},`custom-${t}`)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:ke,onChange:e=>Ce(e.target.value),onKeyPress:e=>"Enter"===e.key&&(Se?na():la()),placeholder:Se?"编辑标签...":"添加自定义标签...",className:`flex-1 text-sm px-3 py-2 rounded-lg border ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300`}),Se?e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:na,className:"text-xs px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"保存"}),e.jsx("button",{onClick:()=>{_e(null),Ce("")},className:"text-xs px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"取消"})]}):e.jsx("button",{onClick:la,className:"text-xs px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"添加"})]})]})]}),e.jsx("div",{className:"text-sm p-3 rounded-lg mb-4 "+(a?"bg-gray-700 text-gray-300":"bg-gray-50 text-gray-700"),children:ye}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("textarea",{value:Ee,onChange:e=>{const t=e.target.value;$e(t),ia.current&&clearTimeout(ia.current),ia.current=setTimeout(()=>{t.trim()&&!Xe&&t.trim()!==lt.trim()&&xa()},2e3)},onBlur:()=>{Ee.trim()&&!Xe&&xa()},placeholder:"[AI引导]：掌柜的，您想怎么改？(输入语音或文字)",className:`w-full h-32 px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 ${a?"bg-gray-700 border-gray-600 text-white focus:border-red-500":"bg-white border-gray-300 focus:border-red-500"} resize-y`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"}),e.jsx("button",{onClick:async()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang="zh-CN",e.interimResults=!1,e.onstart=()=>{i.info("开始语音输入...")},e.onresult=e=>{const t=e.results[0][0].transcript;$e(e=>e+t),i.success("语音输入完成")},e.onerror=e=>{i.error("语音输入失败: "+e.error)},e.start()}else i.error("您的浏览器不支持语音输入功能")},className:`absolute right-3 bottom-3 p-2 rounded-full ${a?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} transition-all duration-300 hover:scale-110`,"aria-label":"语音输入",children:e.jsx("i",{className:"fas fa-microphone"})})]}),(Xe||"idle"!==et)&&e.jsx("div",{className:"text-xs mb-2 "+(a?"text-gray-300":"text-gray-600"),"aria-live":"polite",children:Xe?"优化中…":"done"===et?"已优化":"准备优化"}),at&&Xe&&e.jsx("div",{className:"text-xs rounded p-2 mb-2 "+(a?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"),children:at}),e.jsx("button",{onClick:ya,className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 min-h-[44px] active:scale-98",children:"注入灵感"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("button",{onClick:xa,disabled:Xe||He,className:`w-full ${a?"bg-green-700 hover:bg-green-600 text-white":"bg-green-600 hover:bg-green-700 text-white"} px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-98`,children:Xe?"DeepSeek优化中…":"优化提示词（DeepSeek）"}),st&&lt&&e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsx("button",{onClick:()=>{$e(st),tt("idle"),rt(""),i.success("已撤销优化")},className:"text-xs px-3 py-1 rounded transition-colors "+(a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"),children:"撤销优化"})})]}),"doubao"===ot&&e.jsxs("div",{className:"mt-4",children:[e.jsx("button",{onClick:async()=>{gt(!0),xt("");try{const e=await ne.chatCompletions({messages:[{role:"user",content:[{type:"image_url",image_url:{url:"https://ark-project.tos-cn-beijing.ivolces.com/images/view.jpeg"}},{type:"text",text:"图片主要讲了什么?"}]}]});xt(e?.data?.choices?.[0]?.message?.content||"（无返回内容）")}catch{xt("调用失败，请检查服务端环境变量或网络")}finally{gt(!1)}},className:`w-full ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} px-4 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed active:scale-98`,disabled:mt,children:mt?"豆包图文问答测试中…":"豆包图文问答测试"}),ct&&e.jsx("div",{className:"mt-2 text-sm "+(a?"text-gray-300":"text-gray-700"),children:ct})]})]}),Oe&&e.jsxs("div",{className:`rounded-2xl shadow-md ${a?"bg-gray-800":"bg-white"} p-6`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm font-medium",children:"生成进度"}),kt&&e.jsx("div",{className:`text-sm ${a?"text-blue-400":"text-blue-600"} animate-pulse`,children:kt})]}),e.jsx("div",{className:"relative h-2 rounded-full bg-gray-300 dark:bg-gray-700 overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 via-red-500 to-yellow-500 transition-all duration-500 ease-out shadow-lg",style:{width:`${Ae}%`},children:e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-4 bg-white opacity-30 animate-pulse"})})}),e.jsx("div",{className:"flex justify-end mt-1",children:e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Ae,"%"]})})]}),e.jsxs("div",{className:`rounded-xl p-4 mb-4 ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"视频参数设置"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"时长（秒）"}),e.jsx("input",{type:"number",min:"3",max:"30",value:Vt.duration,onChange:e=>Yt(t=>({...t,duration:parseInt(e.target.value)||5})),className:"w-full text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),e.jsxs("div",{className:"sm:col-span-1 lg:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"分辨率"}),e.jsxs("select",{value:Vt.resolution,onChange:e=>Yt(t=>({...t,resolution:e.target.value})),className:"w-full text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"480p",children:"480p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"})]})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"相机模式"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"cameraMode",value:"false",checked:!Vt.cameraFixed,onChange:()=>Yt(e=>({...e,cameraFixed:!1})),className:"text-red-600 h-4 w-4"}),e.jsx("span",{children:"动态"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"cameraMode",value:"true",checked:Vt.cameraFixed,onChange:()=>Yt(e=>({...e,cameraFixed:!0})),className:"text-red-600 h-4 w-4"}),e.jsx("span",{children:"固定"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:De.map((t,r)=>{const s=ht[r]||"",l="生成中..."===s;return s.startsWith("http"),e.jsxs("div",{className:`rounded-xl overflow-hidden ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"} transition-all duration-300 hover:shadow-lg`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{src:t,alt:"result",ratio:"landscape",rounded:"xl",className:"cursor-pointer transition-transform duration-300 hover:scale-105 w-full",onClick:()=>l?void 0:ba(r)}),l&&e.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-1 rounded-full bg-blue-600 text-white shadow-md",children:"生成中…"})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>ba(r),disabled:l,className:"text-sm px-3 py-3 rounded-md transition-all duration-200 bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60 disabled:cursor-not-allowed active:scale-98 font-medium",children:l?"生成中…":"生成视频"}),e.jsxs("button",{onClick:async()=>{try{navigator.share?(await navigator.share({title:"AI生成作品",text:"我使用津门·灵感引擎生成了一个作品，快来看看吧！",url:t.startsWith("http")?t:window.location.href}),i.success("分享成功")):(await navigator.clipboard.writeText(t.startsWith("http")?t:window.location.href),i.success("链接已复制，您可以手动分享"))}catch(e){try{await navigator.clipboard.writeText(t.startsWith("http")?t:window.location.href),i.success("链接已复制，您可以手动分享")}catch(a){i.error("分享失败，请手动复制链接")}}},className:"text-sm px-3 py-3 rounded-md transition-all duration-200 bg-green-600 hover:bg-green-700 text-white active:scale-98 flex items-center justify-center gap-1 font-medium",children:[e.jsx("i",{className:"fas fa-share-alt"})," 分享"]}),e.jsxs("button",{onClick:()=>{return It(e=r),Gt(De[e]),Bt([...De]),zt(0),Lt(1),Ut("none"),Rt({x:0,y:0,width:0,height:0}),void Jt(!0);var e},className:"text-sm px-3 py-3 rounded-md transition-all duration-200 bg-purple-600 hover:bg-purple-700 text-white active:scale-98 font-medium col-span-1",children:[e.jsx("i",{className:"fas fa-edit mr-1"})," 编辑图片"]}),e.jsxs("button",{onClick:()=>te(r),className:"text-sm px-3 py-3 rounded-md transition-all duration-200 bg-teal-600 hover:bg-teal-700 text-white active:scale-98 font-medium col-span-1",children:[e.jsx("i",{className:"fas fa-download mr-1"})," 高级导出"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>ce(`result-${r}`),className:`text-sm px-3 py-2 rounded-md transition-colors ${a?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"} active:scale-98`,children:se[`result-${r}`]?"查看/修改反馈":"提交反馈"}),se[`result-${r}`]&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-yellow-500 text-lg",children:["★".repeat(se[`result-${r}`].rating),"☆".repeat(5-se[`result-${r}`].rating)]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",se[`result-${r}`].rating,"/5)"]})]})]}),de===`result-${r}`&&e.jsxs("div",{className:`mt-3 p-4 rounded-lg ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"} shadow-md`,children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"提交反馈"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 block",children:"评分："}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>{const e=se[`result-${r}`]||{comment:""};xe(`result-${r}`,t,e.comment)},className:"text-2xl transition-all duration-200 "+((se[`result-${r}`]?.rating||0)>=t?"text-yellow-500 transform scale-110":"text-gray-400 hover:text-yellow-500"),children:"★"},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2 block",children:"反馈意见："}),e.jsx("textarea",{value:se[`result-${r}`]?.comment||"",onChange:e=>{const t=se[`result-${r}`]||{rating:0};xe(`result-${r}`,t.rating,e.target.value)},placeholder:"请输入您的反馈意见...",className:"w-full text-sm px-3 py-3 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),rows:4})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>ce(null),className:`text-sm px-4 py-2 rounded-md transition-colors ${a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-white hover:bg-gray-100 text-gray-900 border border-gray-300"} active:scale-98 font-medium`,children:"关闭"})})]})]})]},r)})}),e.jsxs("div",{className:"text-lg font-bold mb-2",children:["纯正性评分：",Pe]}),Fe.length>0&&e.jsx("div",{className:(a?"text-gray-300":"text-gray-600")+" text-sm",children:Fe.join("；")})]}),e.jsxs("div",{className:`rounded-2xl shadow-md ${a?"bg-gray-800":"bg-white"} p-4 mt-6`,children:[e.jsxs("div",{className:"font-bold mb-3 flex items-center justify-between",children:[e.jsx("span",{children:"AI建议"}),e.jsx("button",{onClick:()=>{try{const e=`${Ee} ${fe.join(" ")} ${ue}`.trim()||"天津文化设计灵感",t=E.generateCreativeDirections(e);Be(t),i.success("已刷新AI建议")}catch{i.error("刷新建议失败，请稍后重试")}},className:`text-xs px-2 py-1 rounded ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:scale-105`,children:"刷新建议"})]}),qe.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:qe.map((t,r)=>e.jsx("button",{onClick:()=>(async e=>{const t=`${Ee} ${e}`.trim();ma(e),$e(t);try{Ge(!0),Ue("");const a=`请基于以下方向输出一段不超过120字的中文文案，要求${{formal:"正式、专业、严谨的风格",humorous:"幽默、轻松、有趣的风格",creative:"创意、独特、富有想象力的风格",poetic:"诗意、优美、富有文采的风格"}[Nt]}，通俗易懂，便于朗读：\n方向：${e}\n提示：${t||"天津文化设计灵感"}`,r=await E.generateResponse(a);Ue((r||"").trim())}catch{i.error("生成文案失败，请稍后重试")}finally{Ge(!1)}})(t),className:"text-sm px-4 py-2.5 rounded-full border transition-all duration-200 "+(a?"border-gray-600 text-gray-300 hover:border-gray-500 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:border-gray-400 hover:bg-gray-100"),children:t},r))}):e.jsxs("div",{className:(a?"text-gray-500":"text-gray-400")+" text-sm flex flex-col items-start gap-2 mb-4",children:[e.jsx("span",{children:"点击“注入灵感”以获取建议"}),e.jsx("button",{onClick:ya,className:`text-xs px-3 py-2 rounded ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:scale-105`,children:"快速注入灵感"})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"font-bold",children:"AI文案"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"风格："}),e.jsxs("select",{value:Nt,onChange:e=>wt(e.target.value),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"creative",children:"创意"}),e.jsx("option",{value:"formal",children:"正式"}),e.jsx("option",{value:"humorous",children:"幽默"}),e.jsx("option",{value:"poetic",children:"诗意"})]})]})]}),e.jsx("div",{className:`${a?"text-gray-300":"text-gray-700"} text-sm whitespace-pre-wrap min-h-24 p-4 rounded-lg ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,children:Me}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:async()=>{const e=Me.trim()?Me:Ee.trim();if(e)try{const t=await Ne(e,{format:"mp3"});yt(t.audioUrl)}catch(t){i.error(t?.message||"朗读失败")}else i.warning("请先生成文案或填写提示")},className:"text-sm px-3 py-3 rounded-md bg-green-600 text-white transition-all duration-200 hover:bg-green-700 active:scale-98 font-medium",children:"朗读"}),e.jsx("button",{onClick:()=>{const e=Me.trim();if(e)try{navigator.clipboard.writeText(e),i.success("已复制文案")}catch{i.error("复制失败")}else i.warning("暂无可复制的文案")},className:`text-sm px-3 py-3 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:bg-opacity-80 active:scale-98 font-medium`,children:"复制文案"}),e.jsx("button",{onClick:()=>{const e=Me.trim();e?($e(e),i.success("已插入到输入框")):i.warning("暂无文案可插入")},className:`text-sm px-3 py-3 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:bg-opacity-80 active:scale-98 font-medium`,children:"插入到输入框"}),e.jsx("button",{onClick:()=>{if(Me.trim())try{const e=localStorage.getItem("NEO_COPY_HISTORY"),t=e?JSON.parse(e):[],a=[{id:Date.now(),text:Me.trim()},...t].slice(0,50);localStorage.setItem("NEO_COPY_HISTORY",JSON.stringify(a)),i.success("已保存到本地")}catch{i.error("保存失败")}else i.warning("暂无文案可保存")},className:`text-sm px-3 py-3 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:bg-opacity-80 active:scale-98 font-medium`,children:"保存文案"}),e.jsx("button",{onClick:()=>{Ue(""),i.success("已清空文案")},className:`text-sm px-3 py-3 rounded-md ${a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} transition-all duration-200 hover:bg-opacity-80 active:scale-98 font-medium col-span-2`,children:"清空文案"})]}),pt&&e.jsx("div",{className:"mt-4",children:e.jsx("audio",{controls:!0,src:pt,className:"w-full rounded-md border ${isDark ? 'border-gray-600' : 'border-gray-200'}"})}),He&&e.jsx("div",{className:(a?"text-gray-500":"text-gray-400")+" text-sm mt-2",children:"生成中…"})]}),c.length>0&&e.jsxs("div",{className:`rounded-2xl shadow-md ${a?"bg-gray-800":"bg-white"} p-4 mt-6`,children:[e.jsxs("div",{className:"font-bold mb-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[e.jsx("span",{children:"视频历史"}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("button",{className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-all duration-200 hover:scale-105`,onClick:()=>{x([]);try{localStorage.removeItem("NEO_VIDEO_HISTORY")}catch{}},children:"清空历史"})})]}),e.jsxs("div",{className:"mb-4 space-y-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"搜索历史记录...",value:h,onChange:e=>u(e.target.value),className:"w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"筛选："}),e.jsxs("select",{value:p,onChange:e=>y(e.target.value),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"all",children:"全部"}),e.jsx("option",{value:"favorite",children:"收藏"}),e.jsx("option",{value:"video",children:"视频"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"排序："}),e.jsxs("select",{value:b,onChange:e=>f(e.target.value),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"latest",children:"最新"}),e.jsx("option",{value:"oldest",children:"最早"})]})]})]})}),e.jsx("div",{className:`rounded-lg p-4 ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"日期范围"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:v.start,onChange:e=>N(t=>({...t,start:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")}),e.jsx("input",{type:"date",value:v.end,onChange:e=>N(t=>({...t,end:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"分辨率"}),e.jsx("input",{type:"text",placeholder:"例如：1920×1080",value:w.resolution,onChange:e=>k(t=>({...t,resolution:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"时长范围（秒）"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"最小",min:"0",step:"0.1",value:w.minDuration,onChange:e=>k(t=>({...t,minDuration:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")}),e.jsx("input",{type:"number",placeholder:"最大",min:"0",step:"0.1",value:w.maxDuration,onChange:e=>k(t=>({...t,maxDuration:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{u(""),y("all"),f("latest"),N({start:"",end:""}),k({resolution:"",minDuration:"",maxDuration:""})},className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-white hover:bg-gray-100 text-gray-900 border border-gray-300"} transition-all duration-200 hover:scale-105`,children:"重置筛选条件"})})]})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[$&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{onClick:()=>{0!==C.length&&(x(e=>{const t=C.every(t=>{const a=e.find(e=>e.url===t);return!0===a?.isFavorite}),a=e.map(e=>C.includes(e.url)?{...e,isFavorite:!t}:e);try{localStorage.setItem("NEO_VIDEO_HISTORY",JSON.stringify(a))}catch{}return a}),S([]),A(!1),i.success(`已更新 ${C.length} 条历史记录的收藏状态`))},className:"text-xs px-3 py-2 rounded transition-colors bg-yellow-600 hover:bg-yellow-700 text-white transition-all duration-200 hover:scale-105",children:"批量收藏/取消收藏"}),e.jsx("button",{onClick:()=>{0!==C.length&&(x(e=>{const t=e.filter(e=>!C.includes(e.url));try{localStorage.setItem("NEO_VIDEO_HISTORY",JSON.stringify(t))}catch{}return t}),S([]),A(!1),i.success(`已删除 ${C.length} 条历史记录`))},className:"text-xs px-3 py-2 rounded transition-colors bg-red-600 hover:bg-red-700 text-white transition-all duration-200 hover:scale-105",children:"批量删除"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:I,onChange:e=>O(e.target.value),className:"text-xs px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"json",children:"JSON格式"}),e.jsx("option",{value:"csv",children:"CSV格式"})]}),e.jsx("button",{onClick:()=>{if(0===re.length)return void i.warning("没有可导出的历史记录");let e,t;if("json"===I)e=JSON.stringify(re,null,2),t=`neo-history-${(new Date).toISOString().slice(0,10)}.json`;else{const a=["URL","Thumbnail","Created At","Duration","Resolution","Favorite","Type"],r=re.map(e=>[e.url,e.thumb||e.image,new Date(e.createdAt||0).toISOString(),e.duration||"",e.width&&e.height?`${e.width}×${e.height}`:"",e.isFavorite?"Yes":"No",e.type||"video"]);e=[a.join(","),...r.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),t=`neo-history-${(new Date).toISOString().slice(0,10)}.csv`}const a=new Blob([e],{type:"json"===I?"application/json":"text/csv"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),i.success(`已导出 ${re.length} 条历史记录`)},className:"text-xs px-3 py-2 rounded transition-colors bg-blue-600 hover:bg-blue-700 text-white transition-all duration-200 hover:scale-105",children:"导出历史记录"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-right",children:["共 ",re.length," 条记录",C.length>0&&e.jsxs("span",{className:"ml-2",children:["已选择 ",C.length," 条"]})]})]})]}),re.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-md "+(a?"bg-gray-700":"bg-gray-50"),children:[e.jsx("input",{type:"checkbox",checked:C.length===re.length&&re.length>0,onChange:()=>{if(C.length===re.length)S([]),A(!1);else{const e=re.map(e=>e.url);S(e),A(!0)}},className:"text-red-600 h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"全选/取消全选"})]}),re.map((t,r)=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:C.includes(t.url),onChange:()=>{return e=t.url,void S(t=>{const a=t.includes(e)?t.filter(t=>t!==e):[...t,e];return A(a.length>0),a});var e},className:"mt-1 text-red-600 h-4 w-4"}),e.jsx("div",{className:"w-20 h-12 rounded overflow-hidden bg-gray-100 flex-shrink-0 shadow-sm",children:e.jsx("img",{src:t.thumb||t.image,alt:"thumb",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"text-xs break-all text-blue-600 flex-1",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"underline hover:text-blue-800 transition-colors",title:t.url,children:l(t.url)})}),e.jsx("button",{onClick:()=>{return e=t.url,void x(t=>{const a=t.map(t=>t.url===e?{...t,isFavorite:!t.isFavorite}:t);try{localStorage.setItem("NEO_VIDEO_HISTORY",JSON.stringify(a))}catch{}return a});var e},className:"p-1 rounded-full transition-all duration-200 "+(t.isFavorite?"text-yellow-500 transform scale-110":"text-gray-400 hover:text-yellow-500"),title:t.isFavorite?"取消收藏":"收藏",children:t.isFavorite?"★":"☆"})]}),e.jsxs("div",{className:`text-xs ${a?"text-gray-300":"text-gray-600"} flex flex-wrap gap-x-2 gap-y-1 mt-1`,children:[ge(t.width,t.height)&&e.jsxs("span",{children:["分辨率：",ge(t.width,t.height)]}),me(t.duration)&&e.jsxs("span",{children:["时长：",me(t.duration)]}),he(t.createdAt)&&e.jsxs("span",{children:["生成时间：",he(t.createdAt)]}),t.isFavorite&&e.jsx("span",{className:"text-yellow-500",children:"已收藏"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{className:`px-3 py-2 rounded-md transition-all duration-200 ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} active:scale-98 text-sm`,onClick:()=>{try{navigator.clipboard.writeText(t.url),i.success("已复制链接")}catch{}},"aria-label":"复制",children:[e.jsx("i",{className:"fas fa-copy mr-1"})," 复制"]}),e.jsxs("button",{className:`px-3 py-2 rounded-md transition-all duration-200 ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} active:scale-98 text-sm`,onClick:()=>{try{window.open(t.url,"_blank")}catch{}},"aria-label":"打开",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-1"})," 打开"]}),e.jsxs("a",{className:`px-3 py-2 rounded-md transition-all duration-200 ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} active:scale-98 text-sm`,href:`${s?`${s}`:""}/api/proxy/video?url=${encodeURIComponent(t.url)}`,download:!0,"aria-label":"下载",children:[e.jsx("i",{className:"fas fa-download mr-1"})," 下载"]}),e.jsxs("button",{className:`px-3 py-2 rounded-md transition-all duration-200 ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} active:scale-98 text-sm`,onClick:()=>g(e=>({...e,[t.url]:!e[t.url]})),"aria-label":m[t.url]?"收起预览":"预览",children:[e.jsx("i",{className:`fas fa-${m[t.url]?"chevron-up":"chevron-down"} mr-1`})," ",m[t.url]?"收起":"预览"]})]})]}),m[t.url]&&e.jsx("div",{className:"mt-2 w-full",children:e.jsx("video",{controls:!0,src:`${s?`${s}`:""}/api/proxy/video?url=${encodeURIComponent(t.url)}`,className:"w-full rounded-lg shadow-md border ${isDark ? 'border-gray-600' : 'border-gray-200'}"})})]},r))]}):e.jsx("div",{className:(a?"text-gray-500":"text-gray-400")+" text-sm text-center py-6",children:h?"没有找到匹配的历史记录":"没有历史记录"})]})]})]}),Xt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl ${a?"bg-gray-800":"bg-white"} p-6 max-w-md w-full max-h-[90vh] overflow-y-auto transition-all duration-300 transform scale-100 opacity-100`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:ea?"编辑风格预设":"创建风格预设"}),e.jsx("button",{onClick:da,className:`p-2 rounded-full ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} transition-all duration-200 hover:scale-110`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"预设名称 *"}),e.jsx("input",{type:"text",value:aa.name,onChange:e=>ra(t=>({...t,name:e.target.value})),placeholder:"输入预设名称",className:"w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"预设描述"}),e.jsx("textarea",{value:aa.description,onChange:e=>ra(t=>({...t,description:e.target.value})),placeholder:"输入预设描述（可选）",className:`w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} resize-y`,rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"品牌"}),e.jsx("input",{type:"text",value:aa.brand,onChange:e=>ra(t=>({...t,brand:e.target.value})),placeholder:"输入品牌名称",className:"w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"提示词"}),e.jsx("textarea",{value:aa.prompt,onChange:e=>ra(t=>({...t,prompt:e.target.value})),placeholder:"输入提示词",className:`w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 ${a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} resize-y`,rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"生成引擎"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ra(e=>({...e,engine:"sdxl"})),className:"px-3 py-2 rounded-full text-sm transition-colors "+("sdxl"===aa.engine?"bg-red-600 hover:bg-red-700 text-white":a?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"SDXL"}),e.jsx("button",{onClick:()=>ra(e=>({...e,engine:"doubao"})),className:"px-3 py-2 rounded-full text-sm transition-colors "+("doubao"===aa.engine?"bg-red-600 hover:bg-red-700 text-white":a?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Doubao"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"文本风格"}),e.jsxs("select",{value:aa.textStyle,onChange:e=>ra(t=>({...t,textStyle:e.target.value})),className:"w-full text-sm px-3 py-3 rounded-lg border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"creative",children:"创意"}),e.jsx("option",{value:"formal",children:"正式"}),e.jsx("option",{value:"humorous",children:"幽默"}),e.jsx("option",{value:"poetic",children:"诗意"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"视频参数"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"时长（秒）"}),e.jsx("input",{type:"number",min:"3",max:"30",value:aa.videoParams.duration,onChange:e=>ra(t=>({...t,videoParams:{...t.videoParams,duration:parseInt(e.target.value)||5}})),className:"w-full text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"分辨率"}),e.jsxs("select",{value:aa.videoParams.resolution,onChange:e=>ra(t=>({...t,videoParams:{...t.videoParams,resolution:e.target.value}})),className:"w-full text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"480p",children:"480p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:"相机模式"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"presetCameraMode",value:"false",checked:!aa.videoParams.cameraFixed,onChange:()=>ra(e=>({...e,videoParams:{...e.videoParams,cameraFixed:!1}})),className:"text-red-600 h-4 w-4"}),e.jsx("span",{children:"动态"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"presetCameraMode",value:"true",checked:aa.videoParams.cameraFixed,onChange:()=>ra(e=>({...e,videoParams:{...e.videoParams,cameraFixed:!0}})),className:"text-red-600 h-4 w-4"}),e.jsx("span",{children:"固定"})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{if(!aa.name.trim())return void i.warning("请输入预设名称");const e={id:ea||`preset-${Date.now()}`,name:aa.name.trim(),description:aa.description.trim(),brand:aa.brand,tags:aa.tags,prompt:aa.prompt,engine:aa.engine,textStyle:aa.textStyle,videoParams:aa.videoParams,createdAt:ea&&Wt.find(e=>e.id===ea)?.createdAt||Date.now(),updatedAt:Date.now()};let t;t=ea?Wt.map(t=>t.id===ea?e:t):[...Wt,e],Zt(t),Ze(t),i.success(ea?"预设已更新":"预设已创建"),da()},className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 min-h-[44px] active:scale-98",children:ea?"更新预设":"保存预设"}),e.jsx("button",{onClick:da,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 min-h-[44px] active:scale-98 "+(a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:"取消"})]})]})}),Kt&&null!==At&&Ht&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden flex flex-col bg-black/90 backdrop-blur-sm",children:[e.jsxs("div",{className:`flex items-center justify-between p-4 ${a?"bg-gray-900":"bg-white"} border-b ${a?"border-gray-800":"border-gray-200"}`,children:[e.jsx("h2",{className:"text-xl font-bold",children:"图片编辑器"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{zt(0),Lt(1),Ut("none"),Rt({x:0,y:0,width:0,height:0}),Bt([...De])},className:`text-sm px-3 py-2 rounded transition-colors ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} transition-all duration-200 hover:scale-105`,children:"重置"}),e.jsx("button",{onClick:()=>{null!==At&&(Re(e=>{const t=[...e];return t[At]=qt[At]||e[At],t}),i.success("图片编辑已保存"),ha())},className:"text-sm px-3 py-2 rounded transition-colors bg-green-600 hover:bg-green-700 text-white transition-all duration-200 hover:scale-105",children:"保存"}),e.jsx("button",{onClick:ha,className:`p-2 rounded-full ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} transition-all duration-200 hover:scale-110`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:`w-64 p-4 overflow-y-auto ${a?"bg-gray-800":"bg-gray-50"} border-r ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"编辑模式"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["crop","rotate","filter","resize"].map(t=>e.jsxs("button",{onClick:()=>Tt(t),className:`text-xs px-3 py-2 rounded-full transition-colors ${Ot===t?"bg-red-600 text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:["crop"===t&&"裁剪","rotate"===t&&"旋转","filter"===t&&"滤镜","resize"===t&&"缩放"]},t))})]}),"crop"===Ot&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"裁剪设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"裁剪比例"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["自由","1:1","4:3","16:9","3:4","9:16"].map(t=>e.jsx("button",{className:`text-xs px-2 py-1.5 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:t},t))})]}),e.jsx("div",{children:e.jsx("button",{onClick:()=>{i.info("裁剪功能已应用")},className:"w-full text-xs px-3 py-2 rounded transition-colors bg-red-600 hover:bg-red-700 text-white transition-all duration-200 hover:scale-105",children:"应用裁剪"})})]})]}),"rotate"===Ot&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"旋转设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>ua(90),className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:"旋转 90°"}),e.jsx("button",{onClick:()=>ua(180),className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:"旋转 180°"}),e.jsx("button",{onClick:()=>ua(-90),className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:"旋转 -90°"})]}),e.jsx("div",{children:e.jsxs("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:["当前角度: ",Pt,"°"]})})]})]}),"filter"===Ot&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"滤镜效果"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["none","复古","黑白","明亮","对比度","饱和度","暖色调","冷色调","模糊","锐化"].map(t=>e.jsxs("button",{onClick:()=>(e=>{Ut(e),i.info(`${e}滤镜已应用`)})(t),className:`text-xs px-3 py-2 rounded transition-colors ${Mt===t?"bg-purple-600 text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:["none"===t&&"原图","复古"===t&&"复古","黑白"===t&&"黑白","明亮"===t&&"明亮","对比度"===t&&"对比度","饱和度"===t&&"饱和度","暖色调"===t&&"暖色调","冷色调"===t&&"冷色调","模糊"===t&&"模糊","锐化"===t&&"锐化"]},t))})]}),"resize"===Ot&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"缩放设置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>pa(-.1),className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:"缩小"}),e.jsx("button",{onClick:()=>pa(.1),className:`text-xs px-3 py-2 rounded transition-colors ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} transition-all duration-200 hover:scale-105`,children:"放大"})]}),e.jsx("div",{children:e.jsxs("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:["当前缩放: ",(100*Ft).toFixed(0),"%"]})})]})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-hidden",children:e.jsx("div",{className:"relative transition-all duration-300 ease-out",style:{transform:`rotate(${Pt}deg) scale(${Ft})`,maxWidth:"100%",maxHeight:"100%"},children:e.jsx("img",{src:Ht,alt:"编辑预览",className:"max-w-full max-h-full object-contain shadow-xl",style:{filter:"none"===Mt?"none":"复古"===Mt?"sepia(100%)":"黑白"===Mt?"grayscale(100%)":"明亮"===Mt?"brightness(1.3)":"对比度"===Mt?"contrast(1.5)":"饱和度"===Mt?"saturate(2)":"暖色调"===Mt?"sepia(30%) brightness(1.1)":"冷色调"===Mt?"blur(1px) brightness(1.1)":"模糊"===Mt?"blur(3px)":"锐化"===Mt?"sharpen(2)":"none"}})})})]})]}),z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl ${a?"bg-gray-800":"bg-white"} p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto transition-all duration-300 transform scale-100 opacity-100`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:"批量导出"}),e.jsx("button",{onClick:ae,className:`p-2 rounded-full ${a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"} transition-all duration-200 hover:scale-110`,"aria-label":"关闭",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`rounded-xl p-4 ${a?"bg-gray-700":"bg-gray-50"} border ${a?"border-gray-600":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"导出设置"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"图片格式"}),e.jsxs("select",{value:R.format,onChange:e=>P(t=>({...t,format:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"png",children:"PNG"}),e.jsx("option",{value:"jpeg",children:"JPEG"}),e.jsx("option",{value:"webp",children:"WebP"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:["导出质量: ",R.quality,"%"]}),e.jsx("input",{type:"range",min:"10",max:"100",value:R.quality,onChange:e=>P(t=>({...t,quality:parseInt(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 block",children:"分辨率"}),e.jsxs("select",{value:R.resolution,onChange:e=>P(t=>({...t,resolution:e.target.value})),className:"text-sm px-3 py-2 rounded border focus:ring-2 focus:ring-red-500 transition-all duration-300 "+(a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"),children:[e.jsx("option",{value:"original",children:"原始分辨率"}),e.jsx("option",{value:"480p",children:"480p"}),e.jsx("option",{value:"720p",children:"720p"}),e.jsx("option",{value:"1080p",children:"1080p"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3 block",children:"选择要导出的项"}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto p-2 border rounded-lg ${isDark ? 'bg-gray-700 border-gray-600' : 'bg-gray-50 border-gray-200'}",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded ${isDark ? 'bg-gray-800' : 'bg-white'}",children:[e.jsx("input",{type:"checkbox",checked:L.length===De.length&&De.length>0,onChange:()=>{L.length===De.length?M([]):M(De.map((e,t)=>t))},className:"text-red-600 h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"全选/取消全选"})]}),De.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded hover:bg-opacity-80 transition-all duration-200 ${isDark ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-100'}",children:[e.jsx("input",{type:"checkbox",checked:L.includes(a),onChange:()=>(e=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(a),className:"text-red-600 h-4 w-4"}),e.jsx("div",{className:"w-12 h-12 rounded overflow-hidden bg-gray-100 flex-shrink-0 shadow-sm",children:e.jsx("img",{src:t,alt:`Item ${a}`,className:"w-full h-full object-cover"})}),e.jsxs("span",{className:"text-sm truncate",children:["图片 ",a+1]})]},a))]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{0!==L.length?(i.info(`将导出 ${L.length} 项，格式：${R.format}，质量：${R.quality}%`),L.forEach(e=>{te(e)}),ae(),i.success(`已启动 ${L.length} 项的导出任务`)):i.warning("请选择要导出的项")},disabled:0===L.length,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-medium transition-all duration-200 min-h-[44px] active:scale-98 disabled:opacity-60 disabled:cursor-not-allowed",children:["导出选中项 (",L.length,")"]}),e.jsx("button",{onClick:ae,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 min-h-[44px] active:scale-98 "+(a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:"取消"})]})]})]})}),e.jsx("footer",{className:`border-t ${a?"border-gray-800 bg-gray-900":"border-gray-200 bg-white"} py-6 px-4 z-10 relative`,children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx("p",{className:"text-sm "+(a?"text-gray-400":"text-gray-600"),children:"© 2025 AI共创平台. 保留所有权利"}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsx("a",{href:"/privacy",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"隐私政策"}),e.jsx("a",{href:"/terms",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"服务条款"}),e.jsx("a",{href:"/help",className:`text-sm ${a?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"帮助中心"})]})]})}),Y&&Z<V.length&&e.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:e.jsxs("div",{className:`rounded-2xl shadow-2xl ${a?"bg-gray-800":"bg-white"} border ${a?"border-gray-700":"border-gray-200"} p-6 max-w-lg w-full transition-all duration-300 transform scale-100 opacity-100`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-bold",children:V[Z].title}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{W(!1),ee(!0);try{localStorage.setItem("NEO_TUTORIAL_COMPLETED","true")}catch{}},className:"text-xs px-2 py-1 rounded text-red-600 hover:text-red-700 "+(a?"bg-red-900 bg-opacity-20 hover:bg-opacity-30":"bg-red-50 hover:bg-red-100"),children:V[Z].skipText||"跳过教程"})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:V[Z].description})]}),e.jsx("div",{className:"flex items-center gap-1 mb-4",children:V.map((t,a)=>e.jsx("div",{className:"h-2 rounded-full flex-1 transition-all duration-300 "+(a<=Z?a===Z?"bg-blue-600":"bg-blue-300":"bg-gray-300 dark:bg-gray-600")},t.id))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{Z>0&&X(e=>e-1)},disabled:0===Z,className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 min-h-[40px] active:scale-98 "+(0===Z?"opacity-50 cursor-not-allowed":a?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"),children:V[Z].prevText||"上一步"}),e.jsx("button",{onClick:()=>{Z<V.length-1?X(e=>e+1):(()=>{W(!1),ee(!0);try{localStorage.setItem("NEO_TUTORIAL_COMPLETED","true")}catch{}(e=>{const t={id:`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:e.title,message:e.message,type:e.type||"info",timestamp:Date.now(),read:!1,url:e.url};q(e=>{const a=[t,...e].slice(0,G.maxNotifications);return J(a.filter(e=>!e.read).length),a}),G.enableDesktop&&"Notification"in window&&("granted"===Notification.permission?new Notification(e.title,{body:e.message,icon:"/favicon.ico"}):"denied"!==Notification.permission&&Notification.requestPermission().then(t=>{"granted"===t&&new Notification(e.title,{body:e.message,icon:"/favicon.ico"})}))})({title:"教程完成",message:"恭喜您完成了交互式教程！现在您可以开始使用津门·灵感引擎进行创作了。",type:"success"})})()},className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 min-h-[40px] active:scale-98 bg-blue-600 hover:bg-blue-700 text-white",children:V[Z].nextText||"下一步"})]})]})})]}),!Q&&!Y&&e.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:e.jsxs("button",{onClick:()=>{W(!0),X(0),ee(!1)},className:"flex items-center gap-2 px-4 py-2 rounded-full shadow-lg bg-blue-600 hover:bg-blue-700 text-white transition-all duration-200 hover:scale-105",children:[e.jsx("i",{className:"fas fa-play"}),"开始教程"]})})]})}},Symbol.toStringTag,{value:"Module"})),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:r}=n(),i=a(),{isDark:l}=j(),[o,d]=t.useState(null),[c,x]=t.useState(!0),[m,g]=t.useState(null),h=[{id:1,title:"全国非物质文化遗产保护工作会议在京召开",description:"会议总结了近年来非遗保护工作成果，部署了下一阶段重点任务，强调要加强非遗的活态传承和创新发展。",image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=National%20intangible%20cultural%20heritage%20protection%20work%20conference%20Beijing",date:"2025-12-03",category:"政策动态",source:"文化和旅游部",views:12563,content:"12月3日，全国非物质文化遗产保护工作会议在北京召开。文化和旅游部部长胡和平出席会议并讲话，副部长李群主持会议。\n\n会议总结了近年来我国非物质文化遗产保护工作取得的显著成效。截至目前，我国已建立了国家、省、市、县四级非物质文化遗产保护体系，认定了国家级非物质文化遗产代表性项目1557项，国家级非物质文化遗产代表性传承人3068名，设立了23个国家级文化生态保护区。\n\n会议强调，要深入学习贯彻习近平总书记关于非物质文化遗产保护的重要指示精神，坚持以社会主义核心价值观为引领，坚持创造性转化、创新性发展，加强非遗的活态传承和创新发展。\n\n下一阶段，我国将重点推进以下工作：一是加强非遗保护立法和政策体系建设；二是完善非遗代表性项目和代表性传承人管理制度；三是加强非遗传承人群培养；四是推进非遗与旅游融合发展；五是加强非遗数字化保护和传播；六是推动非遗走向世界。\n\n会议还表彰了全国非物质文化遗产保护工作先进集体和先进个人，并对2026年重点工作进行了部署。\n\n来自全国各省、自治区、直辖市文化和旅游厅（局）主要负责同志，以及有关专家学者、非遗代表性传承人代表等共300余人参加了会议。"},{id:2,title:"《中国传统工艺振兴计划》实施成效显著",description:"五年来，该计划推动了1500余项传统工艺项目的保护和发展，带动了200多万从业人员就业增收。",image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=China%20traditional%20craft%20revitalization%20plan%20implementation%20achievements",date:"2025-11-28",category:"政策动态",source:"光明日报",views:15678,content:"五年来，《中国传统工艺振兴计划》实施成效显著，推动了1500余项传统工艺项目的保护和发展，带动了200多万从业人员就业增收。\n\n该计划自2020年实施以来，以振兴传统工艺为目标，以传承人为核心，以产业发展为导向，以创新设计为动力，通过政策支持、人才培养、市场拓展、国际交流等多种方式，推动传统工艺实现创造性转化和创新性发展。\n\n截至目前，全国已建立了100个传统工艺工作站，培训了10万人次以上的传统工艺从业者，支持了1000余项传统工艺创新项目，推动了传统工艺产品销售额增长了50%以上。\n\n同时，该计划还推动了传统工艺与旅游、文化创意、数字经济等产业的融合发展，形成了一批具有影响力的传统工艺品牌和产品，提高了传统工艺的市场竞争力和社会影响力。\n\n下一步，文化和旅游部将继续深入实施《中国传统工艺振兴计划》，进一步加强传统工艺的保护和传承，推动传统工艺实现更高质量的发展。"},{id:3,title:"中国传统音乐保护与传承工程启动",description:"工程将通过录制、整理、研究等方式，对中国传统音乐进行系统保护和传承，预计历时五年完成。",image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=China%20traditional%20music%20protection%20and%20transmission%20project%20launch",date:"2025-11-15",category:"政策动态",source:"中国音乐家协会",views:10345,content:"中国传统音乐保护与传承工程于11月15日正式启动，该工程将通过录制、整理、研究等方式，对中国传统音乐进行系统保护和传承，预计历时五年完成。\n\n该工程由中国音乐家协会牵头，联合教育部、文化和旅游部等部门共同实施，旨在全面保护和传承中国传统音乐文化，推动传统音乐的创造性转化和创新性发展。\n\n工程将重点开展以下工作：一是对全国范围内的传统音乐资源进行全面普查和录制；二是建立中国传统音乐数据库和数字图书馆；三是加强传统音乐理论研究和人才培养；四是推动传统音乐的创新发展和传播推广；五是加强传统音乐的国际交流与合作。\n\n中国传统音乐是中华民族优秀传统文化的重要组成部分，具有悠久的历史和丰富的内涵。该工程的实施将有助于更好地保护和传承中国传统音乐文化，推动传统音乐在新时代焕发新的活力。"},{id:4,title:"《文化产业数字化战略实施方案》正式发布",description:"方案提出到2035年，实现文化产业数字化转型全面完成，数字文化产业成为国民经济支柱性产业。",image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=Cultural%20industry%20digitalization%20strategy%20implementation%20plan%20release",date:"2025-11-08",category:"政策动态",source:"新华社",views:18923,content:"《文化产业数字化战略实施方案》于11月8日正式发布，方案提出到2035年，实现文化产业数字化转型全面完成，数字文化产业成为国民经济支柱性产业。\n\n该方案由文化和旅游部、国家发展改革委、工业和信息化部等部门联合发布，是指导我国文化产业数字化发展的纲领性文件。\n\n方案提出了以下主要目标：到2027年，文化产业数字化转型取得显著成效，数字文化产业占文化产业比重达到50%以上；到2035年，文化产业数字化转型全面完成，数字文化产业成为国民经济支柱性产业，我国成为全球数字文化产业创新中心。\n\n方案还明确了以下重点任务：一是加强数字文化基础设施建设；二是推动文化产业数字化转型；三是培育数字文化新业态新模式；四是加强数字文化内容创作生产；五是完善数字文化产业生态；六是加强数字文化国际合作。\n\n该方案的发布将为我国文化产业数字化发展提供重要指导，推动我国文化产业实现高质量发展。"},{id:7,title:"2025中国传统文化创意设计大赛启动",description:'本次大赛以"传统与现代融合"为主题，面向全球设计师征集优秀作品，推动传统文化的创造性转化和创新性发展。',image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=2025%20China%20traditional%20culture%20creative%20design%20competition%20launch",date:"2025-12-01",category:"赛事活动",source:"中国文化产业协会",views:8921,content:'2025中国传统文化创意设计大赛于12月1日正式启动，本次大赛以"传统与现代融合"为主题，面向全球设计师征集优秀作品，推动传统文化的创造性转化和创新性发展。\n\n本次大赛由中国文化产业协会主办，中国设计协会承办，旨在通过创意设计的方式，挖掘和传承中国传统文化，推动传统文化与现代设计的融合发展。\n\n大赛设有以下参赛类别：视觉设计、产品设计、空间设计、数字创意设计等。参赛作品要求以中国传统文化元素为核心，结合现代设计理念和技术，具有创新性、实用性和艺术性。\n\n大赛奖项设置如下：金奖10名，奖金各10万元；银奖20名，奖金各5万元；铜奖30名，奖金各2万元；优秀奖100名，颁发证书。\n\n大赛报名截止日期为2026年3月1日，评审结果将于2026年5月公布。获奖作品将在全国范围内进行巡展，并推荐给相关企业进行产业化合作。\n\n本次大赛的举办将有助于推动传统文化的创造性转化和创新性发展，培育一批具有国际影响力的传统文化创意设计作品和人才。'},{id:8,title:"2025国际非遗博览会在济南开幕",description:"博览会吸引了来自全球40多个国家和地区的非遗项目参展，展示了丰富的人类非物质文化遗产。",image:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=2025%20International%20intangible%20cultural%20heritage%20expo%20Jinan",date:"2025-11-20",category:"赛事活动",source:"中国非物质文化遗产保护中心",views:12345,content:'2025国际非遗博览会于11月20日在济南开幕，博览会吸引了来自全球40多个国家和地区的非遗项目参展，展示了丰富的人类非物质文化遗产。\n\n本次博览会由文化和旅游部、山东省人民政府主办，济南市人民政府、山东省文化和旅游厅承办，以"传承文化遗产，促进文明互鉴"为主题，旨在通过展览、展示、交流、交易等方式，推动非遗的保护和传承，促进不同国家和地区之间的文明交流互鉴。\n\n博览会设有以下展区：国际展区、国内展区、互动体验区、成果展区等。参展项目涵盖了传统音乐、传统舞蹈、传统戏剧、传统技艺、传统美术等多个门类。\n\n博览会期间，还将举办非遗保护国际论坛、非遗项目展演、非遗产品交易等活动。预计将有超过100万人次参观本次博览会。\n\n本次博览会的举办将有助于推动非遗的保护和传承，促进不同国家和地区之间的文明交流互鉴，提升我国在国际非遗领域的影响力和话语权。'}];return t.useEffect(()=>{x(!0),g(null),setTimeout(()=>{try{const e=parseInt(r||"1"),t=h.find(t=>t.id===e);t?d(t):(g("未找到该资讯内容"),d(null))}catch(e){g("加载资讯详情失败，请稍后重试")}finally{x(!1)}},300)},[r]),c?e.jsx("div",{className:(l?"bg-gray-900":"bg-gray-50")+" min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:(l?"bg-gray-800":"bg-white")+" rounded-xl p-8 shadow-md max-w-4xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/4 mb-6"}),e.jsx("div",{className:"h-12 bg-gray-700 rounded w-3/4 mb-4"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-32"})]}),e.jsx("div",{className:"w-full h-64 bg-gray-700 rounded mb-6"}),[...Array(5)].map((t,a)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-4/6"})]},a))]})})}):m||!o?e.jsx("div",{className:(l?"bg-gray-900":"bg-gray-50")+" min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:(l?"bg-gray-800":"bg-white")+" rounded-xl p-8 shadow-md max-w-4xl mx-auto text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:m||"资讯不存在"}),e.jsx("p",{className:"mb-6 "+(l?"text-gray-400":"text-gray-600"),children:m?"请稍后重试或返回资讯列表":"您访问的资讯不存在或已被删除。"}),e.jsx("button",{onClick:()=>i("/news"),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg",children:"返回资讯列表"})]})})}):e.jsx("div",{className:(l?"bg-gray-900":"bg-gray-50")+" min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:(l?"bg-gray-800":"bg-white")+" rounded-xl p-8 shadow-md max-w-4xl mx-auto",children:[e.jsxs(s.button,{onClick:()=>i("/news"),className:`mb-6 flex items-center ${l?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"} transition-colors`,whileHover:{x:-5},children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"返回资讯列表"]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:"text-xs px-3 py-1 rounded-full font-medium "+(l?"bg-gray-700":"bg-gray-100"),children:o.category})}),e.jsx(s.h1,{className:"text-3xl font-bold mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:o.title}),e.jsxs("div",{className:"flex justify-between items-center mb-6 text-sm "+(l?"text-gray-400":"text-gray-600"),children:[e.jsx("span",{children:o.date}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-eye mr-1"}),o.views.toLocaleString()]}),e.jsx("span",{children:o.source})]}),e.jsx(s.div,{className:"mb-8 overflow-hidden rounded-xl",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:e.jsx("img",{src:o.image,alt:o.title,className:"w-full h-80 object-cover transition-transform duration-500 hover:scale-105"})}),e.jsx(s.div,{className:"mb-8 text-lg "+(l?"text-gray-300":"text-gray-700"),initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:o.description}),e.jsx(s.div,{className:(l?"text-gray-300":"text-gray-700")+" space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:o.content.split("\n\n").map((t,a)=>e.jsx("p",{children:t},a))}),e.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-700/30",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 "+(l?"text-white":"text-gray-900"),children:"分享资讯"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(s.button,{className:"px-4 py-2 rounded-full text-sm font-medium transition-all "+(l?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),whileHover:{scale:1.05},whileTap:{scale:.98},children:[e.jsx("i",{className:"fab fa-weixin mr-2"})," 微信"]}),e.jsxs(s.button,{className:"px-4 py-2 rounded-full text-sm font-medium transition-all "+(l?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),whileHover:{scale:1.05},whileTap:{scale:.98},children:[e.jsx("i",{className:"fab fa-weibo mr-2"})," 微博"]}),e.jsxs(s.button,{className:"px-4 py-2 rounded-full text-sm font-medium transition-all "+(l?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),whileHover:{scale:1.05},whileTap:{scale:.98},children:[e.jsx("i",{className:"fas fa-link mr-2"})," 复制链接"]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),et=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{id:r}=n(),{isDark:s}=j(),i=a(),[l,o]=t.useState(null),[d,c]=t.useState(!0),[x,m]=t.useState(!1);return t.useEffect(()=>{c(!0),setTimeout(()=>{const e=R.getEventById(r);o(e||null),c(!1)},500)},[r]),d?e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):l?e.jsx("div",{className:"min-h-screen "+(s?"bg-gray-900":"bg-gray-50"),children:e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:`rounded-2xl overflow-hidden shadow-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l.image,alt:l.title,className:"w-full h-64 md:h-80 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end",children:e.jsxs("div",{className:"p-6 text-white",children:[e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium mb-3 "+("upcoming"===l.status?"bg-green-500":"ongoing"===l.status?"bg-yellow-500":"bg-gray-500"),children:"upcoming"===l.status?"即将开始":"ongoing"===l.status?"进行中":"已结束"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:l.title}),e.jsx("p",{className:"text-sm md:text-base opacity-90",children:l.description})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-calendar-alt text-primary text-xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium "+(s?"text-gray-300":"text-gray-600"),children:"活动时间"}),e.jsxs("p",{className:s?"text-gray-100":"text-gray-900",children:[l.startDate," ",l.startTime&&`(${l.startTime})`," - ",l.endDate," ",l.endTime&&`(${l.endTime})`]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-primary text-xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium "+(s?"text-gray-300":"text-gray-600"),children:"活动地点"}),e.jsx("p",{className:s?"text-gray-100":"text-gray-900",children:l.location||(l.onlineLink?"线上活动":"未指定")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-users text-primary text-xl"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium "+(s?"text-gray-300":"text-gray-600"),children:"参与人数"}),e.jsxs("p",{className:s?"text-gray-100":"text-gray-900",children:[l.participantCount," 人已参与",l.maxParticipants&&` / 最多 ${l.maxParticipants} 人`]})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:l.tags.map((t,a)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs "+(s?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"),children:t},a))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:["completed"!==l.status&&e.jsx("button",{onClick:()=>{m(!0),setTimeout(()=>{m(!1),i("/create",{state:{event:l?.id,prompt:`为活动 "${l?.title}" 创建作品`}})},1500)},disabled:x||Boolean(l.maxParticipants&&l.participantCount>=l.maxParticipants),className:"flex-1 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 bg-primary hover:bg-primary/90 text-white",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"}),"正在注册..."]}):l.maxParticipants&&l.participantCount>=l.maxParticipants?"活动已满":e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-user-plus"}),"立即参与"]})}),e.jsxs("button",{onClick:()=>i("/create"),className:"flex-1 py-3 px-6 rounded-lg font-medium transition-all duration-300 flex items-center justify-center gap-2 "+(s?"bg-gray-700 hover:bg-gray-600 text-white":"bg-white hover:bg-gray-100 text-gray-900 border border-gray-300"),children:[e.jsx("i",{className:"fas fa-paint-brush"}),"开始创作"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:`p-6 rounded-2xl shadow-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"活动详情"}),e.jsx("p",{className:"mb-4 "+(s?"text-gray-300":"text-gray-700"),children:l.description}),l.culturalElements.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium mb-3 "+(s?"text-gray-300":"text-gray-600"),children:"相关文化元素"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.culturalElements.map((t,a)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs "+(s?"bg-gray-700 text-gray-200":"bg-gray-100 text-gray-800"),children:t},a))})]})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:`p-6 rounded-2xl shadow-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"} mb-6`,children:[e.jsx("h3",{className:"text-sm font-medium mb-4 "+(s?"text-gray-300":"text-gray-600"),children:"活动信息"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fas fa-calendar-alt text-primary text-lg mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium "+(s?"text-gray-400":"text-gray-500"),children:"活动时间"}),e.jsxs("p",{className:s?"text-gray-200":"text-gray-800",children:[l.startDate," ",l.startTime&&`(${l.startTime})`,e.jsx("br",{}),"至",e.jsx("br",{}),l.endDate," ",l.endTime&&`(${l.endTime})`]})]})]})})]}),e.jsxs("div",{className:`p-6 rounded-2xl shadow-lg ${s?"bg-gray-800":"bg-white"} border ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h3",{className:"text-sm font-medium mb-4 "+(s?"text-gray-300":"text-gray-600"),children:"相关推荐"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors",onClick:()=>i("/events"),children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=128x128&prompt=Traditional%20culture%20event%20thumbnail",alt:"相关活动",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium truncate "+(s?"text-gray-200":"text-gray-800"),children:"更多文化活动"}),e.jsx("p",{className:"text-xs "+(s?"text-gray-400":"text-gray-500"),children:"探索其他精彩活动"})]})]})})]})]})]})]})}):e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"活动不存在"}),e.jsx("p",{className:"mb-6",children:"您访问的活动可能已经结束或被删除"}),e.jsx("button",{onClick:()=>i("/events"),className:"px-6 py-3 rounded-lg font-medium transition-colors bg-primary hover:bg-primary/90 text-white",children:"返回活动列表"})]})})}},Symbol.toStringTag,{value:"Module"})),tt=()=>{const[t,a]=o.useState(0);return e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-blue-700",children:"✅ React 状态工作正常"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>a(t-1),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"减 1"}),e.jsx("span",{className:"text-xl font-bold",children:t}),e.jsx("button",{onClick:()=>a(t+1),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"加 1"})]})]})},at=()=>{const[t,a]=o.useState(!1),[r,s]=o.useState(!1),[i,l]=o.useState(!1),[n,d]=o.useState(!1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"本地图片"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx("img",{src:"/images/placeholder-image.jpg",alt:"本地占位图",className:"w-full h-full object-cover rounded",onLoad:()=>a(!0),onError:()=>s(!0)}),t&&e.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"✅ 加载成功"}),r&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"❌ 加载失败"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["测试本地图片是否能够正常加载。",t?" ✅ 本地图片加载成功":r?" ❌ 本地图片加载失败":" ⏳ 正在加载..."]})})]})]}),e.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-pink-800 mb-2",children:"外部图片"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx("img",{src:"https://picsum.photos/200/200",alt:"外部测试图",className:"w-full h-full object-cover rounded",onLoad:()=>l(!0),onError:()=>d(!0)}),i&&e.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"✅ 加载成功"}),n&&e.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"❌ 加载失败"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["测试外部图片是否能够正常加载。",i?" ✅ 外部图片加载成功":n?" ❌ 外部图片加载失败":" ⏳ 正在加载..."]})})]})]})]})},rt=()=>{const[t,a]=o.useState(!1);if(t)throw new Error("测试错误处理机制");return e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"错误边界测试"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"点击按钮触发一个错误，测试应用的错误边界是否能够正常工作。"}),e.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"触发错误"})]})},st=Object.freeze(Object.defineProperty({__proto__:null,default:()=>e.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"基本功能测试"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"基本渲染"}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-green-700",children:"✅ 页面已成功加载"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"这是一个基本的测试页面，用于验证应用的核心功能是否正常工作。"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"React 状态"}),e.jsx(tt,{})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"图片加载"}),e.jsx(at,{})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"错误处理"}),e.jsx(rt,{})]})]})]})})},Symbol.toStringTag,{value:"Module"})),it=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),s=d(),i=a(),[l,n]=t.useState(""),[o,c]=t.useState({works:[],users:[],categories:[],tags:[]}),[x,m]=t.useState(!0),[g,h]=t.useState(!1);t.useEffect(()=>{const e=new URLSearchParams(s.search).get("query")||"";n(e),e?p(e):(m(!1),h(!0))},[s.search]);const u=(e,t)=>{const a=X.generateRedirectUrl(t,e);i(a),X.trackSearchEvent({query:l,resultType:e,clicked:!0,timestamp:Date.now()})},p=e=>{m(!0),setTimeout(()=>{const t=X.searchAll(e);c(t);const a=t.works.length>0||t.users.length>0||t.categories.length>0||t.tags.length>0;h(!a),m(!1)},500)};return e.jsx("div",{className:"min-h-screen "+(r?"bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900":"bg-gradient-to-b from-gray-50 via-white to-gray-50"),children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"搜索结果"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-md dark:shadow-gray-700 mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-search text-gray-500 dark:text-gray-400 text-xl"}),e.jsxs("span",{className:"text-lg text-gray-600 dark:text-gray-300",children:["搜索关键词: ",e.jsx("strong",{className:"text-primary",children:l})]})]})}),x?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-lg font-medium text-gray-600 dark:text-gray-400",children:"正在搜索..."})]})}):null,!x&&g?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block p-6 rounded-full bg-gray-100 dark:bg-gray-800 mb-6",children:e.jsx("i",{className:"fas fa-search text-4xl text-gray-400 dark:text-gray-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"未找到相关结果"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"尝试调整搜索关键词或查看其他分类"}),e.jsx(P,{variant:"primary",onClick:()=>i("/"),children:"返回首页"})]}):null,!x&&!g&&e.jsxs("div",{children:[(()=>{const{works:t}=o;return 0===t.length?null:e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-image text-blue-500"}),"作品结果 (",t.length,")"]}),e.jsx("button",{onClick:()=>i(`/explore?search=${encodeURIComponent(l)}`),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",children:"查看全部"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md dark:shadow-gray-700 hover:shadow-xl dark:hover:shadow-gray-500 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>u(O.WORK,t.title),children:[e.jsx("div",{className:"relative group",children:e.jsx(_,{src:t.thumbnail,alt:t.title,className:"w-full h-48 object-cover",quality:"medium",loading:"lazy"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden",children:e.jsx(_,{src:t.creatorAvatar,alt:t.creator,className:"w-full h-full object-cover",disableFallback:!0})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:t.creator})})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2 line-clamp-2",children:t.title}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.tags.slice(0,3).map((t,a)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full text-xs",children:t},a))}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"far fa-heart"}),e.jsx("span",{children:t.likes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"far fa-comment"}),e.jsx("span",{children:t.comments})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"far fa-eye"}),e.jsx("span",{children:t.views})]})]})]})]},t.id))})]})})(),(()=>{const{users:t}=o;return 0===t.length?null:e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-user text-green-500"}),"用户结果 (",t.length,")"]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:t.map(t=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md dark:shadow-gray-700 hover:shadow-xl dark:hover:shadow-gray-500 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>u(O.USER,t.name),children:e.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden mb-4 border-2 border-primary/50",children:e.jsx(_,{src:t.avatar,alt:t.name,className:"w-full h-full object-cover",disableFallback:!0})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-1",children:t.name}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:[t.works," 作品"]}),e.jsxs("span",{children:[t.followers," 粉丝"]})]}),e.jsx(P,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>{u(O.USER,t.name)},children:"查看主页"})]})},t.id))})]})})(),(()=>{const{categories:t}=o;return 0===t.length?null:e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-folder text-purple-500"}),"分类结果 (",t.length,")"]})}),e.jsx("div",{className:"flex flex-wrap gap-4",children:t.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-700 hover:shadow-xl dark:hover:shadow-gray-500 transition-all duration-300 cursor-pointer hover:scale-105 flex items-center gap-3 px-6 py-4 ring-2 "+(r?"ring-gray-700 hover:ring-primary":"ring-gray-200 hover:ring-primary"),onClick:()=>u(O.CATEGORY,t),children:[e.jsx("i",{className:"fas fa-folder text-purple-500 text-xl"}),e.jsx("span",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:t})]},t))})]})})(),(()=>{const{tags:t}=o;return 0===t.length?null:e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-tag text-yellow-500"}),"标签结果 (",t.length,")"]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.map(t=>e.jsxs("div",{className:"px-5 py-2.5 rounded-full text-sm font-medium transition-all duration-300 cursor-pointer hover:scale-110 shadow-md hover:shadow-lg "+(r?"bg-gray-800 text-gray-200 hover:bg-yellow-600 hover:text-white":"bg-white text-gray-800 hover:bg-yellow-500 hover:text-white"),onClick:()=>u(O.TAG,t),children:[e.jsx("i",{className:"fas fa-tag mr-2"}),t]},t))})]})})()]})]})})}},Symbol.toStringTag,{value:"Module"})),lt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),l=a(),n=d(),[o,c]=t.useState(""),[x,m]=t.useState([]),[g,h]=t.useState(""),[u,p]=t.useState(!1),[y,b]=t.useState([]),[f,v]=t.useState([]),[N,w]=t.useState(""),[k,C]=t.useState(!1),[S,_]=t.useState(!1),[$,A]=t.useState(!1),O=t.useRef(null),[D,R]=t.useState({voice:"female",speed:1,pitch:0}),[L,M]=t.useState([]),U=[{id:"sketch",title:"一键国潮设计",description:"自动生成国潮风格设计方案",icon:"palette",color:"purple"},{id:"pattern",title:"文化资产嵌入",description:"智能嵌入传统文化元素与纹样",icon:"gem",color:"yellow"},{id:"filter",title:"AI滤镜",description:"增强作品表现力的独特滤镜",icon:"filter",color:"blue"},{id:"trace",title:"文化溯源",description:"设计中文化元素来源的提示",icon:"book",color:"green"}],q={sketch:1280,pattern:940,filter:1560,trace:820},B=new URLSearchParams(n.search).get("ab")||"",H=0===y.length?U:U.filter(e=>y.some(t=>e.title.includes(t)||e.description.includes(t))),G={sketch:["国潮配色智能推荐","经典构图模板套用","风格统一与对齐"],pattern:["元素检索与智能嵌入","纹样冲突检测提示","一键生成应用位图"],filter:["风格滤镜一键切换","参数可控与批量应用","快速预览省时省力"],trace:["元素来源溯源提示","文化语境辅注与解释","版权风险友好提醒"]},K={sketch:[{id:"sketch-1",title:"杨柳青年画包装",description:"传统杨柳青年画风格的产品包装设计",prompt:"杨柳青年画·包装焕新·国潮风格·红蓝主色·细腻纹理·古典人物形象·喜庆氛围",category:"包装设计"},{id:"sketch-2",title:"现代国潮海报",description:"融合现代设计元素的国潮风格海报",prompt:"现代国潮海报·几何图形·鲜艳色彩·传统文化元素·动态构图·时尚感·年轻人喜爱",category:"海报设计"},{id:"sketch-3",title:"传统纹样插画",description:"基于传统纹样的插画设计",prompt:"传统纹样插画·对称构图·柔和色调·细腻线条·文化底蕴·艺术感",category:"插画设计"}],pattern:[{id:"pattern-1",title:"回纹与祥云融合",description:"将回纹与祥云纹样嵌入现代设计",prompt:"将回纹与祥云纹样嵌入现代海报·保留传统比例与间距·和谐配色·文化融合·视觉平衡",category:"纹样设计"},{id:"pattern-2",title:"传统服饰纹样",description:"适用于服饰设计的传统纹样",prompt:"传统服饰纹样·连续图案·适合丝绸面料·优雅配色·古典美感·现代应用",category:"服饰设计"},{id:"pattern-3",title:"现代家居纹样",description:"适用于家居产品的现代传统纹样",prompt:"现代家居纹样·简约设计·柔和色调·几何变形·传统元素·实用性",category:"家居设计"}],filter:[{id:"filter-1",title:"东方美学滤镜",description:"提升作品东方美学质感的滤镜",prompt:"为插画应用“东方美学”滤镜·提升色彩层次与光影质感·古典韵味·柔和过渡·艺术氛围",category:"图像处理"},{id:"filter-2",title:"国潮复古滤镜",description:"营造复古国潮氛围的滤镜",prompt:"应用国潮复古滤镜·暖色调·胶片质感·颗粒感·复古氛围·怀旧风格",category:"图像处理"},{id:"filter-3",title:"现代简约滤镜",description:"适合现代设计的简约滤镜",prompt:"应用现代简约滤镜·高对比度·清晰线条·简约配色·专业感·时尚设计",category:"图像处理"}],trace:[{id:"trace-1",title:"海河文化溯源",description:"说明海河主题作品中的文化元素来源",prompt:"说明海河主题海报里的文化元素来源，并给出参考链接·历史背景·文化意义·视觉表现·准确性",category:"文化研究"},{id:"trace-2",title:"传统工艺溯源",description:"追溯传统工艺元素的历史背景",prompt:"追溯传统工艺元素的历史背景·工艺特点·文化价值·现代传承·创新应用",category:"文化研究"},{id:"trace-3",title:"民俗文化解读",description:"解读作品中的民俗文化元素",prompt:"解读作品中的民俗文化元素·象征意义·历史渊源·地域特色·文化传承",category:"文化研究"}]},J={sketch:"杨柳青年画·包装焕新·国潮风格·红蓝主色·细腻纹理",pattern:"将回纹与祥云纹样嵌入现代海报·保留传统比例与间距",filter:"为插画应用“东方美学”滤镜·提升色彩层次与光影质感",trace:"说明海河主题海报里的文化元素来源，并给出参考链接"},V=(e,t)=>{try{window.dispatchEvent(new CustomEvent(e,{detail:t}))}catch{}},Y="details_open"===B,[W,Z]=t.useState(Y?"all":null),X=async()=>{const e=o.trim()||"天津传统文化 创意工具 推荐";p(!0);try{const t=E.generateCreativeDirections(e);m(t);const a=E.recommendCulturalElements(e);v(a),O.current?.abort(),O.current=new AbortController,await E.generateResponse(e,{onDelta:e=>h(e),signal:O.current.signal});try{const r={query:e,dirs:t,elems:a,ts:Date.now()};localStorage.setItem("TOOLS_LAST_RECOMMEND",JSON.stringify(r))}catch{}}catch{}p(!1)},Q=e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ee=t.useRef(null),te=t.useRef(null),ae=t.useRef(!1);return t.useEffect(()=>{const e=new URLSearchParams(n.search),t=e.get("query")||"",a=e.get("mode")||"",r=e.get("from")||"";if(t&&c(t),"home"===r&&ee.current?.scrollIntoView({behavior:"smooth",block:"start"}),"inspire"!==a||ae.current||(ae.current=!0,X()),!$){try{const e=localStorage.getItem("TOOLS_LAST_RECOMMEND");if(e){const t=JSON.parse(e);t?.query&&c(t.query),Array.isArray(t?.dirs)&&m(t.dirs),Array.isArray(t?.elems)&&v(t.elems)}const t=localStorage.getItem("TOOLS_TTS_OPTS");if(t){const e=JSON.parse(t);e&&"object"==typeof e&&R({voice:e.voice||"female",speed:Number(e.speed)||1,pitch:Number(e.pitch)||0})}const a=localStorage.getItem("TOOLS_SAVED_PLANS");if(a){const e=JSON.parse(a);Array.isArray(e)&&M(e)}}catch{}A(!0)}},[n.search]),e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"relative container mx-auto px-6 md:px-8 py-12",children:[e.jsx("div",{className:`pointer-events-none absolute -top-10 -left-10 w-64 h-64 bg-gradient-to-br ${S?"from-indigo-500/20 via-fuchsia-500/20 to-amber-400/20":"from-blue-500/20 via-red-500/20 to-yellow-500/20"} blur-3xl rounded-full`}),e.jsx("div",{className:`pointer-events-none absolute -bottom-10 -right-10 w-72 h-72 bg-gradient-to-tr ${S?"from-cyan-500/15 via-indigo-500/15 to-fuchsia-500/15":"from-red-500/15 via-yellow-500/15 to-blue-500/15"} blur-3xl rounded-full`}),S&&e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-10",style:{backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.08) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsx(T,{title:"创作工具",subtitle:"面向传统文化创新的低门槛 AI 工具集",badgeText:"Beta",theme:S?"indigo":"red",variant:S?"split":"center",size:S?"lg":"md",pattern:S,stats:[{label:"精选",value:"优选"},{label:"风格",value:"融合"},{label:"效率",value:"提升"},{label:"协作",value:"共创"}]}),e.jsx("div",{className:`rounded-2xl p-[1px] bg-gradient-to-br ${S?"from-indigo-500/25 via-fuchsia-500/25 to-cyan-500/25":"from-blue-500/25 via-red-500/25 to-yellow-500/25"} mb-8`,children:e.jsxs("section",{ref:ee,"aria-labelledby":"tools-helper-title","aria-busy":u,onDragOver:e=>{e.preventDefault()},onDrop:async e=>{e.preventDefault();const t=Array.from(e.dataTransfer.files||[]).find(e=>e.type.startsWith("audio/"));if(t)try{const e=await je(t);c(e),await X()}catch(a){i.error(a?.message||"语音识别失败")}},className:(r?"bg-gray-800":"bg-white")+" rounded-2xl p-6 shadow-sm backdrop-blur-sm",children:[e.jsx("h2",{id:"tools-helper-title",className:"font-bold mb-3 text-lg",children:"AI工具助手"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsx(s.button,{type:"button",whileHover:{scale:1.03},onClick:()=>_(e=>!e),className:`px-3 py-1.5 rounded-lg ${S?"bg-indigo-600 hover:bg-indigo-700 text-white":r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} focus:outline-none focus:ring-2 ${S?"focus:ring-indigo-500":r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2`,children:S?"融合模式：开":"融合模式：关"}),e.jsx(s.button,{type:"button",whileHover:{scale:1.03},onClick:()=>{const e=e=>e[Math.floor(Math.random()*e.length)],t=`${e(["杨柳青年画","景德镇瓷器","同仁堂品牌","回纹几何","海河文化"])}·${e(["包装焕新","联名企划","插画风格","导视系统","KV设计"])}·${e(["国潮","极简","东方美学","现代主义","复古潮"])}`;c(t),X()},className:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-3 py-1.5 rounded-lg focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2`,children:"随机灵感"}),e.jsx(s.button,{type:"button",whileHover:{scale:1.03},onClick:()=>{try{const e=localStorage.getItem("TOOLS_LAST_RECOMMEND");if(!e)return;const t=JSON.parse(e);t?.query&&c(t.query),Array.isArray(t?.dirs)&&m(t.dirs),Array.isArray(t?.elems)&&v(t.elems),i.success("已恢复上次推荐")}catch(e){i.error(e?.message||"恢复失败")}},className:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-3 py-1.5 rounded-lg focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2`,children:"恢复上次推荐"})]}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),X()},className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4","aria-describedby":"query-helper",children:[e.jsx("label",{htmlFor:"query-input",className:"sr-only",children:"创作需求或风格"}),e.jsx("input",{id:"query-input",name:"query",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),X())},placeholder:"输入创作需求或风格，智能推荐合适工具","aria-label":"创作需求或风格",className:`w-full px-3 py-2 rounded-lg border ${r?"bg-gray-700 border-gray-600 text-white focus:ring-offset-gray-800":"bg-white border-gray-300"} focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 min-h-[44px] text-base`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"search",inputMode:"text"}),e.jsx("p",{id:"query-helper",className:"sr-only",children:"输入您的创作需求或风格以获得智能推荐"}),e.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center gap-2",children:[e.jsx(s.button,{type:"submit",whileHover:{scale:1.03},"aria-controls":"ai-output",disabled:u,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] flex-1 md:flex-none",children:"智能推荐"}),u&&e.jsx(s.button,{type:"button",whileHover:{scale:1.03},onClick:()=>{O.current?.abort(),p(!1)},className:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-4 py-2 rounded-lg focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 min-h-[44px] flex-1 md:flex-none`,children:"停止生成"}),y.length>0&&e.jsx(s.button,{type:"button",whileHover:{scale:1.03},onClick:()=>{b([])},className:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-4 py-2 rounded-lg focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 min-h-[44px] flex-1 md:flex-none`,children:"清除筛选"}),e.jsx(s.button,{type:"button",onClick:()=>te.current?.click(),className:`${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} px-4 py-2 rounded-lg focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 min-h-[44px] flex-1 md:flex-none`,"aria-label":"上传音频识别",children:"上传音频识别"}),e.jsx("input",{ref:te,type:"file",accept:"audio/*",className:"hidden",onChange:async e=>{const t=e.target.files?.[0];if(t)try{const e=await je(t);c(e),await X()}catch(a){i.error(a?.message||"语音识别失败")}}})]})]}),x.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:x.map((t,a)=>e.jsx("button",{onClick:()=>Q(t),className:"text-xs px-3 py-1 rounded-full border "+(r?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t},a))}):e.jsx("div",{className:(r?"text-gray-500":"text-gray-400")+" text-sm",children:"点击“智能推荐”获得建议与筛选词"}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:f.map((t,a)=>e.jsx("button",{onClick:()=>Q(t),className:"text-xs px-3 py-1 rounded-full border "+(r?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t},a))}),e.jsx("div",{className:"font-bold mb-2",children:"AI建议"}),e.jsx("output",{id:"ai-output",role:"status","aria-live":"polite",className:(r?"text-gray-300":"text-gray-700")+" text-sm whitespace-pre-wrap min-h-[5rem]",children:g||(u?"":"暂无AI建议，请点击“智能推荐”或输入您的创作需求")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(s.button,{whileHover:{scale:1.03},disabled:k||!g.trim(),onClick:async()=>{if(g.trim())try{C(!0);const e=await Ne(g,{voice:D.voice,speed:D.speed,pitch:D.pitch,format:"mp3"});w(e.audioUrl)}catch(e){i.error(e?.message||"朗读失败")}finally{C(!1)}else i.warning("暂无可朗读内容")},className:"px-3 py-1.5 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:k?"朗读中…":"朗读建议"}),e.jsx(s.button,{whileHover:{scale:1.03},disabled:!g.trim(),onClick:async()=>{try{await navigator.clipboard.writeText(g),i.success("建议已复制")}catch{i.error("复制失败")}},className:`${r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} px-3 py-1.5 rounded-lg text-sm focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]`,children:"复制建议"}),e.jsx(s.button,{whileHover:{scale:1.03},type:"button",disabled:!g.trim()&&!N,onClick:()=>{h(""),w(""),i.success("已清空建议")},className:`${r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} px-3 py-1.5 rounded-lg text-sm focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]`,children:"清空建议"}),e.jsx(s.button,{whileHover:{scale:1.03},type:"button",onClick:async()=>{const e=(o||g).trim(),t=new URL(window.location.href);t.searchParams.set("query",e||"创作灵感"),t.searchParams.set("mode","inspire");const a=t.toString();try{await navigator.clipboard.writeText(a),i.success("分享链接已复制")}catch{i.info(a)}},className:"px-3 py-1.5 rounded-lg bg-purple-600 hover:bg-purple-700 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 min-h-[44px]",children:"分享方案"}),e.jsx(s.button,{whileHover:{scale:1.03},type:"button",onClick:()=>{const e=(g||"").trim(),t=(o||"").trim();if(!e&&!t)return void i.warning("暂无可保存内容");const a=e.split("\n")[0]||t||"未命名方案",r=[{id:String(Date.now()),title:a,query:t,aiText:e,ts:Date.now()},...L].slice(0,20);M(r);try{localStorage.setItem("TOOLS_SAVED_PLANS",JSON.stringify(r)),i.success("已保存到“我的方案”")}catch{}},className:`${r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} px-3 py-1.5 rounded-lg text-sm focus:outline-none focus:ring-2 ${r?"focus:ring-gray-500":"focus:ring-gray-400"} focus:ring-offset-2 min-h-[44px]`,children:"保存为我的方案"}),e.jsx(s.button,{whileHover:{scale:1.03},onClick:()=>l(`/create?from=tools&prompt=${encodeURIComponent(g||o)}`),className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 min-h-[44px]",children:"应用到创作中心"})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:["语音",e.jsxs("select",{value:D.voice,onChange:e=>{const t=e.target.value,a={...D,voice:t};R(a);try{localStorage.setItem("TOOLS_TTS_OPTS",JSON.stringify(a))}catch{}},className:(r?"bg-gray-700 text-white":"bg-white text-gray-900")+" border rounded px-2 py-1 flex-1",children:[e.jsx("option",{value:"female",children:"女声"}),e.jsx("option",{value:"male",children:"男声"})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:["语速",e.jsx("input",{type:"range",min:.6,max:1.4,step:.05,value:D.speed,onChange:e=>{const t=Number(e.target.value),a={...D,speed:t};R(a);try{localStorage.setItem("TOOLS_TTS_OPTS",JSON.stringify(a))}catch{}},className:"flex-1"}),e.jsx("span",{children:D.speed.toFixed(2)})]}),e.jsxs("label",{className:"flex items-center gap-2",children:["音调",e.jsx("input",{type:"range",min:-4,max:4,step:1,value:D.pitch,onChange:e=>{const t=Number(e.target.value),a={...D,pitch:t};R(a);try{localStorage.setItem("TOOLS_TTS_OPTS",JSON.stringify(a))}catch{}},className:"flex-1"}),e.jsx("span",{children:D.pitch})]})]}),L.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-bold",children:"我的方案"}),e.jsx("button",{onClick:()=>{M([]);try{localStorage.removeItem("TOOLS_SAVED_PLANS"),i.success("已清空“我的方案”")}catch{}},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"清空"})]}),e.jsx("ul",{className:"space-y-2",children:L.map(t=>e.jsxs("li",{className:`${r?"bg-gray-800":"bg-gray-50"} border ${r?"border-gray-700":"border-gray-200"} rounded p-2`,children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:t.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>(e=>{const t=L.find(t=>t.id===e);if(!t)return;const a=t.aiText||t.query,r=`/create?from=tools&prompt=${encodeURIComponent(a)}`;l(r)})(t.id),className:"px-2 py-1 rounded text-xs bg-blue-600 text-white",children:"应用到创作中心"}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(t.aiText||t.query),i.success("方案已复制")}catch{i.error("复制失败")}},className:(r?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" px-2 py-1 rounded text-xs",children:"复制"}),e.jsx("button",{onClick:()=>(e=>{const t=L.filter(t=>t.id!==e);M(t);try{localStorage.setItem("TOOLS_SAVED_PLANS",JSON.stringify(t))}catch{}})(t.id),className:"px-2 py-1 rounded text-xs bg-red-600 text-white",children:"删除"})]})]},t.id))})]}),N&&e.jsx("audio",{controls:!0,src:N,className:"mt-2 w-full"}),u&&e.jsx("div",{role:"status","aria-live":"polite",className:(r?"text-gray-500":"text-gray-400")+" text-xs mt-2",children:"生成中…"})]})}),e.jsx("h2",{className:"text-xl font-bold mb-6",children:"推荐创作工具"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 will-change-transform",children:H.map((t,a)=>{return e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*a},whileHover:{y:-3,scale:1.01},tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l(`/create?tool=${t.id}`))},onClick:()=>l(`/create?tool=${t.id}`),"aria-label":`${t.title} 卡片`,role:"button",className:"cursor-pointer",children:e.jsx("div",{className:"rounded-2xl p-[1px] bg-gradient-to-br from-blue-500/25 via-red-500/25 to-yellow-500/25",children:e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl p-6 shadow-sm backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.div,{className:"w-9 h-9 rounded-full flex items-center justify-center "+("purple"===t.color?"bg-purple-100 text-purple-600":"yellow"===t.color?"bg-yellow-100 text-yellow-600":"blue"===t.color?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"),whileHover:{rotate:5},children:e.jsx("i",{className:`fas fa-${t.icon}`})}),e.jsx(z,{color:t.color,children:t.title})]}),e.jsx("span",{className:(r?"text-gray-500":"text-gray-400")+" text-xs",children:"精选工具"})]}),e.jsx("h3",{id:`tool-${t.id}-title`,className:"font-bold mb-2",children:t.title}),e.jsx("p",{id:`tool-${t.id}-desc`,className:"text-sm mb-4 "+(r?"text-gray-400":"text-gray-600"),children:t.description}),e.jsxs("div",{className:"text-gray-500 text-xs mb-4 flex items-center gap-1",children:[e.jsx("i",{className:"far fa-user"}),e.jsxs("span",{children:["近7天使用 ",(n=q[t.id],n>=1e3?`${(n/1e3).toFixed(1)}k`:String(n)),"+ "]})]}),W===t.id||"all"===W?e.jsxs(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4",children:[e.jsx("ul",{className:(r?"text-gray-300":"text-gray-700")+" text-sm space-y-1","aria-label":"优势列表",children:(G[t.id]||[]).map((t,a)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),t]},a))}),e.jsxs("div",{className:"mt-2 text-xs opacity-80",children:["示例提示词：",J[t.id]]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(J[t.id]),V("tools:copy_prompt",{tool:t.id})}catch{}},children:"复制示例提示词"}),e.jsx(P,{variant:"secondary",size:"sm",onClick:()=>{l(`/create?tool=${t.id}&prompt=${encodeURIComponent(J[t.id])}`),V("tools:apply_prompt",{tool:t.id})},children:"一键应用到创作"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"创作模板库"}),e.jsx("div",{className:"space-y-2",children:K[t.id]?.map(a=>e.jsx("div",{className:`p-2 rounded-lg border ${r?"border-gray-700 bg-gray-900/50":"border-gray-200 bg-gray-50"} text-xs`,children:e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.title}),e.jsx("div",{className:"opacity-70",children:a.description}),e.jsx("div",{className:"opacity-60 mt-1",children:a.category})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(a.prompt),V("tools:copy_template_prompt",{tool:t.id,template:a.id}),i.success("模板提示词已复制")}catch{}},children:"复制"}),e.jsx(P,{variant:"secondary",size:"sm",onClick:()=>{l(`/create?tool=${t.id}&prompt=${encodeURIComponent(a.prompt)}`),V("tools:apply_template",{tool:t.id,template:a.id})},children:"应用"})]})]})},a.id))})]})]}):null,e.jsx(s.div,{whileHover:{scale:1.02},children:e.jsx(P,{onClick:()=>{V("tools:cta_click",{tool:t.id}),l(`/create?tool=${t.id}`)},ariaLabel:`立即使用 ${t.title}`,variant:"cta_outline"===B?"secondary":"primary",rightIcon:e.jsx("i",{className:"fas fa-arrow-right text-xs"}),fullWidth:!0,children:"立即使用"})}),e.jsx("div",{className:"mt-2",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>Z(e=>e===t.id?null:t.id),"aria-expanded":W===t.id||"all"===W,children:W===t.id||"all"===W?"收起详情":"了解详情"})})]})})},t.title);var n})}),e.jsx(I,{})]}),e.jsx(F,{variant:"simple",simpleText:"© 2025 AI共创平台"})]})}},Symbol.toStringTag,{value:"Module"})),nt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{theme:a,isDark:r,setTheme:s}=j(),[i,n]=t.useState(!1),[o,d]=t.useState(!1),[c,x]=t.useState(()=>{const e=localStorage.getItem("notificationsEnabled");return!e||JSON.parse(e)}),[m,g]=t.useState(()=>{const e=localStorage.getItem("notificationSound");return!e||JSON.parse(e)}),[h,u]=t.useState(()=>localStorage.getItem("notificationFrequency")||"immediate"),[p,y]=t.useState(()=>{const e=localStorage.getItem("dataCollectionEnabled");return!e||JSON.parse(e)}),[b,f]=t.useState(()=>localStorage.getItem("language")||"zh-CN"),[v,N]=t.useState(()=>{const e=localStorage.getItem("fontSize");return e?parseInt(e):16}),[w,k]=t.useState(()=>localStorage.getItem("layoutCompactness")||"standard"),[C,S]=t.useState(()=>{const e=localStorage.getItem("developerMode");return!!e&&JSON.parse(e)}),[_,E]=t.useState(()=>{const e=localStorage.getItem("apiDebugging");return!!e&&JSON.parse(e)}),[$,A]=t.useState(()=>{const e=localStorage.getItem("performanceMonitoring");return!e||JSON.parse(e)});return t.useEffect(()=>{localStorage.setItem("notificationsEnabled",JSON.stringify(c))},[c]),t.useEffect(()=>{localStorage.setItem("notificationSound",JSON.stringify(m))},[m]),t.useEffect(()=>{localStorage.setItem("notificationFrequency",h)},[h]),t.useEffect(()=>{localStorage.setItem("dataCollectionEnabled",JSON.stringify(p))},[p]),t.useEffect(()=>{localStorage.setItem("language",b)},[b]),t.useEffect(()=>{localStorage.setItem("fontSize",v.toString()),document.documentElement.style.fontSize=`${v}px`},[v]),t.useEffect(()=>{localStorage.setItem("layoutCompactness",w)},[w]),t.useEffect(()=>{localStorage.setItem("developerMode",JSON.stringify(C))},[C]),t.useEffect(()=>{localStorage.setItem("apiDebugging",JSON.stringify(_))},[_]),t.useEffect(()=>{localStorage.setItem("performanceMonitoring",JSON.stringify($))},[$]),e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"设置"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"主题"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"当前主题"}),e.jsx("span",{className:(r?"text-blue-400":"text-blue-600")+" font-medium",children:"auto"===a?"自动":"light"===a?"浅色":"dark"===a?"深色":"pink"===a?"粉色":"blue"===a?"蓝色":"绿色"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"w-full py-3 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 "+(r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-blue-50 hover:bg-blue-100 text-blue-600"),children:[e.jsx("i",{className:"fas fa-palette text-lg"}),e.jsx("span",{className:"font-medium",children:"预览并选择主题"})]})]})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"模型与API"}),e.jsx("p",{className:(r?"text-gray-400":"text-gray-600")+" mb-3",children:"配置 Kimi/DeepSeek 密钥与模型参数，仅保存在本机。"}),e.jsx("button",{onClick:()=>n(!0),className:"px-5 py-2.5 rounded-full bg-red-600 hover:bg-red-700 text-white",children:"打开模型设置"})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"通知"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"启用通知"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:e=>x(e.target.checked),className:"sr-only peer"}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"通知声音"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),className:"sr-only peer",disabled:!c}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300 ${c?"":"opacity-50 cursor-not-allowed"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium "+(r?"text-gray-300":"text-gray-700"),children:"通知频率"}),e.jsxs("select",{value:h,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 rounded-lg "+(r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"),disabled:!c,children:[e.jsx("option",{value:"immediate",children:"立即"}),e.jsx("option",{value:"daily",children:"每日"}),e.jsx("option",{value:"weekly",children:"每周"})]})]})]})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"隐私"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"数据收集"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:e=>y(e.target.checked),className:"sr-only peer"}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300`})]})]}),e.jsx("div",{className:"pt-2 border-t ${isDark ? 'border-gray-700' : 'border-gray-200'}",children:e.jsx("button",{onClick:()=>{localStorage.clear(),localStorage.setItem("theme",a),window.location.reload()},className:`w-full text-left px-4 py-2 rounded-lg ${r?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} transition-colors`,children:"清除缓存"})})]})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"界面"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium "+(r?"text-gray-300":"text-gray-700"),children:"语言"}),e.jsxs("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 rounded-lg "+(r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"),children:[e.jsx("option",{value:"zh-CN",children:"中文 (简体)"}),e.jsx("option",{value:"en-US",children:"English"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium "+(r?"text-gray-300":"text-gray-700"),children:["字体大小: ",v,"px"]}),e.jsx("input",{type:"range",min:"12",max:"24",step:"1",value:v,onChange:e=>N(parseInt(e.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer "+(r?"bg-gray-700":"bg-gray-200")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium "+(r?"text-gray-300":"text-gray-700"),children:"布局紧凑度"}),e.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 rounded-lg "+(r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"),children:[e.jsx("option",{value:"compact",children:"紧凑"}),e.jsx("option",{value:"standard",children:"标准"}),e.jsx("option",{value:"spacious",children:"宽松"})]})]})]})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"账户"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(l,{to:"/profile/edit",className:`w-full text-left px-4 py-2 rounded-lg ${r?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} transition-colors flex items-center justify-between`,children:[e.jsx("span",{children:"编辑个人资料"}),e.jsx("i",{className:"fas fa-chevron-right text-sm opacity-50"})]}),e.jsxs(l,{to:"/password/change",className:`w-full text-left px-4 py-2 rounded-lg ${r?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} transition-colors flex items-center justify-between`,children:[e.jsx("span",{children:"修改密码"}),e.jsx("i",{className:"fas fa-chevron-right text-sm opacity-50"})]}),e.jsxs(l,{to:"/account/security",className:`w-full text-left px-4 py-2 rounded-lg ${r?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"} transition-colors flex items-center justify-between`,children:[e.jsx("span",{children:"账号安全设置"}),e.jsx("i",{className:"fas fa-chevron-right text-sm opacity-50"})]})]})]}),e.jsxs("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("h2",{className:"font-medium mb-3",children:"高级"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"开发者模式"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"sr-only peer"}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"API调试"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:e=>E(e.target.checked),className:"sr-only peer",disabled:!C}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300 ${C?"":"opacity-50 cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:r?"text-gray-300":"text-gray-700",children:"性能监控"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:e=>A(e.target.checked),className:"sr-only peer"}),e.jsx("div",{className:`w-11 h-6 rounded-full peer ${r?"bg-gray-700 peer-checked:bg-red-600":"bg-gray-200 peer-checked:bg-red-600"} peer-focus:outline-none transition-all duration-300`})]})]})]})]})]})]}),i&&e.jsx(L,{isOpen:i,onClose:()=>n(!1)}),e.jsx(M,{isOpen:o,onClose:()=>d(!1),onSelectTheme:e=>{s(e),d(!1)},currentTheme:a})]})}},Symbol.toStringTag,{value:"Module"})),ot=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:r,updateUser:s}=t.useContext(w),{isDark:i}=j(),n=a(),[o,d]=t.useState({username:r?.username||"",email:r?.email||"",phone:r?.phone||"",age:r?.age?.toString()||"",interests:r?.interests?.join(", ")||"",avatar:r?.avatar||""}),[c,x]=t.useState(r?.avatar||""),[m,g]=t.useState(null),[h,u]=t.useState(!1),[p,y]=t.useState(""),[b,f]=t.useState(""),v=e=>{const{name:t,value:a}=e.target;d(e=>({...e,[t]:a}))};return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"编辑个人资料"}),e.jsxs(l,{to:"/settings",className:"px-4 py-2 rounded-lg transition-colors "+(i?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"),children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"返回设置"]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto rounded-2xl shadow-md p-6 "+(i?"bg-gray-800":"bg-white"),children:[p&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-lg",children:p}),b&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-lg",children:b}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0),y(""),f("");try{const e={username:o.username,phone:o.phone,age:o.age?parseInt(o.age):void 0,interests:o.interests?o.interests.split(",").map(e=>e.trim()):[],avatar:c};s(e),f("个人资料更新成功！"),setTimeout(()=>{n("/settings")},1e3)}catch(t){y("更新失败，请重试")}finally{u(!1)}},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"头像"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-24 h-24 rounded-full overflow-hidden border-4 ${i?"border-gray-700":"border-gray-200"} shadow-md`,children:c?e.jsx("img",{src:c,alt:"头像预览",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center "+(i?"bg-gray-700":"bg-gray-200"),children:e.jsx("i",{className:"fas fa-user text-4xl ${isDark ? 'text-gray-500' : 'text-gray-400'}"})})}),e.jsx("div",{className:"absolute bottom-0 right-0 bg-red-600 text-white p-2 rounded-full shadow-lg",children:e.jsx("i",{className:"fas fa-camera text-sm"})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"avatar-upload",className:`cursor-pointer px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"} flex items-center space-x-2`,children:[e.jsx("i",{className:"fas fa-upload"}),e.jsx("span",{children:"选择图片"})]}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/"))return void y("请选择图片文件");if(t.size>5242880)return void y("图片大小不能超过5MB");g(t);const e=new FileReader;e.onloadend=()=>{const t=e.result;x(t),d(e=>({...e,avatar:t}))},e.readAsDataURL(t)}},className:"hidden"}),e.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"支持 JPG、PNG 格式，最大 5MB"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"用户名"}),e.jsx("input",{type:"text",name:"username",value:o.username,onChange:v,required:!0,className:`w-full px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入用户名"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"邮箱"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:v,disabled:!0,className:`w-full px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 border-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed"} border`,placeholder:"请输入邮箱"}),e.jsx("p",{className:"text-xs "+(i?"text-gray-500":"text-gray-400"),children:"邮箱不可直接修改，请联系管理员"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"手机号"}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:v,className:`w-full px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入手机号"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"年龄"}),e.jsx("input",{type:"number",name:"age",value:o.age,onChange:v,min:"0",max:"120",className:`w-full px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入年龄"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(i?"text-gray-300":"text-gray-700"),children:"兴趣爱好"}),e.jsx("textarea",{name:"interests",value:o.interests,onChange:v,rows:3,className:`w-full px-4 py-2 rounded-lg transition-colors ${i?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入兴趣爱好，用逗号分隔"})]}),e.jsxs("div",{className:"flex space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n("/settings"),className:"flex-1 py-3 rounded-lg transition-colors "+(i?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"),disabled:h,children:"取消"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 rounded-lg transition-colors bg-red-600 hover:bg-red-700 text-white",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"保存中..."]}):"保存修改"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),dt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:r}=t.useContext(w),{isDark:s}=j(),i=a(),[n,o]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=t.useState(!1),[x,m]=t.useState(""),[g,h]=t.useState(""),u=e=>{const{name:t,value:a}=e.target;o(e=>({...e,[t]:a}))};return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"修改密码"}),e.jsxs(l,{to:"/settings",className:"px-4 py-2 rounded-lg transition-colors "+(s?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"),children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"返回设置"]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto rounded-2xl shadow-md p-6 "+(s?"bg-gray-800":"bg-white"),children:[x&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-lg",children:x}),g&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-lg",children:g}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c(!0),m(""),h(""),n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword!==n.confirmPassword?(m("新密码和确认密码不匹配"),0):/^(?=.*[a-zA-Z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/.test(n.newPassword)||(m("新密码必须至少8个字符，包含至少一个字母和一个数字"),0):(m("请填写所有必填字段"),0))try{if(k&&r?.email){const{error:e}=await k.auth.updateUser({password:n.newPassword});if(e)throw e}else await new Promise(e=>setTimeout(e,500));h("密码修改成功！"),o({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{i("/settings")},2e3)}catch(t){m(t.message||"密码修改失败，请重试")}finally{c(!1)}else c(!1)},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(s?"text-gray-300":"text-gray-700"),children:"当前密码"}),e.jsx("input",{type:"password",name:"currentPassword",value:n.currentPassword,onChange:u,required:!0,className:`w-full px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入当前密码"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(s?"text-gray-300":"text-gray-700"),children:"新密码"}),e.jsx("input",{type:"password",name:"newPassword",value:n.newPassword,onChange:u,required:!0,className:`w-full px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请输入新密码（至少8个字符，包含字母和数字）"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(s?"text-gray-300":"text-gray-700"),children:"确认新密码"}),e.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:u,required:!0,className:`w-full px-4 py-2 rounded-lg transition-colors ${s?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`,placeholder:"请再次输入新密码"})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg transition-colors bg-red-600 hover:bg-red-700 text-white",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"修改中..."]}):"修改密码"})}),e.jsx("div",{className:`text-center text-sm ${s?"text-gray-500":"text-gray-400"} pt-2`,children:e.jsx("p",{children:"密码修改后，请使用新密码重新登录"})})]})]})]})}},Symbol.toStringTag,{value:"Module"})),ct=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:r,enableTwoFactorAuth:s,verifyTwoFactorCode:i}=t.useContext(w),{isDark:n}=j();a();const[o,d]=t.useState(!1),[c,x]=t.useState(!1),[m,g]=t.useState(""),[h,u]=t.useState(!1),[p,y]=t.useState(""),[b,f]=t.useState(""),[v]=t.useState([{id:1,action:"登录",ip:"192.168.1.1",device:"Chrome 120",time:"2024-12-29 14:30:22",location:"北京"},{id:2,action:"修改密码",ip:"192.168.1.1",device:"Chrome 120",time:"2024-12-28 09:15:45",location:"北京"},{id:3,action:"登录",ip:"203.0.113.5",device:"Safari 17",time:"2024-12-27 18:45:12",location:"上海"},{id:4,action:"登录",ip:"192.168.1.1",device:"Chrome 120",time:"2024-12-27 08:20:33",location:"北京"}]);return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"账号安全设置"}),e.jsxs(l,{to:"/settings",className:"px-4 py-2 rounded-lg transition-colors "+(n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"),children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"}),"返回设置"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl shadow-md p-6 "+(n?"bg-gray-800":"bg-white"),children:[e.jsxs("h2",{className:"font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-shield-alt text-lg mr-2 text-blue-500"}),"双因素认证"]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 rounded-lg",children:p}),b&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-300 rounded-lg",children:b}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 text-xl mr-3"}),e.jsx("span",{className:"font-medium "+(n?"text-white":"text-gray-800"),children:"双因素认证已启用"})]}),e.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"登录时，您将需要输入密码和通过邮箱或验证码应用收到的验证码。"}),e.jsx("button",{onClick:()=>{d(!1),f("双因素认证已成功禁用")},className:"px-6 py-2.5 rounded-lg transition-colors "+(n?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-800"),children:"禁用双因素认证"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"启用双因素认证可提高您的账号安全性，登录时需要额外的验证码验证。"}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium "+(n?"text-gray-300":"text-gray-700"),children:"验证码"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"请输入6位验证码",className:`flex-1 px-4 py-2 rounded-lg transition-colors ${n?"bg-gray-700 border-gray-600 text-white focus:border-blue-500":"bg-white border-gray-300 text-gray-800 focus:border-blue-500"} border focus:outline-none focus:ring-2 focus:ring-blue-500/20`}),e.jsx("button",{onClick:async()=>{if(m){u(!0),y(""),f("");try{await i(m)?(d(!0),x(!1),f("双因素认证已成功启用")):y("验证码无效，请重试")}catch(e){y("验证失败，请重试")}finally{u(!1)}}else y("请输入验证码")},className:"px-4 py-2 rounded-lg transition-colors bg-red-600 hover:bg-red-700 text-white",disabled:h,children:h?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"验证"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("p",{children:["验证码已发送到您的邮箱：",r?.email]}),e.jsx("button",{onClick:()=>{},className:"text-blue-500 hover:underline ml-2",disabled:h,children:"重新发送"})]})]}):e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{onClick:async()=>{u(!0),y(""),f("");try{await s()?(x(!0),f("请输入收到的验证码")):y("启用双因素认证失败")}catch(e){y("启用双因素认证失败，请重试")}finally{u(!1)}},className:"px-6 py-2.5 rounded-lg transition-colors bg-red-600 hover:bg-red-700 text-white",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"处理中..."]}):"启用双因素认证"})})]})]}),e.jsxs("div",{className:"rounded-2xl shadow-md p-6 "+(n?"bg-gray-800":"bg-white"),children:[e.jsxs("h2",{className:"font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-laptop text-lg mr-2 text-green-500"}),"登录设备管理"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${n?"border-gray-700 bg-gray-750":"border-gray-200 bg-gray-50"} flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(n?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600"),children:e.jsx("i",{className:"fas fa-desktop text-xl"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium "+(n?"text-white":"text-gray-800"),children:"Chrome 120"}),e.jsx("div",{className:"text-sm text-gray-500",children:"192.168.1.1 | 北京"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"当前设备"})]})]}),e.jsx("button",{className:"px-3 py-1 rounded-lg text-sm transition-colors "+(n?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"),disabled:!0,children:"正在使用"})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${n?"border-gray-700 bg-gray-750":"border-gray-200 bg-gray-50"} flex justify-between items-center`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(n?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-600"),children:e.jsx("i",{className:"fas fa-mobile-alt text-xl"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium "+(n?"text-white":"text-gray-800"),children:"Safari 17"}),e.jsx("div",{className:"text-sm text-gray-500",children:"203.0.113.5 | 上海"}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"2024-12-27 18:45"})]})]}),e.jsx("button",{className:"px-3 py-1 rounded-lg text-sm transition-colors "+(n?"bg-red-900/30 hover:bg-red-800/30 text-red-400":"bg-red-100 hover:bg-red-200 text-red-600"),children:"登出"})]})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-500",children:e.jsx("p",{children:"定期检查您的登录设备，确保没有未授权的访问。"})})]}),e.jsxs("div",{className:"rounded-2xl shadow-md p-6 "+(n?"bg-gray-800":"bg-white"),children:[e.jsxs("h2",{className:"font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-key text-lg mr-2 text-purple-500"}),"密码安全建议"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-3 flex-shrink-0"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"使用至少8个字符的强密码，包含字母、数字和特殊字符"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-3 flex-shrink-0"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"避免在多个网站使用相同的密码"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-3 flex-shrink-0"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"定期更改密码，建议每3个月更新一次"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mt-1 mr-3 flex-shrink-0"}),e.jsx("span",{className:n?"text-gray-300":"text-gray-700",children:"启用双因素认证以增强账号安全性"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs("div",{className:"rounded-2xl shadow-md p-6 "+(n?"bg-gray-800":"bg-white"),children:[e.jsxs("h2",{className:"font-medium mb-4 flex items-center",children:[e.jsx("i",{className:"fas fa-history text-lg mr-2 text-orange-500"}),"最近安全日志"]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:v.map(t=>e.jsxs("div",{className:"p-3 rounded-lg border "+(n?"border-gray-700 bg-gray-750":"border-gray-200 bg-gray-50"),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"font-medium text-sm "+(n?"text-white":"text-gray-800"),children:t.action}),e.jsx("span",{className:"text-xs text-gray-500",children:t.time})]}),e.jsxs("div",{className:"text-xs mt-1 text-gray-500",children:[e.jsx("div",{children:t.device}),e.jsxs("div",{children:[t.ip," | ",t.location]})]})]},t.id))}),e.jsx("button",{className:"w-full mt-4 py-2 rounded-lg text-sm transition-colors "+(n?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"查看全部日志"})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),xt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),r=d(),[l,n]=t.useState(""),[o,c]=t.useState(!1),[x,m]=t.useState([]),[g,h]=t.useState(""),[u,p]=t.useState(null),[y,b]=t.useState(""),[f,v]=t.useState([]),[N,w]=t.useState(!1),[k,C]=t.useState("https://ark-project.tos-cn-beijing.ivolces.com/images/view.jpeg"),[S,$]=t.useState(E.getCurrentModel().id),A=t.useRef(null),I=t.useRef(null),O=t.useRef(null),[T,R]=t.useState(null);t.useEffect(()=>{try{const e=new URLSearchParams(r.search),t=e.get("prompt")||"",a=e.get("image")||"",s=e.get("autostart")||"",i=e.get("saveToTutorialId")||"";if(t&&n(t),a&&(m([{script:t?`根据提示生成：${t}`:"教程封面生成视频",image:a,video:""}]),s&&setTimeout(()=>P(0),100)),i){const e=Number(i);Number.isNaN(e)||R(e)}}catch{}},[r.search]);const P=async e=>{const t=x[e];if(!t||!t.image)return;if(t.image.startsWith("data:"))return void i.error("首帧为本地数据，需使用可公网访问的图片URL");const a=`${l}  --resolution 720p  --duration 5 --camerafixed false`;m(t=>t.map((t,a)=>a===e?{...t,video:"生成中..."}:t));try{const r=await ie({model:"doubao-seedance-1-0-pro-250528",content:[{type:"text",text:a},{type:"image_url",image_url:{url:t.image}}]});if(!r.ok||!r.data?.id){const t=r?.error||r?.data?.error?.code||"UNKNOWN",a="CONFIG_MISSING"===r?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":`创建视频任务失败：${t}`;return i.error(a),void m(a=>a.map((a,r)=>r===e?{...a,video:`视频生成失败：${t}`}:a))}const s=r.data.id,l=await le(s,{intervalMs:1e4,timeoutMs:6e5});if(!l.ok){const t=l?.error||l?.data?.error?.code||"UNKNOWN",a="CONFIG_MISSING"===l?.error?"服务端未配置 DOUBAO_API_KEY，请在 .env.local 设置后重启":`查询视频任务失败：${t}`;return i.error(a),void m(a=>a.map((a,r)=>r===e?{...a,video:`视频生成失败：${t}`}:a))}const n=l.data?.status,o=l.data?.content?.video_url||"";if("succeeded"===n&&o){m(t=>t.map((t,a)=>a===e?{...t,video:o}:t)),i.success("视频生成完成");try{if(T&&o){const e=localStorage.getItem("TUTORIAL_VIDEO_OVERRIDES"),t=e?JSON.parse(e):{};t[T]=o,localStorage.setItem("TUTORIAL_VIDEO_OVERRIDES",JSON.stringify(t)),i.success("已写入教程视频覆盖")}}catch{}}else{const t=l.data?.error?.code||l.data?.error?.message||l.data?.status||"UNKNOWN";i.error(`视频生成失败：${t}`),m(a=>a.map((a,r)=>r===e?{...a,video:`视频生成失败：${t}`}:a))}}catch(r){D.logError(r instanceof Error?r:"SERVER_ERROR",{scope:"generation-video",prompt:l}),i.error("视频生成异常"),m(t=>t.map((t,a)=>a===e?{...t,video:"视频生成失败"}:t))}},z=async e=>{const t=(e??l).trim();if(t){c(!0);try{const e=await oe({prompt:t,n:3,size:"1024x1024",response_format:"url"});if(!e.ok)return D.logError(e.error||"SERVER_ERROR",{scope:"generation",prompt:l}),i.error("生成失败，已回退为占位图"),m([{script:"占位方案A",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20A",video:"方案A视频占位"},{script:"占位方案B",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20B",video:"方案B视频占位"},{script:"占位方案C",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20C",video:"方案C视频占位"}]),void c(!1);const a=e.data,r=a&&(a.data||a.images||[]);if(!r.length)return i.info("接口无返回内容，已提供占位图"),m([{script:"占位方案A",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20A",video:"方案A视频占位"},{script:"占位方案B",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20B",video:"方案B视频占位"},{script:"占位方案C",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20C",video:"方案C视频占位"}]),void c(!1);const s=r.map((e,t)=>{const a=e.url?e.url:e.b64_json?`data:image/png;base64,${e.b64_json}`:"";return{script:`方案${String.fromCharCode(65+t)}脚本`,image:a,video:""}});m(s),i.success("生成完成")}catch(a){D.logError(a instanceof Error?a:"SERVER_ERROR",{scope:"generation",prompt:l}),i.error("生成异常，已回退为占位图"),m([{script:"占位方案A",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20A",video:"方案A视频占位"},{script:"占位方案B",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20B",video:"方案B视频占位"},{script:"占位方案C",image:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x1024&prompt=Tianjin%20design%20C",video:"方案C视频占位"}])}finally{c(!1)}}else i.warning("请输入提示词")};t.useEffect(()=>{if(0===x.length){const e=l.trim()||"天津文化设计灵感";l.trim()||n(e),z(e),setTimeout(()=>F(e),300)}},[]);const F=async e=>{const t=(e??l).trim();if(t){w(!0),b("");try{E.setCurrentModel(S);const e=E.generateCreativeDirections(t);v(e);const a="请用中文分点回答，去除所有 Markdown 标题或装饰符（如###、####、** 等），每点保持简短清晰。",r=(t.match(/[A-Za-z]/g)||[]).length,s=r>(t.match(/[\u4e00-\u9fa5]/g)||[]).length&&r>0?t:`${a}\n\n${t}`,i=await E.generateResponse(s,{onDelta:e=>b(t=>t+e)});b(e=>i||e);const l=i||y||t,n=await Ne(l,{format:"mp3"});h(n.audioUrl),p(null)}catch(a){i.error(a?.message||"优化或朗读失败")}finally{w(!1)}}else i.warning("请输入提示词")};return t.useEffect(()=>{(f.length>0||y)&&I.current?.scrollIntoView({behavior:"smooth",block:"start"})},[f.length,y]),t.useEffect(()=>{x.length>0&&O.current?.scrollIntoView({behavior:"smooth",block:"start"})},[x.length]),e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"AI生成引擎"}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6 mb-6",children:[e.jsx("label",{htmlFor:"prompt-input",className:"mb-2 block",children:"Midjourney风格提示"}),e.jsx("input",{id:"prompt-input",name:"prompt",ref:A,value:l,onChange:e=>n(e.target.value),"aria-label":"请输入提示词",className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx(s.button,{whileHover:{scale:1.03},type:"button",onClick:()=>z(),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:"生成"}),e.jsx(s.button,{whileHover:{scale:1.03},type:"button",onClick:()=>F(),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:N,children:"优化并朗读"}),e.jsxs("select",{"aria-label":"选择模型",value:S,onChange:e=>$(e.target.value),className:(a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" px-3 py-2 rounded-lg border",children:[e.jsx("option",{value:"kimi",children:"Kimi"}),e.jsx("option",{value:"doubao",children:"豆包"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2 items-center",children:[e.jsx("input",{value:k,onChange:e=>C(e.target.value),placeholder:"填写可公网访问的图片URL（用于豆包图片问答）",className:(a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border"}),e.jsx(s.button,{whileHover:{scale:1.03},type:"button",onClick:async()=>{const e=String(k||"").trim();if(e)try{const t=await ne.chatCompletions({messages:[{role:"user",content:[{type:"image_url",image_url:{url:e}},{type:"text",text:"图片主要讲了什么?"}]}],max_tokens:512});if(!t?.ok){const e=t?.error||"SERVER_ERROR";return void i.error(`调用失败：${e}`)}b(t?.data?.choices?.[0]?.message?.content||"（无返回内容）"),I.current?.scrollIntoView({behavior:"smooth",block:"start"}),i.success("豆包多模态问答完成")}catch(t){i.error(t?.message||"豆包调用失败，请检查服务端环境变量或网络")}else i.warning("请填写可公网访问的图片URL")},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"豆包图片问答"})]}),o&&e.jsx("div",{role:"status","aria-live":"polite",className:"mt-2 text-sm",children:"生成中，预期小于30秒"}),e.jsxs("div",{ref:I,role:"region","aria-labelledby":"ai-copy-title",className:`mt-4 rounded-2xl p-4 ${a?"bg-gray-800":"bg-white"} block`,children:[e.jsx("h2",{id:"ai-copy-title",className:"font-medium mb-2",children:"AI文案"}),f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:f.map((t,r)=>e.jsx("button",{onClick:()=>{const e=l?`${l} ${t}`:t;n(e),A.current?.scrollIntoView({behavior:"smooth",block:"center"}),F(e)},className:"text-xs px-3 py-1 rounded-full border transition-colors "+(a?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t},r))}),e.jsx("div",{"aria-live":"polite",className:"text-sm",children:(t=>{const r=e=>{const t=e||"";return t.includes("诊断")?"search":t.includes("优化")?"magic":t.includes("步骤")?"list-check":t.includes("参考")||t.includes("风格")?"book-open":"pen-nib"},s=(e=>{const t=String(e||"").split(/\r?\n/),a=[];let r=null;for(const s of t){let e=s.trim();if(e=e.replace(/^#{1,6}\s*/,""),e=e.replace(/^```+\s*/,""),e=e.replace(/^>+\s*/,""),!e)continue;const t=e.match(/^(\d+)\)\s*(.+?)：/)||e.match(/^([一二三四五六七八九十]+)\)\s*(.+?)：/);if(t){r&&a.push(r),r={title:t[2],items:[]};continue}r||(r={title:"说明",items:[]});const i=e.replace(/^[-•]\s*/,"");r.items.push(i)}return r&&a.push(r),a})(t);return 0===s.length?e.jsx("pre",{className:(a?"bg-gray-800/80 text-gray-100 ring-1 ring-gray-700":"bg-white/80 text-gray-800 ring-1 ring-gray-200")+" whitespace-pre-wrap break-words rounded-2xl p-5 leading-relaxed shadow-md backdrop-blur-sm border border-white/40 dark:border-gray-700/40 min-h-24",children:t}):e.jsx("div",{className:"grid gap-4 md:gap-6",children:s.map((t,s)=>e.jsxs("div",{className:(a?"bg-gray-900/50 ring-1 ring-gray-700":"bg-white/60 ring-1 ring-gray-200")+" rounded-2xl p-5 shadow-lg backdrop-blur-sm border border-white/40 dark:border-gray-700/40",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:`fas fa-${r(t.title)} mr-2 text-blue-600`}),e.jsx("div",{className:"font-semibold tracking-wide",children:t.title})]})}),e.jsx("div",{className:"h-px w-full bg-gradient-to-r from-indigo-500 via-fuchsia-500 to-cyan-500 mb-3 opacity-60"}),e.jsx("ul",{className:"grid md:grid-cols-2 gap-x-6 gap-y-2",children:t.items.map((t,r)=>{const s=String(t||""),i=/^#{1,6}\s*\d+\)\s*/.test(s)||/^#{1,6}\s*[一二三四五六七八九十]+\)\s*/.test(s),l=s.replace(/^#{1,6}\s*\d+\)\s*/,"").replace(/^#{1,6}\s*[一二三四五六七八九十]+\)\s*/,""),n=s.match(/^\*\*(.+?)\*\*：?(.*)$/),o=!!n,d=o&&n?.[1]||"",c=o&&n?.[2]||"",x=o||i?null:s.match(/^([^：:]+)[:：]\s*(.+)$/),m=o||i?null:s.match(/^(\d+|[一二三四五六七八九十]+)[\.、]\s*(.+)$/);return e.jsx("li",{className:i?"md:col-span-2 flex items-center py-1":"flex items-start py-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-angle-right mr-2 text-blue-600"}),e.jsx("span",{className:(a?"text-gray-100":"text-gray-800")+" text-sm font-semibold tracking-wide",children:l})]}):o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 mr-2 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800",children:d}),e.jsx("span",{className:(a?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:c})]}):x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 ring-1 ring-blue-200 mr-2 dark:bg-blue-900/20 dark:text-blue-300 dark:ring-blue-800",children:x[1]}),e.jsx("span",{className:(a?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:x[2]})]}):m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 ring-1 ring-gray-300 mr-2 dark:bg-gray-700 dark:text-gray-200 dark:ring-gray-600",children:m[1]}),e.jsx("span",{className:(a?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:m[2]})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mt-1 mr-2 h-1.5 w-1.5 rounded-full bg-gradient-to-r from-indigo-500 to-fuchsia-500"}),e.jsx("span",{className:(a?"text-gray-200":"text-gray-700")+" text-sm md:text-base leading-relaxed md:leading-7 break-words max-w-[68ch]",children:s})]})},r)})})]},s))})})(y)}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button","aria-label":"朗读文案",onClick:async()=>{const e=y.trim()?y:l.trim();if(e)try{const t=await Ne(e,{format:"mp3"});h(t.audioUrl),p(null)}catch(t){i.error(t?.message||"朗读失败")}else i.warning("请先生成文案或填写提示")},className:"text-sm px-3 py-1 rounded-md bg-green-600 text-white",disabled:!y.trim()&&!l.trim(),children:"朗读"}),e.jsx("button",{type:"button","aria-label":"复制文案",onClick:async()=>{const e=y.trim()?y:l.trim();if(e)try{await navigator.clipboard.writeText(e),i.success("文案已复制")}catch{i.error("复制失败")}else i.warning("暂无可复制内容")},className:(a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" text-sm px-3 py-1 rounded-md",children:"复制文案"}),e.jsx("button",{type:"button","aria-label":"应用到提示词",onClick:()=>{const e=y.trim()?y:l.trim();e?(n(e),A.current?.scrollIntoView({behavior:"smooth",block:"center"})):i.warning("暂无可应用内容")},className:(a?"bg-gray-700 text-white":"bg-gray-100 text-gray-900")+" text-sm px-3 py-1 rounded-md",children:"应用到提示词"})]}),N&&e.jsx("div",{role:"status","aria-live":"polite",className:(a?"text-gray-500":"text-gray-400")+" text-xs mt-2",children:"生成中…"}),g&&e.jsx("audio",{controls:!0,src:g,className:"mt-2 w-full"})]})]}),e.jsx("div",{ref:O,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:x.map((t,r)=>e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-4",children:[e.jsx(_,{src:t.image,alt:"variant",className:"w-full h-40 object-cover rounded-lg mb-3",ratio:"landscape"}),e.jsx("div",{className:"text-sm mb-2",children:t.script}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(s.button,{whileHover:{scale:1.03},onClick:()=>(async e=>{const t=x[e];if(t?.script)try{const a=await Ne(t.script,{format:"mp3"});h(a.audioUrl),p(e)}catch(a){i.error(a?.message||"朗读失败")}else i.warning("暂无脚本可朗读")})(r),className:"bg-green-600 text-white px-3 py-1 rounded-md",children:"朗读脚本"}),u===r&&g&&e.jsx("audio",{controls:!0,src:g,className:"mt-1 w-full"})]}),t.video&&(t.video.startsWith("http")?e.jsxs("div",{className:(a?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("a",{href:t.video,target:"_blank",rel:"noreferrer",className:"text-blue-600",children:"打开视频"}),e.jsx("button",{className:"text-xs px-2 py-1 rounded "+(a?"bg-gray-600 text-white":"bg-white ring-1 ring-gray-200"),onClick:async()=>{try{await navigator.clipboard.writeText(t.video),i.success("链接已复制")}catch{i.error("复制失败")}},children:"复制链接"})]}),e.jsx("video",{controls:!0,src:`/api/proxy/video?url=${encodeURIComponent(t.video)}`,className:"w-full mt-2 rounded"})]}):e.jsx("div",{className:(a?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm break-all",children:t.video})),e.jsx(s.button,{whileHover:{scale:1.03},onClick:()=>P(r),className:"mt-2 bg-blue-600 text-white px-3 py-1 rounded-md",children:"生成视频"})]},r))})]})}},Symbol.toStringTag,{value:"Module"})),mt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),[r,i]=t.useState(""),[l,n]=t.useState(null),[o,d]=t.useState(""),[c,x]=t.useState(!1);return e.jsx("div",{className:"min-h-screen "+(a?"bg-gray-900 text-white":"bg-white text-gray-900"),children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"用户输入"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"文字输入"}),e.jsx("textarea",{value:r,onChange:e=>{e.target.value.length<=500&&i(e.target.value),d(e.target.value)},className:(a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full h-40 px-4 py-3 rounded-lg border"}),e.jsx("div",{className:"text-xs opacity-60 mt-1",children:"500字限制"}),e.jsx("div",{className:"mt-4",children:"模板"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["把麻花做成赛博朋克风","融合杨柳青年画纹样","适配小红书潮流配色"].map(t=>e.jsx("button",{onClick:()=>{i(t),d(t)},className:"px-3 py-1 rounded-full text-sm border "+(a?"bg-gray-700 text-white border-gray-600":"bg-gray-100 text-gray-800 border-gray-200"),children:t},t))})]}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"语音与图片"}),e.jsx(U,{accept:"audio/*",variant:"audio",title:"上传语音",description:"支持拖拽与点击选择，自动转文字",onFile:async e=>{x(!0);const t=await je(e);i(t),x(!1)},className:"mb-3"}),e.jsx(U,{accept:"image/*",variant:"image",title:"上传图片",description:"支持拖拽与点击选择，自动显示预览",previewUrl:l||void 0,onFile:e=>{const t=URL.createObjectURL(e);n(t)}}),c&&e.jsx("div",{className:"text-sm mt-2",children:"语音转文字中..."})]}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"实时预览"}),e.jsx("div",{className:(a?"bg-gray-700":"bg-gray-50")+" rounded-lg p-4 h-48",children:o||"输入后实时预览将显示在此"}),e.jsx(s.button,{whileHover:{scale:1.03},className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg",children:"继续生成"})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),gt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),s=a(),[l,n]=t.useState(null),[o,d]=t.useState([]);t.useEffect(()=>{try{const e=localStorage.getItem("CREATE_DRAFT");if(e){const t=JSON.parse(e),a={prompt:String(t.prompt||""),selectedResult:"number"==typeof t.selectedResult?t.selectedResult:null,currentStep:"number"==typeof t.currentStep?t.currentStep:1,aiExplanation:String(t.aiExplanation||""),updatedAt:"number"==typeof t.updatedAt?t.updatedAt:Date.now()};n(a)}else n(null);const t=localStorage.getItem("CREATE_HISTORY");if(t){const e=JSON.parse(t);Array.isArray(e)&&d(e)}}catch{n(null)}},[]);const c=t.useMemo(()=>{if(!l)return"";try{return new Date(l.updatedAt).toLocaleString()}catch{return""}},[l]);return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"草稿箱"}),e.jsx("p",{className:(r?"text-gray-400":"text-gray-600")+" mt-2 text-sm",children:"管理你在创作中心保存的本地草稿"})]}),l?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:(r?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg font-bold",children:"AI创作草稿"}),e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full "+(r?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"),children:["步骤 ",l.currentStep,"/3"]})]}),e.jsxs("span",{className:"text-xs "+(r?"text-gray-400":"text-gray-500"),children:["更新于 ",c]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"提示词"}),e.jsx("p",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm",children:l.prompt||"（无）"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"AI说明"}),e.jsx("p",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-lg p-3 text-sm max-h-40 overflow-auto",children:l.aiExplanation||"（暂无说明）"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{s("/create")},className:"px-4 py-2 rounded-full bg-red-600 hover:bg-red-700 text白",children:"继续编辑"}),e.jsx("button",{onClick:()=>{try{localStorage.removeItem("CREATE_DRAFT"),n(null),i.success("草稿已删除")}catch{i.error("删除草稿失败")}},className:(r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200")+" px-4 py-2 rounded-full",children:"删除草稿"})]})]}),e.jsxs("div",{className:(r?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-lg font-bold",children:"历史记录"}),e.jsx("button",{onClick:()=>{try{localStorage.removeItem("CREATE_HISTORY"),d([]),i.success("历史记录已清空")}catch{i.error("清空失败")}},className:"px-3 py-1.5 rounded-full bg-red-600 hover:bg-red-700 text-white text-sm",children:"清空"})]}),0===o.length?e.jsx("div",{className:(r?"text-gray-400":"text-gray-600")+" text-sm",children:"暂无历史快照"}):e.jsx("ul",{className:"space-y-3 max-h-80 overflow-auto",children:o.map((t,a)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 mr-3",children:[e.jsx("div",{className:(r?"text-gray-300":"text-gray-700")+" text-sm truncate",children:t.prompt||"（无提示）"}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["步骤 ",t.currentStep,"/3 · ",new Date(t.updatedAt).toLocaleString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>(e=>{try{localStorage.setItem("CREATE_DRAFT",JSON.stringify(e)),i.success("已恢复到当前草稿"),s("/create")}catch{i.error("恢复失败")}})(t),className:"px-3 py-1 rounded-full bg-red-600 hover:bg-red-700 text-white text-xs",children:"恢复"})})]},`${t.updatedAt}-${a}`))})]})]}):e.jsxs("div",{className:(r?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200")+" rounded-2xl p-8 text-center",children:[e.jsx("i",{className:"fas fa-inbox text-3xl mb-3"}),e.jsx("div",{className:"font-medium mb-1",children:"暂无草稿"}),e.jsx("p",{className:(r?"text-gray-400":"text-gray-600")+" text-sm",children:"去创作中心开始创作并点击“保存草稿”"}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>s("/create"),className:"px-4 py-2 rounded-full bg-red-600 hover:bg-red-700 text-white",children:"前往创作中心"})})]})]})}},Symbol.toStringTag,{value:"Module"})),ht=t.lazy(()=>re(()=>import("./components-other-CUE0A1-z.js").then(e=>e.D),__vite__mapDeps([7,1,2,3,4,5,6,8,9,10,11,12,13,14]))),ut=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),i=a(),[l,n]=t.useState("");return e.jsx("div",{className:"min-h-screen "+(r?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white":"bg-gradient-to-br from-gray-50 via-white to-gray-100 text-gray-900"),children:e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx(T,{title:"天津特色专区",subtitle:"探索天津特色文化、老字号与非遗传承",theme:"heritage",stats:[{label:"津门老字号",value:"精选"},{label:"天津元素",value:"资产"},{label:"非遗传承",value:"导览"},{label:"津味应用",value:"共创"}],pattern:!0,size:"lg"}),e.jsx("section",{className:"mt-8 mb-12",children:e.jsxs("div",{className:"p-6 rounded-2xl shadow-lg "+(r?"bg-gray-800/80 backdrop-blur-sm border border-gray-700":"bg-white/80 backdrop-blur-sm border border-gray-200"),children:[e.jsx("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:e.jsxs(s.div,{className:"relative w-full md:w-80",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[e.jsx("input",{type:"text",placeholder:"搜索活动、模板、体验或品牌",className:"w-full px-5 py-2.5 rounded-full text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-300 "+(r?"bg-gray-700 border border-gray-600 text-white placeholder-gray-400 focus:ring-red-500 focus:ring-offset-gray-800 hover:bg-gray-650":"bg-gray-100 border border-gray-200 text-gray-900 placeholder-gray-500 focus:ring-red-500 focus:ring-offset-white hover:bg-gray-150"),value:l,onChange:e=>n(e.target.value)}),e.jsx("i",{className:"fas fa-search absolute right-4 top-1/2 transform -translate-y-1/2 transition-colors duration-300 "+(r?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-400")})]})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:e.jsx("div",{className:"p-6 rounded-2xl shadow-lg "+(r?"bg-gray-800/80 backdrop-blur-sm border border-gray-700":"bg-white/80 backdrop-blur-sm border border-gray-200"),children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"探索天津老字号历史地图"}),e.jsx("p",{className:"mb-4 "+(r?"text-gray-400":"text-gray-600"),children:"通过交互式地图了解天津老字号的历史分布与文化传承"})]}),e.jsxs("button",{onClick:()=>i("/tianjin/map"),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"} flex items-center gap-2`,children:[e.jsx("i",{className:"fas fa-map-marked-alt"}),"查看天津地图"]})]})})}),e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-t-red-600 border-gray-700"})}),children:e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(ht,{search:l})})})]})})]})})}},Symbol.toStringTag,{value:"Module"})),pt={food:"🍜",retail:"🏪",craft:"🎨",landmark:"🏰",culture:"📚"},yt={food:"bg-yellow-500",retail:"bg-blue-500",craft:"bg-purple-500",landmark:"bg-red-500",culture:"bg-green-500"},bt=[117.1881,39.1252],ft=[117.2315,39.0923],vt=[117.1598,39.1445],jt=[117.1955,39.1278],Nt=[117.0538,39.1402],wt=[117.1995,39.1408],kt=[117.1468,39.1425],Ct=[117.2293,39.0948],St={categories:{food:{name:"餐饮美食",icon:"🍜",color:"bg-yellow-500"},retail:{name:"零售百货",icon:"🏪",color:"bg-blue-500"},craft:{name:"手工艺",icon:"🎨",color:"bg-purple-500"},landmark:{name:"地标建筑",icon:"🏰",color:"bg-red-500"},culture:{name:"文化艺术",icon:"📚",color:"bg-green-500"}},poi:[{id:1,name:"狗不理包子",category:"food",description:"天津著名的传统小吃，以皮薄馅大、鲜香可口著称，有着悠久的历史和文化底蕴。狗不理包子的制作技艺被列入国家级非物质文化遗产名录。",address:"天津市和平区山东路77号",position:{x:44,y:55,lng:bt[0],lat:bt[1]},year:1858,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E狗不理包子%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E天津三绝之一%3C/text%3E%3Ccircle cx='200' cy='400' r='40' fill='%23FF6B35'/%3E%3Ccircle cx='400' cy='400' r='40' fill='%23FF6B35'/%3E%3Ccircle cx='600' cy='400' r='40' fill='%23FF6B35'/%3E%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E狗不理包子%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E传统小吃%3C/text%3E%3Cpath d='M200,400 L250,350 L300,400 L350,350 L400,400 L450,350 L500,400 L550,350 L600,400' stroke='%23FF6B35' stroke-width='8' fill='none'/%3E%3Ctext%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E狗不理包子%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E百年老店%3C/text%3E%3Crect x='250' y='380' width='300' height='60' rx='30' fill='%23FF6B35'/%3E%3Ctext x='400' y='420' font-family='Arial' font-size='28' font-weight='bold' fill='white' text-anchor='middle' dy='0.3em'%3E1858年创立%3C/text%3E%3C/svg%3E"],openingHours:"08:00-22:00",phone:"022-27306590",importance:5,tags:["天津三绝","传统小吃","百年老店"],featuredProducts:["猪肉包子","三鲜包子","蟹黄包子","野菜包子"],honors:["国家级非物质文化遗产","中华老字号","天津名小吃"],historicalSignificance:"狗不理包子始创于1858年，由高贵友创立，是天津传统饮食文化的重要代表，见证了天津近代商业的发展历程。",culturalHeritageLevel:"国家级",relatedPois:[2,3]},{id:2,name:"十八街麻花",category:"food",description:"天津传统名点，以酥脆香甜、久放不绵而闻名，是天津三绝之一。",address:"天津市河西区大沽南路566号",position:{x:50,y:60,lng:ft[0],lat:ft[1]},year:1912,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E十八街麻花%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E天津三绝之一%3C/text%3E%3Cpath d='M200,400 Q300,350 400,400 T600,400' stroke='%23FF6B35' stroke-width='12' fill='none'/%3E%3Cpath d='M200,400 Q300,450 400,400 T600,400' stroke='%23FF6B35' stroke-width='12' fill='none'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E十八街麻花%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E传统名点%3C/text%3E%3Crect x='200' y='380' width='400' height='60' rx='30' fill='%23FF6B35'/%3E%3Ctext x='400' y='420' font-family='Arial' font-size='28' font-weight='bold' fill='white' text-anchor='middle' dy='0.3em'%3E酥脆香甜，久放不绵%3C/text%3E%3C/svg%3E"],openingHours:"09:00-21:00",phone:"022-28326900",importance:4,tags:["天津三绝","传统名点","百年老店"],relatedPois:[1,3]},{id:3,name:"耳朵眼炸糕",category:"food",description:"天津传统风味小吃，以皮酥脆、馅香甜、不腻口而著称，是天津三绝之一。",address:"天津市红桥区北门外大街12号",position:{x:48,y:52,lng:vt[0],lat:vt[1]},year:1900,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E耳朵眼炸糕%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E天津三绝之一%3C/text%3E%3Cellipse cx='300' cy='400' rx='60' ry='40' fill='%23FF6B35'/%3E%3Cellipse cx='500' cy='400' rx='60' ry='40' fill='%23FF6B35'/%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E耳朵眼炸糕%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E传统小吃%3C/text%3E%3Ccircle cx='400' cy='400' r='60' fill='%23FF6B35'/%3E%3Ctext x='400' y='410' font-family='Arial' font-size='32' font-weight='bold' fill='white' text-anchor='middle' dy='0.3em'%3E香%3C/text%3E%3C/svg%3E"],openingHours:"08:30-20:30",phone:"022-27275033",importance:4,tags:["天津三绝","传统小吃","百年老店"],relatedPois:[1,2]},{id:4,name:"劝业场",category:"retail",description:"天津著名的百年老商场，是天津商业的标志性建筑，融合了多种建筑风格。",address:"天津市和平区和平路290号",position:{x:47,y:55,lng:jt[0],lat:jt[1]},year:1928,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E劝业场%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E百年老店%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E劝业场%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E商业地标%3C/text%3E%3C/svg%3E"],openingHours:"10:00-22:00",phone:"022-27211818",importance:5,tags:["百年老店","商业地标","历史建筑"],relatedPois:[7]},{id:5,name:"杨柳青年画",category:"craft",description:"中国四大木版年画之一，以色彩艳丽、题材丰富、构图饱满而著称，具有浓郁的民间艺术特色。",address:"天津市西青区杨柳青镇估衣街23号",position:{x:42,y:48,lng:Nt[0],lat:Nt[1]},year:1600,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E杨柳青年画%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E民间艺术%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E杨柳青年画%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E国家级非遗%3C/text%3E%3C/svg%3E"],openingHours:"09:00-17:00",phone:"022-27940617",importance:5,tags:["民间艺术","国家级非遗","传统工艺"],relatedPois:[6]},{id:6,name:"泥人张彩塑",category:"craft",description:"天津传统民间艺术，以形神兼备、色彩鲜明、做工精细而闻名，是中国泥塑艺术的代表。",address:"天津市南开区古文化街宫北大街通庆里4号",position:{x:45,y:53,lng:wt[0],lat:wt[1]},year:1844,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E泥人张彩塑%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E民间艺术%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E泥人张彩塑%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E传统工艺%3C/text%3E%3C/svg%3E"],openingHours:"09:00-18:00",phone:"022-27353157",importance:5,tags:["民间艺术","国家级非遗","传统工艺"],relatedPois:[5]},{id:7,name:"天津之眼",category:"landmark",description:"世界上唯一建在桥上的摩天轮，是天津的标志性建筑之一，俯瞰天津市区全景。",address:"天津市红桥区李公祠大街与五马路交口",position:{x:44,y:50,lng:kt[0],lat:kt[1]},year:2008,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津之眼%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E现代地标%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津之眼%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E旅游景点%3C/text%3E%3C/svg%3E"],openingHours:"09:30-21:30",phone:"022-26288830",importance:5,tags:["现代地标","旅游景点","城市名片"],relatedPois:[4]},{id:8,name:"天津大剧院",category:"culture",description:"现代化的大型综合剧场，是天津文化艺术的重要阵地，举办各类高水平演出。",address:"天津市河西区平江道58号",position:{x:49,y:58,lng:Ct[0],lat:Ct[1]},year:2012,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津大剧院%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E文化设施%3C/text%3E%3C/svg%3E","data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津大剧院%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E艺术殿堂%3C/text%3E%3C/svg%3E"],openingHours:"根据演出时间而定",phone:"022-83882000",importance:4,tags:["现代建筑","文化设施","艺术殿堂"],featuredProducts:["歌剧演出","音乐会","话剧","舞蹈表演"],honors:["国家大剧院联盟成员","天津市文化地标"],culturalHeritageLevel:"市级",relatedPois:[7]},{id:9,name:"老美华",category:"retail",description:"天津著名的鞋店，以制作传统布鞋而闻名，有着百年历史，是天津传统商业的代表。",address:"天津市和平区和平路290号劝业场底商",position:{x:46,y:55,lng:bt[0]+.01,lat:bt[1]+.01},year:1911,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E老美华%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E百年鞋店%3C/text%3E%3C/svg%3E"],openingHours:"09:30-21:00",phone:"022-27211587",importance:5,tags:["百年老店","传统布鞋","中华老字号"],featuredProducts:["传统布鞋","手工皮鞋","中老年鞋","礼品鞋"],honors:["中华老字号","国家级非物质文化遗产","天津名牌产品"],historicalSignificance:"老美华始创于1911年，由庞鹤年创立，是天津传统商业的代表，见证了天津近代商业的发展历程。",culturalHeritageLevel:"国家级",relatedPois:[4]},{id:10,name:"果仁张",category:"food",description:"天津著名的传统小吃，以制作各种风味果仁而闻名，有着悠久的历史和独特的制作工艺。",address:"天津市南开区古文化街宫北大街10号",position:{x:45,y:52,lng:vt[0]+.01,lat:vt[1]+.01},year:1830,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E果仁张%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E传统小吃%3C/text%3E%3C/svg%3E"],openingHours:"09:00-19:00",phone:"022-27355368",importance:4,tags:["天津名小吃","传统食品","百年老店"],featuredProducts:["五香果仁","琥珀桃仁","麻辣花生","怪味豆"],honors:["中华老字号","天津名小吃","国家级非物质文化遗产"],historicalSignificance:"果仁张始创于1830年，由张惠山创立，是天津传统小吃的代表，制作技艺独特，风味各异。",culturalHeritageLevel:"国家级",relatedPois:[5,6]},{id:11,name:"天津古文化街",category:"landmark",description:"天津著名的文化旅游景点，集传统商业、文化展示、旅游观光于一体，是天津传统文化的重要载体。",address:"天津市南开区东门外大街宫北大街",position:{x:45,y:53,lng:vt[0],lat:vt[1]},year:1985,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津古文化街%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E文化旅游景点%3C/text%3E%3C/svg%3E"],openingHours:"09:00-21:00",phone:"022-27356433",importance:5,tags:["文化旅游","传统商业","天津地标"],featuredProducts:["杨柳青年画","泥人张彩塑","风筝魏风筝","天津特产"],honors:["国家5A级旅游景区","中国历史文化名街","天津市文化地标"],historicalSignificance:"天津古文化街是天津传统文化的重要载体，集中展示了天津的历史文化、传统工艺和民俗风情。",culturalHeritageLevel:"国家级",relatedPois:[5,6]},{id:12,name:"风筝魏",category:"craft",description:"天津著名的风筝制作技艺，以制作精美、造型独特的风筝而闻名，是中国传统手工艺的代表。",address:"天津市南开区古文化街宫南大街12号",position:{x:45,y:54,lng:vt[0]-.01,lat:vt[1]-.01},year:1892,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E风筝魏%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E传统手工艺%3C/text%3E%3C/svg%3E"],openingHours:"09:00-18:00",phone:"022-27356878",importance:4,tags:["传统手工艺","国家级非遗","天津名产"],featuredProducts:["沙燕风筝","巨龙风筝","蝴蝶风筝","人物风筝"],honors:["国家级非物质文化遗产","中华老字号","中国传统工艺珍品"],historicalSignificance:"风筝魏始创于1892年，由魏元泰创立，其制作的风筝以造型精美、工艺精湛、放飞稳定而闻名中外。",culturalHeritageLevel:"国家级",relatedPois:[5,6,11]},{id:13,name:"天津博物馆",category:"culture",description:"天津最大的综合性博物馆，收藏了大量天津历史文化遗产，是了解天津历史文化的重要场所。",address:"天津市河西区平江道62号",position:{x:48,y:59,lng:Ct[0]+.01,lat:Ct[1]+.01},year:1918,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津博物馆%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E综合性博物馆%3C/text%3E%3C/svg%3E"],openingHours:"09:00-16:30（周一闭馆）",phone:"022-83883000",importance:5,tags:["文化设施","历史文物","天津地标"],featuredProducts:["文物展览","历史陈列","临时特展","文创产品"],honors:["国家一级博物馆","天津市爱国主义教育基地"],historicalSignificance:"天津博物馆是天津历史文化的重要载体，收藏了大量珍贵文物，展示了天津从古代到现代的历史发展脉络。",culturalHeritageLevel:"国家级",relatedPois:[8]},{id:14,name:"天津大悦城",category:"retail",description:"天津现代化的大型购物中心，集购物、餐饮、娱乐于一体，是天津商业的新地标。",address:"天津市南开区南门外大街2号",position:{x:46,y:54,lng:wt[0]+.02,lat:wt[1]+.02},year:2011,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津大悦城%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E现代购物中心%3C/text%3E%3C/svg%3E"],openingHours:"10:00-22:00",phone:"022-58100666",importance:4,tags:["现代商业","购物中心","城市地标"],featuredProducts:["时尚服饰","餐饮美食","影院娱乐","儿童乐园"],honors:["天津市商业示范基地","中国购物中心百强"],historicalSignificance:"天津大悦城开业于2011年，是天津现代化商业的代表，成为年轻人购物娱乐的首选场所。",culturalHeritageLevel:"无",relatedPois:[4,9,11]},{id:15,name:"海河夜游",category:"culture",description:"天津著名的旅游项目，乘坐游船欣赏海河两岸的夜景，感受天津的城市魅力。",address:"天津市河北区海河东路大悲院码头",position:{x:43,y:49,lng:kt[0]-.01,lat:kt[1]-.01},year:2e3,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E海河夜游%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E旅游项目%3C/text%3E%3C/svg%3E"],openingHours:"18:00-22:00（夏季）",phone:"022-23246688",importance:4,tags:["旅游项目","城市夜景","海河文化"],featuredProducts:["游船门票","讲解服务","特色航线","夜间表演"],honors:["国家4A级旅游景区","天津市旅游名片"],historicalSignificance:"海河夜游是天津著名的旅游项目，通过游船欣赏海河两岸的夜景，感受天津的城市魅力和历史文化。",culturalHeritageLevel:"无",relatedPois:[7,17]},{id:16,name:"天津图书馆",category:"culture",description:"天津最大的公共图书馆，收藏了大量图书和文献资料，是天津文化事业的重要组成部分。",address:"天津市河西区平江道58号",position:{x:48,y:57,lng:Ct[0]-.01,lat:Ct[1]-.01},year:2012,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津图书馆%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E公共图书馆%3C/text%3E%3C/svg%3E"],openingHours:"09:00-20:30（周一闭馆）",phone:"022-83883600",importance:4,tags:["文化设施","公共服务","知识殿堂"],featuredProducts:["图书借阅","电子资源","讲座活动","阅读空间"],honors:["国家一级图书馆","天津市文化地标"],historicalSignificance:"天津图书馆是天津文化事业的重要组成部分，为市民提供了丰富的图书资源和文化服务。",culturalHeritageLevel:"市级",relatedPois:[8,13]},{id:17,name:"天津站",category:"landmark",description:"天津最大的铁路客运站，是天津交通的重要枢纽，也是天津的标志性建筑之一。",address:"天津市河北区新纬路1号",position:{x:45,y:48,lng:kt[0]+.03,lat:kt[1]+.03},year:1888,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津站%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E交通枢纽%3C/text%3E%3C/svg%3E"],openingHours:"全天开放",phone:"022-60536053",importance:5,tags:["交通枢纽","历史建筑","天津地标"],featuredProducts:["铁路客运","地铁换乘","商业服务","旅游咨询"],honors:["天津市文物保护单位","中国最美火车站"],historicalSignificance:"天津站始建于1888年，是中国最早的火车站之一，经过多次扩建和改造，成为天津交通的重要枢纽和标志性建筑。",culturalHeritageLevel:"市级",relatedPois:[15,18]},{id:18,name:"意大利风情区",category:"landmark",description:"天津著名的历史文化街区，保存了大量意大利风格的建筑，是天津历史文化的重要组成部分。",address:"天津市河北区自由道24号",position:{x:46,y:47,lng:kt[0]+.04,lat:kt[1]+.04},year:1902,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E意大利风情区%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E历史文化街区%3C/text%3E%3C/svg%3E"],openingHours:"全天开放",phone:"022-24455000",importance:4,tags:["历史建筑","文化旅游","异域风情"],featuredProducts:["建筑观光","餐饮娱乐","文化展览","婚纱摄影"],honors:["天津市历史文化街区","国家4A级旅游景区"],historicalSignificance:"意大利风情区始建于1902年，是天津九国租界之一，保存了大量意大利风格的建筑，是天津历史文化的重要组成部分。",culturalHeritageLevel:"市级",relatedPois:[17,19]},{id:19,name:"瓷房子",category:"landmark",description:"天津独特的瓷文化艺术建筑，用大量瓷器装饰而成，是天津的网红打卡地。",address:"天津市和平区赤峰道72号",position:{x:47,y:53,lng:bt[0]+.03,lat:bt[1]+.03},year:2007,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E瓷房子%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E艺术建筑%3C/text%3E%3C/svg%3E"],openingHours:"09:00-18:00",phone:"022-27123366",importance:4,tags:["艺术建筑","网红景点","文化创意"],featuredProducts:["门票参观","纪念品销售","文化讲座","艺术展览"],honors:["天津市文化创意产业示范基地","中国最美建筑"],historicalSignificance:"瓷房子始建于2007年，由张连志先生创建，用大量瓷器装饰而成，成为天津独特的文化艺术建筑和网红打卡地。",culturalHeritageLevel:"无",relatedPois:[18,1,4]},{id:20,name:"天津奥林匹克中心",category:"landmark",description:"天津现代化的体育场馆，举办过多种国际和国内体育赛事，是天津体育事业的重要组成部分。",address:"天津市南开区宾水西道393号",position:{x:49,y:55,lng:Ct[0]+.03,lat:Ct[1]+.03},year:2008,images:["data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23f5f5f5'/%3E%3Ctext x='400' y='300' font-family='Arial' font-size='24' fill='%23333' text-anchor='middle' dy='0.3em'%3E天津奥林匹克中心%3C/text%3E%3Ctext x='400' y='340' font-family='Arial' font-size='16' fill='%23666' text-anchor='middle' dy='0.3em'%3E体育场馆%3C/text%3E%3C/svg%3E"],openingHours:"根据赛事安排",phone:"022-23912111",importance:4,tags:["体育场馆","现代建筑","赛事举办"],featuredProducts:["体育赛事","演唱会","健身服务","参观游览"],honors:["国家AAAA级旅游景区","天津市体育地标"],historicalSignificance:"天津奥林匹克中心始建于2008年，为北京奥运会足球预选赛而建，成为天津体育事业的重要组成部分和现代化体育场馆。",culturalHeritageLevel:"无",relatedPois:[8,13]}]},_t=St.categories,Et=St.poi.map(e=>{let t="";switch(e.category){case"food":t="餐饮美食";break;case"retail":t="零售百货";break;case"craft":t="手工艺";break;case"landmark":t="地标建筑";break;case"culture":t="文化艺术";break;default:t="其他"}return{...e,images:[`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E${e.name}%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E${t}%3C/text%3E%3Ccircle cx='200' cy='400' r='40' fill='%23FF6B35'/%3E%3Ccircle cx='400' cy='400' r='40' fill='%23FF6B35'/%3E%3Ccircle cx='600' cy='400' r='40' fill='%23FF6B35'/%3E%3C/svg%3E`,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E${e.name}%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E${t}%3C/text%3E%3Cpath d='M200,400 Q300,350 400,400 T600,400' stroke='%23FF6B35' stroke-width='12' fill='none'/%3E%3Cpath d='M200,400 Q300,450 400,400 T600,400' stroke='%23FF6B35' stroke-width='12' fill='none'/%3E%3C/svg%3E`,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Cdefs%3E%3ClinearGradient id='bgGradient' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23FFD700;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23FFA500;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='800' height='600' fill='url(%23bgGradient)'/%3E%3Crect x='100' y='100' width='600' height='400' rx='20' fill='rgba(255,255,255,0.9)' stroke='%23FFD700' stroke-width='4'/%3E%3Ctext x='400' y='250' font-family='Arial' font-size='48' font-weight='bold' fill='%23FF6B35' text-anchor='middle' dy='0.3em'%3E${e.name}%3C/text%3E%3Ctext x='400' y='320' font-family='Arial' font-size='24' fill='%236B7280' text-anchor='middle' dy='0.3em'%3E${t}%3C/text%3E%3Crect x='250' y='380' width='300' height='60' rx='30' fill='%23FF6B35'/%3E%3Ctext x='400' y='420' font-family='Arial' font-size='28' font-weight='bold' fill='white' text-anchor='middle' dy='0.3em'%3E历史悠久%3C/text%3E%3C/svg%3E`]}}),$t=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j();t.useState(1);const[r,i]=t.useState("all"),[l,n]=t.useState(null),[o,d]=t.useState(!1),[c,x]=t.useState(()=>{const e={};return Et.forEach(t=>{e[t.id]=t.images.map(()=>!1)}),e}),[m,g]=t.useState(0),[h,u]=t.useState(""),[p]=t.useState("all"),y=t.useMemo(()=>{const e=h.toLowerCase(),t="all"===r,a="all"===p;return Et.filter(s=>{const i=t||s.category===r,l=""===e||s.name&&s.name.toLowerCase().includes(e)||s.description&&s.description.toLowerCase().includes(e);return i&&l&&(a||!0)})},[Et,r,h,p]),b=t.useMemo(()=>[],[]),f=t.useMemo(()=>{const e={"bg-yellow-500":"#eab308","bg-blue-500":"#3b82f6","bg-purple-500":"#8b5cf6","bg-red-500":"#ef4444","bg-green-500":"#10b981"};return y.map(t=>{let a=t.position.x,r=t.position.y;a="number"!=typeof a||isNaN(a)?50:Math.max(0,Math.min(100,a)),r="number"!=typeof r||isNaN(r)?50:Math.max(0,Math.min(100,r));const s=500+20*(a-50),i=500+20*(r-50),l=yt[t.category]||"bg-blue-500",n=e[l]||"#3b82f6";return{id:t.id.toString(),name:t.name,coordinate:{x:s,y:i},category:t.category,description:t.description,color:n,importance:t.importance||1}})},[y]),v=t.useMemo(()=>[],[]);t.useEffect(()=>{(async()=>{const e=Et.map(e=>({poi:e,imageUrl:e.images[0],index:0})).map(({poi:e,imageUrl:t,index:a})=>new Promise(r=>{const s=new Image;s.onload=()=>{x(t=>{const r=[...t[e.id]||Array(e.images.length).fill(!1)];return r[a]=!0,{...t,[e.id]:r}}),r()},s.onerror=()=>{r()},s.src=t}));await Promise.all(e)})()},[]),t.useEffect(()=>{g(0)},[l]);const N=e=>{n(e),d(!0)},w=t.useCallback(e=>{const t=Et.find(t=>t.id.toString()===e);t&&N(t)},[Et]),k=t.useCallback(()=>{d(!1),n(null)},[]);return e.jsxs("div",{className:"min-h-screen "+(a?"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white":"bg-gradient-to-br from-gray-50 via-white to-gray-100 text-gray-900"),children:[e.jsx(T,{title:"天津老字号历史地图",subtitle:"探索天津百年老字号的历史分布与文化传承",theme:"heritage",stats:[{label:"文化资源",value:Et.length.toString()},{label:"文化分类",value:Object.keys(_t).length.toString()},{label:"历史跨度",value:"近200年"},{label:"文化遗产",value:"国家级"}],pattern:!0,size:"lg"}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"p-3 md:p-6 rounded-2xl shadow-lg mb-3 md:mb-6 "+(a?"bg-gray-800/80 backdrop-blur-sm border border-gray-700":"bg-white/80 backdrop-blur-sm border border-gray-200"),children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"搜索老字号或地标...",value:h,onChange:e=>u(e.target.value),className:`w-full pl-10 pr-10 py-2 rounded-lg border ${a?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-gray-100 border-gray-300 text-gray-900 placeholder-gray-500"} focus:outline-none focus:ring-2 focus:ring-red-500 transition-all duration-300`}),e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),h&&e.jsx("button",{onClick:()=>u(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-3 pt-1",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:`px-3 py-1.5 rounded-full text-xs md:text-sm font-medium transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md hover:shadow-lg ${"all"===r?a?"bg-gradient-to-r from-red-600 to-red-700 text-white":"bg-gradient-to-r from-red-500 to-red-600 text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} border border-transparent hover:border-opacity-50`,onClick:()=>i("all"),children:"全部"}),Object.entries(_t).map(([t,s])=>{const l=s.color.replace("bg-","");return e.jsxs("button",{className:`px-3 py-1.5 rounded-full text-xs md:text-sm font-medium transition-all duration-300 ease-in-out transform hover:scale-105 shadow-md hover:shadow-lg flex items-center gap-1.5 ${r===t?(a?`bg-gradient-to-r from-${l}/80 to-${l}`:`bg-gradient-to-r from-${l} to-${l}/80`)+" text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} border border-transparent hover:border-opacity-50`,onClick:()=>i(t),children:[e.jsx("span",{className:"text-base",children:s.icon})," ",e.jsx("span",{className:"hidden sm:inline",children:s.name})]},t)})]})})]})}),e.jsxs("div",{className:"relative w-full rounded-2xl shadow-xl overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-900 border border-gray-100 dark:border-gray-700",style:{height:"800px",minHeight:"500px",maxHeight:"calc(100vh - 100px)"},children:[e.jsx(de,{initialRegions:b,initialPOIs:f,initialPaths:v,onPOIClick:w,onMapClick:k,className:a?"bg-gray-800/80 backdrop-blur-sm":"bg-white/80 backdrop-blur-sm",style:{height:"100%",width:"100%"}}),o&&l&&e.jsxs(s.div,{className:`absolute bottom-16 left-0 right-0 md:bottom-20 md:left-4 md:right-auto md:w-80 lg:w-96 bg-white dark:bg-gray-800 rounded-t-xl md:rounded-xl shadow-2xl border-t md:border ${a?"border-gray-700":"border-gray-200"} overflow-hidden z-50 max-h-[50vh] md:max-h-[70vh]`,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.4,ease:"easeOut"},children:[e.jsxs("div",{className:"relative h-52 overflow-hidden bg-gray-200 dark:bg-gray-700",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent z-10"}),l.images.map((t,r)=>e.jsx("img",{src:t,alt:`${l.name} - 图片 ${r+1}`,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 hover:scale-110 "+(r===m?"opacity-100":"opacity-0"),onLoad:()=>{x(e=>{const t=[...e[l.id]||Array(l.images.length).fill(!1)];return t[r]=!0,{...e,[l.id]:t}})},onError:e=>{const t=e.target;t.src=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23${a?"374151":"e5e7eb"}'/%3E%3Ctext x='200' y='150' font-family='Arial' font-size='20' fill='%23${a?"9ca3af":"6b7280"}' text-anchor='middle' dy='0.3em'%3E${l.name}%3C/text%3E%3Ctext x='200' y='180' font-family='Arial' font-size='14' fill='%23${a?"9ca3af":"6b7280"}' text-anchor='middle' dy='0.3em'%3E图片加载中...%3C/text%3E%3C/svg%3E`,t.alt=`${l.name} 图片`,x(e=>{const t=[...e[l.id]||Array(l.images.length).fill(!1)];return t[r]=!0,{...e,[l.id]:t}})},style:{display:"block"}},r)),e.jsxs("div",{className:"absolute top-3 left-3 bg-black/80 text-white text-xs px-3 py-1 rounded-full backdrop-blur-sm flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-calendar-alt text-xs"}),l.year," 年"]}),l.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 backdrop-blur-sm z-20",onClick:()=>g(e=>(e-1+l.images.length)%l.images.length),children:e.jsx("i",{className:"fas fa-chevron-left text-sm"})}),e.jsx("button",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 backdrop-blur-sm z-20",onClick:()=>g(e=>(e+1)%l.images.length),children:e.jsx("i",{className:"fas fa-chevron-right text-sm"})}),e.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex gap-1.5 z-20",children:l.images.map((t,a)=>e.jsx("button",{className:"w-2 h-2 rounded-full transition-all duration-300 "+(a===m?"bg-white w-6":"bg-white/50 hover:bg-white/70"),onClick:()=>g(a)},a))})]})]}),e.jsxs("div",{className:"p-5 overflow-y-auto max-h-[calc(50vh-140px)] md:max-h-[calc(70vh-140px)] pb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2 dark:text-white",children:l.name}),l.importance&&e.jsxs("div",{className:"mb-3 flex items-center gap-1",children:[Array.from({length:5}).map((t,a)=>e.jsx("i",{className:`fas fa-star ${a<(l.importance||0)?"text-yellow-500":"text-gray-300 dark:text-gray-600"} text-sm`},a)),e.jsx("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["","一般","重要","很重要","非常重要","极其重要"][l.importance]||""})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium "+(a?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800"),children:[pt[l.category]," ",St.categories[l.category]?.name||"其他"]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-map-marker-alt text-xs"}),l.address]})]}),l.tags&&l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.tags.map((t,r)=>e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-700"} hover:opacity-80 transition-opacity`,children:["#",t]},r))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-5 p-4 rounded-xl "+(a?"bg-gray-700/50":"bg-gray-50"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(a?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-800"),children:e.jsx("i",{className:"fas fa-calendar-alt text-xs"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"创立时间"}),e.jsxs("div",{className:"text-sm font-semibold dark:text-white",children:[l.year," 年"]})]})]}),l.openingHours&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(a?"bg-green-900/30 text-green-400":"bg-green-100 text-green-800"),children:e.jsx("i",{className:"fas fa-clock text-xs"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"开放时间"}),e.jsx("div",{className:"text-sm font-semibold dark:text-white",children:l.openingHours})]})]}),l.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(a?"bg-purple-900/30 text-purple-400":"bg-purple-100 text-purple-800"),children:e.jsx("i",{className:"fas fa-phone text-xs"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"联系电话"}),e.jsx("div",{className:"text-sm font-semibold dark:text-white",children:l.phone})]})]}),l.culturalHeritageLevel&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(a?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-800"),children:e.jsx("i",{className:"fas fa-award text-xs"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"遗产级别"}),e.jsx("div",{className:"text-sm font-semibold dark:text-white",children:l.culturalHeritageLevel})]})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 dark:text-white flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-history text-gray-500 dark:text-gray-400"}),"历史背景"]}),e.jsx("p",{className:"text-sm dark:text-gray-300 leading-relaxed",children:l.description})]}),l.historicalSignificance&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 dark:text-white flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-book text-gray-500 dark:text-gray-400"}),"历史意义"]}),e.jsx("p",{className:"text-sm dark:text-gray-300 leading-relaxed",children:l.historicalSignificance})]}),l.featuredProducts&&l.featuredProducts.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 dark:text-white flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-gift text-gray-500 dark:text-gray-400"}),"特色产品"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.featuredProducts.map((t,r)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a?"bg-green-900/30 text-green-400 hover:bg-green-800/30":"bg-green-100 text-green-800 hover:bg-green-200"} hover:opacity-80 transition-all duration-300`,children:t},r))})]}),l.honors&&l.honors.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 dark:text-white flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-trophy text-gray-500 dark:text-gray-400"}),"荣誉资质"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(l.honors||[]).map((t,r)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a?"bg-blue-900/30 text-blue-400 hover:bg-blue-800/30":"bg-blue-100 text-blue-800 hover:bg-blue-200"} hover:opacity-80 transition-all duration-300`,children:t},`honor-${r}`))})]}),l.relatedPois&&l.relatedPois.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-2 dark:text-white flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-compass text-gray-500 dark:text-gray-400"}),"相关推荐"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.relatedPois.map(t=>{const r=Et.find(e=>e.id===t);return r?e.jsxs("button",{className:`px-3 py-2 rounded-lg text-sm font-medium flex items-center gap-2 ${a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200 text-gray-700"} transition-all duration-300 hover:shadow-md`,onClick:()=>N(r),children:[e.jsx("span",{className:`text-lg ${yt[r.category]}`,children:pt[r.category]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium truncate",children:r.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:St.categories[r.category]?.name})]}),e.jsx("i",{className:"fas fa-chevron-right text-xs text-gray-400 dark:text-gray-500"})]},r.id):null})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:`flex-1 py-2 rounded-lg transition-all duration-300 ${a?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"} font-medium text-sm flex items-center justify-center gap-1 shadow-md hover:shadow-lg transform hover:-translate-y-0.5`,onClick:()=>d(!1),children:[e.jsx("i",{className:"fas fa-times"}),"关闭"]}),e.jsxs("button",{className:`flex-1 py-2 rounded-lg transition-all duration-300 ${a?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700"} font-medium text-sm flex items-center justify-center gap-1 shadow-md hover:shadow-lg transform hover:-translate-y-0.5`,children:[e.jsx("i",{className:"fas fa-share-alt"}),"分享"]})]}),e.jsxs("button",{className:`w-full mt-3 py-2 rounded-lg transition-all duration-300 ${a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"} font-medium text-sm flex items-center justify-center gap-1 shadow-md hover:shadow-lg transform hover:-translate-y-0.5`,onClick:()=>window.open("/AR","_blank","width=1000,height=800"),children:[e.jsx("i",{className:"fas fa-vr-cardboard"}),"AR体验"]})]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl shadow-lg mt-6 "+(a?"bg-gray-800/80 backdrop-blur-sm border border-gray-700":"bg-white/80 backdrop-blur-sm border border-gray-200"),children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"地图使用说明"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("i",{className:"fas fa-mouse-pointer text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"点击标记"}),e.jsx("p",{className:"text-sm dark:text-gray-400",children:"点击地图上的标记点查看老字号详细信息"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("i",{className:"fas fa-filter text-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"分类筛选"}),e.jsx("p",{className:"text-sm dark:text-gray-400",children:"使用顶部分类按钮筛选不同类型的老字号"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("i",{className:"fas fa-search-plus text-green-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"缩放控制"}),e.jsx("p",{className:"text-sm dark:text-gray-400",children:"使用鼠标滚轮或地图控件调整地图大小"})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("i",{className:"fas fa-info-circle text-purple-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"了解历史"}),e.jsx("p",{className:"text-sm dark:text-gray-400",children:"探索天津老字号的百年历史与文化传承"})]})]})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),At=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:r,checkMembershipStatus:s,getMembershipBenefits:i}=t.useContext(w),l=a(),[n,o]=t.useState(null),[d,c]=t.useState(!0),[x,m]=t.useState(null);if(t.useEffect(()=>{(async()=>{try{const e=await C.get("/api/membership/benefits");e.ok&&e.data&&o(e.data.benefits)}catch(e){m("获取会员权益失败")}finally{c(!1)}})()},[]),!r)return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"请先登录"}),e.jsx("button",{className:"bg-primary text-white px-6 py-3 rounded-full hover:bg-primary/90 transition-colors",onClick:()=>l("/login"),children:"登录"})]})});const g=s(),h=i();return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("header",{className:"text-center mb-10","aria-label":"会员中心页面标题",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary",children:"会员中心"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"管理您的会员权益"})]}),e.jsx("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-6 mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"member-status-title",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{id:"member-status-title",className:"text-2xl font-bold mb-2 text-gray-900 dark:text-[var(--text-primary)]",children:["您当前是 ","free"===r.membershipLevel?"免费会员":"premium"===r.membershipLevel?"高级会员":"VIP会员"]}),e.jsxs("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] mb-4",children:["会员状态: ",g?e.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-[var(--color-accent)] px-3 py-1 rounded-full text-sm font-medium",children:"有效"}):e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400 px-3 py-1 rounded-full text-sm font-medium",children:"已过期"})]}),r.membershipEnd&&e.jsxs("p",{className:"text-gray-600 dark:text-[var(--text-secondary)]",children:["到期时间: ",e.jsx("span",{className:"font-medium",children:new Date(r.membershipEnd).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-6 md:mt-0 flex flex-col sm:flex-row gap-4",children:["free"!==r.membershipLevel&&e.jsx("button",{className:"bg-gray-100 dark:bg-[var(--bg-tertiary)] text-gray-800 dark:text-[var(--text-primary)] px-6 py-3 rounded-lg hover:bg-gray-200 dark:hover:bg-[var(--bg-hover)] transition-colors w-full sm:w-auto font-medium border border-gray-200 dark:border-[var(--border-primary)]",onClick:async()=>{try{l("/membership/payment",{state:{plan:r?.membershipLevel,renew:!0}})}catch(e){m("续费失败")}},"aria-label":"续费会员",children:"续费"}),"vip"!==r.membershipLevel&&e.jsx("button",{className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors w-full sm:w-auto font-medium hover:shadow-lg",onClick:()=>l("/membership/upgrade"),"aria-label":"升级会员",children:"升级会员"})]})]})}),e.jsxs("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-6 mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"member-benefits-title",children:[e.jsx("h2",{id:"member-benefits-title",className:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"您的权益"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-w-3xl mx-auto",children:h.map((t,a)=>e.jsxs("li",{className:"flex items-center space-x-3 bg-gray-50 dark:bg-[var(--bg-tertiary)] px-4 py-3 rounded-lg border border-gray-100 dark:border-[var(--border-primary)]",children:[e.jsx("span",{className:"text-primary dark:text-[var(--color-primary)]",children:"✓"}),e.jsx("span",{className:"text-gray-700 dark:text-[var(--text-primary)]",children:t})]},a))})]}),e.jsxs("section",{className:"mb-12","aria-labelledby":"upgrade-title",children:[e.jsx("h2",{id:"upgrade-title",className:"text-3xl font-bold mb-8 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"升级会员"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{id:"premium",name:"高级会员",price:99,period:"month",description:"解锁高级AI创作功能",features:["无限AI生成次数","高级AI模型访问","高清作品导出","优先处理队列","专属模板库","去除水印"],popular:!0},{id:"vip",name:"VIP会员",price:199,period:"month",description:"享受顶级AI创作体验",features:["包含高级会员所有权益","专属AI训练模型","一对一设计师服务","商业授权","专属活动邀请","无限作品存储"]}].map(t=>e.jsxs("article",{className:"rounded-2xl overflow-hidden transition-all duration-300 flex flex-col "+("vip"===t.id?"border-2 border-purple-500 dark:border-purple-400 shadow-lg hover:shadow-xl bg-gradient-to-b from-white to-purple-50 dark:from-[var(--bg-secondary)] dark:to-purple-900/20":t.popular?"border-2 border-primary shadow-md hover:shadow-lg bg-white dark:bg-[var(--bg-secondary)]":"border border-gray-200 dark:border-[var(--border-primary)] shadow-sm hover:shadow-md bg-white dark:bg-[var(--bg-secondary)]"),"aria-labelledby":`plan-title-${t.id}`,children:[t.popular&&"premium"===t.id&&e.jsx("div",{className:"bg-primary text-white text-center py-1.5 font-medium","aria-label":"最受欢迎套餐",children:"最受欢迎"}),"vip"===t.id&&e.jsx("div",{className:"bg-purple-600 dark:bg-purple-500 text-white text-center py-1.5 font-medium","aria-label":"顶级会员",children:"顶级会员"}),e.jsxs("div",{className:"p-6 flex-1",children:[e.jsx("h3",{id:`plan-title-${t.id}`,className:"text-xl font-bold mb-2 text-center text-gray-900 dark:text-[var(--text-primary)]",children:t.name}),e.jsxs("div",{className:"flex items-end justify-center mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold "+("vip"===t.id?"text-purple-600 dark:text-purple-400":"text-primary"),children:["¥",t.price]}),e.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-[var(--text-secondary)] ml-1",children:["/",t.period]})]}),e.jsx("p",{className:"text-center mb-4 "+("vip"===t.id?"text-purple-600 dark:text-purple-400":"text-primary"),children:t.description}),e.jsx("ul",{className:"space-y-2.5",children:t.features.map((a,r)=>e.jsxs("li",{className:"flex items-center space-x-3 py-1",children:[e.jsx("span",{className:"flex-shrink-0 "+("vip"===t.id?"text-purple-600 dark:text-purple-400":"text-primary"),children:"✓"}),e.jsx("span",{className:"text-gray-700 dark:text-[var(--text-primary)]",children:a})]},r))})]}),e.jsx("div",{className:"p-6 pt-4",children:e.jsx("button",{className:"w-full py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-[1.02] "+(r.membershipLevel===t.id?"bg-gray-100 dark:bg-[var(--bg-tertiary)] text-gray-500 dark:text-[var(--text-secondary)] cursor-not-allowed border border-gray-200 dark:border-[var(--border-primary)]":"vip"===t.id?"bg-purple-600 dark:bg-purple-500 hover:bg-purple-700 dark:hover:bg-purple-600 text-white hover:shadow-lg":"bg-primary hover:bg-primary/90 text-white hover:shadow-lg"),onClick:()=>(async e=>{try{l("/membership/payment",{state:{plan:e}})}catch(t){m("升级会员失败")}})(t.id),disabled:r.membershipLevel===t.id,"aria-label":`${r.membershipLevel===t.id?"当前会员":"立即升级"}${t.name}`,children:r.membershipLevel===t.id?"当前会员":"立即升级"})})]},t.id))})]}),e.jsxs("section",{className:"bg-white dark:bg-[var(--bg-secondary)] rounded-2xl shadow-md p-8 max-w-5xl mx-auto mb-12 border border-gray-200 dark:border-[var(--border-primary)]","aria-labelledby":"faq-title",children:[e.jsx("h2",{id:"faq-title",className:"text-2xl font-bold mb-8 text-center text-gray-900 dark:text-[var(--text-primary)]",children:"常见问题"}),e.jsxs("div",{className:"space-y-5 max-w-3xl mx-auto",children:[e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"如何升级会员？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"点击上方的升级按钮，选择您想要的会员套餐，完成支付即可升级。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"会员到期后会自动续费吗？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"目前不会自动续费，到期前我们会提醒您手动续费。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"可以退款吗？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"会员购买后7天内可以申请退款，超过7天不支持退款。"})]}),e.jsxs("details",{className:"group border border-gray-100 dark:border-[var(--border-primary)] rounded-xl p-4 transition-all duration-300 hover:border-gray-200 dark:hover:border-[var(--border-secondary)] bg-white dark:bg-[var(--bg-tertiary)]",children:[e.jsxs("summary",{className:"font-medium cursor-pointer list-none flex justify-between items-center text-gray-800 dark:text-[var(--text-primary)]",children:[e.jsx("span",{children:"如何使用会员权益？"}),e.jsx("span",{className:"transition-transform duration-300 group-open:rotate-180 text-primary",children:"▼"})]}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pt-3",children:"升级会员后，您可以直接使用所有会员权益，无需额外操作。"})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),It=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:r,updateMembership:s}=t.useContext(w),i=d(),l=a(),[n,o]=t.useState(!1),[c,x]=t.useState(null),[m,g]=t.useState(!1),[h,u]=t.useState("wechat"),p=i.state?.plan||"premium",y=i.state?.renew||!1,b={premium:{name:"高级会员",price:99,period:"month",duration:2592e6},vip:{name:"VIP会员",price:199,period:"month",duration:2592e6}}[p];return t.useEffect(()=>{r||l("/login")},[r,l]),r&&b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[var(--bg-secondary)] dark:to-[var(--bg-tertiary)] pink:from-[var(--bg-secondary)] pink:to-[var(--bg-tertiary)] py-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:y?"续费会员":"升级会员"}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:y?`续费 ${b.name}`:`升级到 ${b.name}`})]}),m?e.jsxs("div",{className:"bg-white dark:bg-[var(--bg-secondary)] pink:bg-[var(--bg-secondary)] rounded-2xl shadow-xl p-10 text-center transform transition-all hover:shadow-2xl dark:border border-[var(--border-primary)] pink:border border-[var(--border-primary)]",children:[e.jsx("div",{className:"text-8xl mb-6",children:"🎉"}),e.jsx("h2",{className:"text-3xl font-bold mb-3 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"支付成功！"}),e.jsx("p",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] mb-8 text-lg",children:y?"您的会员已成功续费":"您已成功升级会员"}),e.jsx("p",{className:"text-gray-500 dark:text-[var(--text-tertiary)] pink:text-[var(--text-tertiary)] mb-10 text-sm",children:"3秒后将自动跳转到会员中心..."}),e.jsx("button",{className:"bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-full hover:shadow-lg hover:scale-105 transition-all duration-300 font-medium",onClick:()=>l("/membership"),children:"立即前往会员中心"})]}):e.jsxs("div",{className:"bg-white dark:bg-[var(--bg-secondary)] pink:bg-[var(--bg-secondary)] rounded-2xl shadow-xl p-10 transform transition-all hover:shadow-2xl dark:border border-[var(--border-primary)] pink:border border-[var(--border-primary)]",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-5 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] flex items-center",children:[e.jsx("i",{className:"fas fa-crown text-primary mr-3"}),"套餐信息"]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-xl p-6 border border-primary/20 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)]",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"套餐名称"}),e.jsx("span",{className:"font-semibold text-xl text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:b.name})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)]",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"价格"}),e.jsxs("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["¥",b.price]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-[var(--text-secondary)] pink:text-[var(--text-secondary)] text-lg",children:"有效期"}),e.jsx("span",{className:"text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] font-medium text-lg",children:b.period})]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-5 text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)] flex items-center",children:[e.jsx("i",{className:"fas fa-credit-card text-primary mr-3"}),"选择支付方式"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("button",{className:"border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md "+("wechat"===h?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"),onClick:()=>u("wechat"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-green-100 mb-3",children:e.jsx("i",{className:"fab fa-weixin text-3xl text-green-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"微信支付"})]}),e.jsxs("button",{className:"border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md "+("alipay"===h?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"),onClick:()=>u("alipay"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-blue-100 mb-3",children:e.jsx("i",{className:"fab fa-alipay text-3xl text-blue-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"支付宝"})]}),e.jsxs("button",{className:"border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md "+("credit"===h?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"),onClick:()=>u("credit"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-purple-100 mb-3",children:e.jsx("i",{className:"fas fa-credit-card text-3xl text-purple-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"信用卡"})]}),e.jsxs("button",{className:"border-2 rounded-xl p-5 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md "+("unionpay"===h?"border-primary bg-primary/10 scale-105":"border-gray-200 dark:border-[var(--border-secondary)] pink:border-[var(--border-secondary)] hover:border-primary hover:bg-primary/5"),onClick:()=>u("unionpay"),children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full bg-red-100 mb-3",children:e.jsx("i",{className:"fas fa-university text-3xl text-red-600"})}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-[var(--text-primary)] pink:text-[var(--text-primary)]",children:"银联支付"})]})]})]}),e.jsxs("div",{children:[c&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-50/20 pink:bg-red-50/20 text-red-600 p-4 rounded-lg mb-5 flex items-center",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),c]}),e.jsx("button",{className:"w-full bg-gradient-to-r from-primary to-secondary text-white py-5 rounded-full font-semibold text-xl hover:shadow-lg hover:scale-105 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed disabled:scale-100",onClick:async()=>{try{if(o(!0),x(null),await new Promise(e=>setTimeout(e,1500)),(await C.post("/api/payment/create",{plan:p,amount:b.price,paymentMethod:h})).ok){const e=new Date,t=new Date;t.setTime(e.getTime()+b.duration),await s({membershipLevel:p,membershipStatus:"active",membershipStart:e.toISOString(),membershipEnd:t.toISOString()}),g(!0),setTimeout(()=>{l("/membership")},3e3)}else x("创建订单失败")}catch(e){x("支付失败，请稍后重试")}finally{o(!1)}},disabled:n,children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin mr-3 w-6 h-6 border-2 border-white border-t-transparent rounded-full"}),"处理中..."]}):`确认支付 ¥${b.price}`}),e.jsxs("div",{className:"text-center text-gray-500 dark:text-[var(--text-tertiary)] pink:text-[var(--text-tertiary)] mt-5 text-sm",children:["点击支付即表示您同意",e.jsx("a",{href:"/terms",className:"text-primary hover:underline ml-1 font-medium",children:"《会员服务协议》"})]})]})]})]})}):null}},Symbol.toStringTag,{value:"Module"})),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[a,r]=t.useState(null),[s,i]=t.useState(!0),[n,o]=t.useState(null);if(t.useEffect(()=>{(async()=>{try{const e=await C.get("/api/membership/benefits");e.ok&&e.data&&r(e.data.benefits)}catch(e){o("获取会员权益失败")}finally{i(!1)}})()},[]),s)return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent mb-4"}),e.jsx("p",{children:"加载中..."})]})});if(n||!a)return e.jsx("div",{className:"container mx-auto py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"加载失败"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n}),e.jsx("button",{className:"bg-primary text-white px-6 py-3 rounded-full hover:bg-primary/90 transition-colors",onClick:()=>window.location.reload(),children:"重试"})]})});const d=[{id:"free",name:"免费会员",description:"基础AI创作体验",color:"bg-gray-100",textColor:"text-gray-800"},{id:"premium",name:"高级会员",description:"高级AI创作功能",color:"bg-blue-100",textColor:"text-blue-800"},{id:"vip",name:"VIP会员",description:"顶级AI创作体验",color:"bg-purple-100",textColor:"text-purple-800"}],c=Array.from(new Map([...a.free||[],...a.premium||[],...a.vip||[]].map(e=>[e.id,e])).values());return e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"会员权益"}),e.jsx("p",{className:"text-gray-600",children:"选择适合您的会员等级，解锁更多AI创作功能"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-16",children:d.map(t=>e.jsxs("div",{className:`rounded-xl shadow-lg p-6 transition-all duration-300 hover:shadow-xl ${t.color}`,children:[e.jsx("h2",{className:`text-2xl font-bold mb-2 ${t.textColor}`,children:t.name}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"space-y-2",children:[(a[t.id]||[]).slice(0,3).map(t=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-green-500 mt-1",children:"✓"}),e.jsx("div",{className:"text-sm",children:t.name})]},t.id)),(a[t.id]||[]).length>3&&e.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["+",(a[t.id]||[]).length-3," 项更多权益"]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(l,{to:"/membership",className:"inline-block px-6 py-3 rounded-full font-medium transition-colors "+("free"===t.id?"bg-gray-600 hover:bg-gray-700 text-white":"bg-primary hover:bg-primary/90 text-white"),children:"free"===t.id?"立即注册":"立即升级"})})]},t.id))}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"详细权益对比"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-4 px-6 text-left font-medium text-gray-500",children:"权益"}),d.map(t=>e.jsx("th",{className:"py-4 px-6 text-center",children:e.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${t.color} ${t.textColor}`,children:t.name})},t.id))]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsxs("td",{className:"py-4 px-6",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.description})]}),d.map(r=>{const s=(a[r.id]||[]).some(e=>e.id===t.id);return e.jsx("td",{className:"py-4 px-6 text-center",children:s?e.jsx("div",{className:"text-green-500 text-xl",children:"✓"}):e.jsx("div",{className:"text-gray-300 text-xl",children:"✗"})},r.id)})]},t.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-16",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"常见问题"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"会员到期后会怎样？"}),e.jsx("p",{className:"text-gray-600",children:"会员到期后，您的账户将自动降级为免费会员，无法继续使用高级功能。您可以随时续费恢复会员权益。"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"如何升级或降级会员？"}),e.jsx("p",{className:"text-gray-600",children:"您可以在会员中心页面随时升级会员等级。降级将在当前会员周期结束后生效。"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"会员权益可以退款吗？"}),e.jsx("p",{className:"text-gray-600",children:"会员购买后7天内可以申请退款，超过7天不支持退款。退款将按照剩余会员天数比例计算。"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"商业授权是什么意思？"}),e.jsx("p",{className:"text-gray-600",children:"VIP会员享有商业授权，可以将AI生成的作品用于商业用途，包括广告、产品设计、出版物等。"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"专属AI训练模型是什么？"}),e.jsx("p",{className:"text-gray-600",children:"VIP会员可以使用专属AI训练模型，根据自己的需求训练个性化AI模型，生成更符合自己风格的作品。"})]})]})]}),e.jsxs("div",{className:"bg-primary rounded-xl shadow-lg p-8 text-center text-white",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"准备好解锁更多AI创作功能了吗？"}),e.jsx("p",{className:"mb-6",children:"选择适合您的会员等级，开始创作之旅"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsx(l,{to:"/membership",className:"inline-block bg-white text-primary px-8 py-3 rounded-full font-medium hover:bg-gray-100 transition-colors",children:"查看会员套餐"}),e.jsx(l,{to:"/register",className:"inline-block border-2 border-white px-8 py-3 rounded-full font-medium hover:bg-white/10 transition-colors",children:"免费注册"})]})]})]})}},Symbol.toStringTag,{value:"Module"})),Tt=[{id:1,name:"积分兑红包",description:"1000积分可兑换红包",type:"外在"},{id:2,name:"作品商业化分成",description:"优秀作品可参与分成",type:"外在"},{id:3,name:"成就徽章",description:"完成任务解锁徽章",type:"内在"},{id:4,name:"社交分享",description:"分享至小红书/抖音",type:"内在"}],Dt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:t}=j();return e.jsx("div",{className:"min-h-screen "+(t?"bg-gray-900 text-white":"bg-white text-gray-900"),children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"激励系统"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Tt.map((a,r)=>e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*r},className:(t?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"text-sm opacity-70 mb-1",children:a.type}),e.jsx("div",{className:"font-bold mb-2",children:a.name}),e.jsx("div",{className:(t?"text-gray-400":"text-gray-600")+" text-sm",children:a.description})]},a.id))}),e.jsx("div",{className:"mt-8 text-sm opacity-70",children:"参考：根据行业报告，此类系统可提升参与率约50%"})]})})}},Symbol.toStringTag,{value:"Module"})),Rt=new class{POINTS_RECORD_KEY="SECURE_POINTS_RECORDS";pointsRecords=[];currentPoints=0;cache={};CACHE_KEYS=["currentPoints","pointsRecords"];constructor(){this.loadPointsRecords(),this.calculateCurrentPoints()}loadPointsRecords(){try{const e=localStorage.getItem(this.POINTS_RECORD_KEY);e?this.pointsRecords=JSON.parse(e):(this.pointsRecords=[{id:1,source:"系统初始化",type:"system",points:0,date:(new Date).toISOString().split("T")[0],description:"初始积分",balanceAfter:0}],this.savePointsRecords())}catch(e){this.pointsRecords=[]}}savePointsRecords(){try{localStorage.setItem(this.POINTS_RECORD_KEY,JSON.stringify(this.pointsRecords))}catch(e){}}calculateCurrentPoints(){this.currentPoints=this.pointsRecords.reduce((e,t)=>e+t.points,0),this.cache.currentPoints=this.currentPoints}getCurrentPoints(){return void 0!==this.cache.currentPoints?this.cache.currentPoints:(this.calculateCurrentPoints(),this.currentPoints)}getPointsRecords(e,t=20,a=0){let r=[...this.pointsRecords];if(e){if(e.startDate){const t=e.startDate;r=r.filter(e=>e.date>=t)}if(e.endDate){const t=e.endDate;r=r.filter(e=>e.date<=t)}if(e.type&&(r=r.filter(t=>t.type===e.type)),e.search){const t=e.search.toLowerCase();r=r.filter(e=>e.source.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))}}return r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(a,a+t)}getRecentPointsRecords(e=5){const t=`recentRecords_${e}`;if(this.cache[t])return this.cache[t];const a=this.getPointsRecords(void 0,e);return this.cache[t]=a,a}addPoints(e,t,a,r,s){const i={id:this.pointsRecords.length+1,source:t,type:a,points:e,date:(new Date).toISOString().split("T")[0],description:r,relatedId:s,balanceAfter:this.currentPoints+e};return this.pointsRecords.push(i),this.calculateCurrentPoints(),this.savePointsRecords(),this.clearCache(),i}consumePoints(e,t,a,r,s){if(e>this.currentPoints)throw new Error("积分不足");const i={id:this.pointsRecords.length+1,source:t,type:a,points:-e,date:(new Date).toISOString().split("T")[0],description:r,relatedId:s,balanceAfter:this.currentPoints-e};return this.pointsRecords.push(i),this.calculateCurrentPoints(),this.savePointsRecords(),this.clearCache(),i}getPointsSourceStats(){if(this.cache.pointsSourceStats)return this.cache.pointsSourceStats;const e={achievement:0,task:0,daily:0,consumption:0,exchange:0,other:0};return this.pointsRecords.forEach(t=>{const a=t.type in e?t.type:"other";e[a]+=t.points}),this.cache.pointsSourceStats=e,e}clearCache(e){e?e.forEach(e=>{delete this.cache[e]}):this.CACHE_KEYS.forEach(e=>{delete this.cache[e]})}resetCache(){this.cache={}}},Pt=new class{PRODUCTS_KEY="SECURE_PRODUCTS";EXCHANGE_RECORDS_KEY="SECURE_EXCHANGE_RECORDS";PRODUCTS_VERSION_KEY="SECURE_PRODUCTS_VERSION";CURRENT_VERSION=2;products=[];exchangeRecords=[];constructor(){this.loadProducts(),this.loadExchangeRecords()}loadProducts(){try{const e=localStorage.getItem(this.PRODUCTS_KEY),t=localStorage.getItem(this.PRODUCTS_VERSION_KEY);e&&t===String(this.CURRENT_VERSION)?this.products=JSON.parse(e):(localStorage.removeItem(this.PRODUCTS_KEY),localStorage.setItem(this.PRODUCTS_VERSION_KEY,String(this.CURRENT_VERSION)),this.initializeDefaultProducts())}catch(e){this.initializeDefaultProducts()}}initializeDefaultProducts(){this.products=[{id:1,name:"虚拟红包",description:"1000积分兑换10元虚拟红包",points:1e3,stock:100,status:"active",category:"virtual",tags:["红包","虚拟"],imageUrl:"/images/红包.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:2,name:"创意贴纸包",description:"500积分兑换创意贴纸包",points:500,stock:50,status:"active",category:"virtual",tags:["贴纸","虚拟"],imageUrl:"/images/周边商品.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:3,name:"AI创作工具包",description:"2000积分兑换高级AI创作工具包",points:2e3,stock:30,status:"active",category:"service",tags:["AI工具","服务"],imageUrl:"/images/数字壁纸.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:4,name:"专属成就徽章",description:"1500积分兑换专属成就徽章",points:1500,stock:100,status:"active",category:"rights",tags:["徽章","权益"],imageUrl:"/images/限定徽章.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:5,name:"实体创意笔记本",description:"3000积分兑换实体创意笔记本",points:3e3,stock:20,status:"active",category:"physical",tags:["笔记本","实体"],imageUrl:"/images/实物商品.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:6,name:"数字艺术壁纸",description:"800积分兑换精选数字艺术壁纸包",points:800,stock:200,status:"active",category:"virtual",tags:["壁纸","艺术","虚拟"],imageUrl:"/images/数字壁纸.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:7,name:"表情包合集",description:"300积分兑换热门表情包合集",points:300,stock:500,status:"active",category:"virtual",tags:["表情包","虚拟","社交"],imageUrl:"/images/表情包.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:8,name:"虚拟头像框",description:"600积分兑换限定版虚拟头像框",points:600,stock:150,status:"active",category:"virtual",tags:["头像框","虚拟","装饰"],imageUrl:"/images/头像框.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:9,name:"电子书籍会员",description:"2500积分兑换一个月电子书籍会员",points:2500,stock:40,status:"active",category:"service",tags:["电子书","会员","服务"],imageUrl:"/images/电子书会员.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:10,name:"在线课程券",description:"1800积分兑换任意在线课程优惠券",points:1800,stock:60,status:"active",category:"service",tags:["课程","优惠券","学习"],imageUrl:"/images/优惠券.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:11,name:"VIP专属标识",description:"1200积分兑换VIP专属身份标识",points:1200,stock:80,status:"active",category:"rights",tags:["VIP","标识","权益"],imageUrl:"/images/限定称号.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:12,name:"优先体验权",description:"2200积分兑换新功能优先体验权",points:2200,stock:50,status:"active",category:"rights",tags:["优先体验","权益","特权"],imageUrl:"/images/限定头像.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:13,name:"定制马克杯",description:"3500积分兑换定制马克杯",points:3500,stock:15,status:"active",category:"physical",tags:["马克杯","实体","定制"],imageUrl:"/images/实物商品.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:14,name:"创意T恤",description:"4000积分兑换限量版创意T恤",points:4e3,stock:10,status:"active",category:"physical",tags:["T恤","实体","限量"],imageUrl:"/images/实物商品.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:15,name:"音乐会员月卡",description:"1600积分兑换音乐平台会员月卡",points:1600,stock:70,status:"active",category:"service",tags:["音乐","会员","娱乐"],imageUrl:"/images/音乐会员.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:16,name:"游戏皮肤礼包",description:"2800积分兑换热门游戏皮肤礼包",points:2800,stock:35,status:"active",category:"virtual",tags:["游戏","皮肤","虚拟"],imageUrl:"/images/限定皮肤.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:17,name:"个性化签名",description:"900积分兑换AI生成个性化签名",points:900,stock:120,status:"active",category:"service",tags:["签名","AI","个性化"],imageUrl:"/images/数字壁纸.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:18,name:"专属昵称颜色",description:"1100积分兑换专属昵称颜色一个月",points:1100,stock:90,status:"active",category:"rights",tags:["昵称","颜色","权益"],imageUrl:"/images/限定背景.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:19,name:"实体明信片套装",description:"1300积分兑换精美明信片套装",points:1300,stock:45,status:"active",category:"physical",tags:["明信片","实体","收藏"],imageUrl:"/images/实物商品.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},{id:20,name:"虚拟宠物",description:"700积分兑换可爱虚拟宠物",points:700,stock:180,status:"active",category:"virtual",tags:["宠物","虚拟","可爱"],imageUrl:"/images/限定头像.svg",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}],this.saveProducts()}saveProducts(){try{localStorage.setItem(this.PRODUCTS_KEY,JSON.stringify(this.products))}catch(e){}}loadExchangeRecords(){try{const e=localStorage.getItem(this.EXCHANGE_RECORDS_KEY);e?this.exchangeRecords=JSON.parse(e):(this.exchangeRecords=[],this.saveExchangeRecords())}catch(e){this.exchangeRecords=[]}}saveExchangeRecords(){try{localStorage.setItem(this.EXCHANGE_RECORDS_KEY,JSON.stringify(this.exchangeRecords))}catch(e){}}getAllProducts(){return[...this.products]}getProductById(e){return this.products.find(t=>t.id===e)}getUserExchangeRecords(e="current-user"){return[...this.exchangeRecords].filter(t=>t.userId===e).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}exchangeProduct(e,t="current-user"){const a=this.products.find(t=>t.id===e);if(!a)throw new Error("商品不存在");if("active"!==a.status)throw new Error("商品不可用");if(a.stock<=0)throw new Error("商品已售罄");if(Rt.getCurrentPoints()<a.points)throw new Error("积分不足");Rt.consumePoints(a.points,"积分商城","exchange",`兑换商品：${a.name}`,`product_${e}`),a.stock-=1,0===a.stock&&(a.status="sold_out"),a.updatedAt=(new Date).toISOString(),this.saveProducts();const r={id:this.exchangeRecords.length+1,productId:a.id,productName:a.name,points:a.points,date:(new Date).toISOString(),userId:t,status:"completed"};return this.exchangeRecords.push(r),this.saveExchangeRecords(),r}addProduct(e){if(!e.name||""===e.name.trim())throw new Error("商品名称不能为空");if(e.points<=0)throw new Error("所需积分必须大于0");if(e.stock<0)throw new Error("库存数量不能为负数");if(!e.imageUrl||""===e.imageUrl.trim())throw new Error("商品图片URL不能为空");if(!e.description||""===e.description.trim())throw new Error("商品描述不能为空");if(!e.category||""===e.category.trim())throw new Error("商品分类不能为空");if(!e.tags||0===e.tags.length)throw new Error("商品标签不能为空");if(this.products.find(t=>t.name.trim().toLowerCase()===e.name.trim().toLowerCase()))throw new Error("商品名称已存在");const t={...e,id:this.products.length+1,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return this.products.push(t),this.saveProducts(),t}updateProduct(e,t){const a=this.products.findIndex(t=>t.id===e);if(-1===a)return;if(t.name&&""===t.name.trim())throw new Error("商品名称不能为空");if(void 0!==t.points&&t.points<=0)throw new Error("所需积分必须大于0");if(void 0!==t.stock&&t.stock<0)throw new Error("库存数量不能为负数");if(t.imageUrl&&""===t.imageUrl.trim())throw new Error("商品图片URL不能为空");if(t.description&&""===t.description.trim())throw new Error("商品描述不能为空");if(t.category&&""===t.category.trim())throw new Error("商品分类不能为空");if(t.tags&&0===t.tags.length)throw new Error("商品标签不能为空");if(t.name&&""!==t.name.trim()&&this.products.find(a=>a.id!==e&&a.name.trim().toLowerCase()===t.name.trim().toLowerCase()))throw new Error("商品名称已存在");const r={...this.products[a],...t,updatedAt:(new Date).toISOString()};return this.products[a]=r,this.saveProducts(),r}deleteProduct(e){const t=this.products.length;return this.products=this.products.filter(t=>t.id!==e),this.products.length<t&&(this.saveProducts(),!0)}resetProducts(){localStorage.removeItem(this.PRODUCTS_KEY),localStorage.removeItem(this.PRODUCTS_VERSION_KEY),this.loadProducts()}},zt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{isDark:a}=j(),[r,i]=t.useState([]),[l,n]=t.useState("all"),[o,d]=t.useState([]),[c,x]=t.useState(!1),[m,g]=t.useState(0),[h,u]=t.useState(""),[p,y]=t.useState([]);return t.useEffect(()=>{const e=Pt.getAllProducts(),t=Pt.getUserExchangeRecords("current-user"),a=Rt.getCurrentPoints();i(e),y(e),d(t),g(a)},[]),t.useEffect(()=>{let e=[...r];if("all"!==l&&(e=e.filter(e=>e.category===l)),h){const t=h.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t)))}y(e)},[l,h,r]),e.jsx("div",{className:"min-h-screen "+(a?"bg-gray-900 text-white":"bg-white text-gray-900"),children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"积分商城"}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-full px-4 py-2 shadow-md",children:[e.jsx("span",{className:"font-medium",children:"当前积分："}),e.jsx("span",{className:"ml-2 font-bold "+(a?"text-red-400":"text-red-500"),children:m})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"搜索商品...",className:`w-full px-4 py-2 rounded-lg border ${a?"bg-gray-800 border-gray-700":"bg-gray-100 border-gray-300"} focus:outline-none focus:ring-2 focus:ring-red-500`,value:h,onChange:e=>u(e.target.value)})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"全部"},{value:"virtual",label:"虚拟商品"},{value:"physical",label:"实物商品"},{value:"service",label:"服务"},{value:"rights",label:"权益"}].map(t=>e.jsx("button",{onClick:()=>n(t.value),className:"px-4 py-2 rounded-full text-sm font-medium transition-all "+(l===t.value?a?"bg-red-600 text-white":"bg-red-500 text-white":a?"bg-gray-800 hover:bg-gray-700":"bg-white hover:bg-gray-100"),children:t.label},t.value))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((t,l)=>e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*l},className:(a?"bg-gray-800":"bg-white")+" rounded-xl shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold",children:t.name}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a?"bg-red-900 bg-opacity-50":"bg-red-100"} text-red-500`,children:[t.points," 积分"]})]}),e.jsx("p",{className:"mb-4 text-sm "+(a?"text-gray-400":"text-gray-600"),children:t.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map((t,r)=>e.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(a?"bg-gray-700":"bg-gray-100"),children:t},r))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm "+(a?"text-gray-400":"text-gray-600"),children:["库存：",t.stock]}),e.jsx("span",{className:"text-xs mt-1 "+("active"===t.status?"text-green-500":"inactive"===t.status?"text-gray-500":"text-red-500"),children:"active"===t.status?"已上架":"inactive"===t.status?"已下架":"已售罄"})]}),e.jsx("button",{onClick:()=>(e=>{try{const t=Pt.exchangeProduct(e.id,"current-user");d([t,...o]),g(Rt.getCurrentPoints()),i(r.map(t=>t.id===e.id?{...t,stock:t.stock-1}:t)),alert(`兑换成功！消耗${e.points}积分`)}catch(t){alert(t.message)}})(t),disabled:"active"!==t.status||t.stock<=0||m<t.points,className:`px-4 py-2 rounded-lg font-medium transition-colors ${a?m<t.points||t.stock<=0||"active"!==t.status?"bg-gray-700 cursor-not-allowed":"bg-red-600 hover:bg-red-700":m<t.points||t.stock<=0||"active"!==t.status?"bg-gray-200 cursor-not-allowed":"bg-red-500 hover:bg-red-600"} text-white disabled:opacity-50`,children:"active"!==t.status?"已下架":t.stock<=0?"已售罄":m<t.points?"积分不足":"立即兑换"})]})]})]},t.id))}),0===p.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"未找到商品"}),e.jsx("p",{className:"opacity-70",children:"请尝试调整搜索条件或分类"})]}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"兑换记录"}),e.jsx("button",{onClick:()=>x(!c),className:"px-3 py-1 rounded-full text-sm font-medium "+(a?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"),children:c?"隐藏":"查看"})]}),c&&e.jsx(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:(a?"bg-gray-800":"bg-white")+" rounded-xl shadow-md overflow-hidden",children:0===o.length?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"opacity-70",children:"暂无兑换记录"})}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:a?"border-b border-gray-700":"border-b border-gray-200",children:[e.jsx("th",{className:"text-left p-4 text-sm font-medium "+(a?"text-gray-400":"text-gray-600"),children:"商品名称"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium "+(a?"text-gray-400":"text-gray-600"),children:"积分"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium "+(a?"text-gray-400":"text-gray-600"),children:"日期"}),e.jsx("th",{className:"text-left p-4 text-sm font-medium "+(a?"text-gray-400":"text-gray-600"),children:"状态"})]})}),e.jsx("tbody",{children:o.map(t=>e.jsxs("tr",{className:a?"border-b border-gray-700":"border-b border-gray-200",children:[e.jsx("td",{className:"p-4",children:t.productName}),e.jsx("td",{className:"p-4",children:t.points}),e.jsx("td",{className:"p-4 text-sm opacity-70",children:t.date}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===t.status?"bg-green-500 text-white":"pending"===t.status?"bg-yellow-500 text-white":"bg-red-500 text-white"),children:"completed"===t.status?"已完成":"pending"===t.status?"处理中":"已取消"})})]},t.id))})]})})]})]})})}},Symbol.toStringTag,{value:"Module"})),Ft=[{id:1,title:"国潮插画设计",content:"这是一个关于国潮风格的插画设计作品，融合了传统元素与现代设计理念。",user_id:1,username:"设计师小明",avatar_url:"https://via.placeholder.com/64?text=设计师小明",category_id:1,status:"published",views:1234,likes_count:456,comments_count:78,created_at:Date.now()-864e5,updated_at:Date.now()-864e5},{id:2,title:"赛博朋克风格海报",content:"赛博朋克风格的海报设计，展现了未来科技感与城市夜景的融合。",user_id:2,username:"插画师小红",avatar_url:"https://via.placeholder.com/64?text=插画师小红",category_id:2,status:"published",views:987,likes_count:321,comments_count:56,created_at:Date.now()-1728e5,updated_at:Date.now()-1728e5},{id:3,title:"传统纹样现代化设计",content:"将传统纹样重新设计，应用于现代产品包装，展现传统文化的新活力。",user_id:3,username:"设计师小李",avatar_url:"https://via.placeholder.com/64?text=设计师小李",category_id:3,status:"published",views:765,likes_count:234,comments_count:45,created_at:Date.now()-2592e5,updated_at:Date.now()-2592e5},{id:4,title:"水墨风格动画短片",content:"使用传统水墨技法制作的动画短片，讲述了一个关于自然与人文的故事。",user_id:4,username:"动画师小王",avatar_url:"https://via.placeholder.com/64?text=动画师小王",category_id:4,status:"published",views:543,likes_count:189,comments_count:34,created_at:Date.now()-3456e5,updated_at:Date.now()-3456e5},{id:5,title:"民俗文化主题摄影",content:"民俗文化主题的摄影作品，记录了各地的传统节日与习俗。",user_id:5,username:"摄影师小张",avatar_url:"https://via.placeholder.com/64?text=摄影师小张",category_id:5,status:"published",views:321,likes_count:123,comments_count:23,created_at:Date.now()-432e6,updated_at:Date.now()-432e6}],Lt=[{id:1,username:"设计师小明",email:"xiaoming@example.com",avatar_url:"https://via.placeholder.com/64?text=设计师小明",posts_count:12,total_likes:2345,total_views:15678,created_at:Date.now()-31536e6,updated_at:Date.now()-864e5},{id:2,username:"插画师小红",email:"xiaohong@example.com",avatar_url:"https://via.placeholder.com/64?text=插画师小红",posts_count:8,total_likes:1890,total_views:12345,created_at:Date.now()-2592e6,updated_at:Date.now()-1728e5},{id:3,username:"设计师小李",email:"xiaoli@example.com",avatar_url:"https://via.placeholder.com/64?text=设计师小李",posts_count:15,total_likes:2100,total_views:14567,created_at:Date.now()-18144e5,updated_at:Date.now()-2592e5},{id:4,username:"动画师小王",email:"xiaowang@example.com",avatar_url:"https://via.placeholder.com/64?text=动画师小王",posts_count:6,total_likes:1567,total_views:10987,created_at:Date.now()-12096e5,updated_at:Date.now()-3456e5},{id:5,username:"摄影师小张",email:"xiaozhang@example.com",avatar_url:"https://via.placeholder.com/64?text=摄影师小张",posts_count:20,total_likes:2890,total_views:18765,created_at:Date.now()-9072e5,updated_at:Date.now()-432e6},{id:6,username:"UI设计师小刘",email:"xiaoliu@example.com",avatar_url:"https://via.placeholder.com/64?text=UI设计师小刘",posts_count:14,total_likes:1987,total_views:13456,created_at:Date.now()-7776e5,updated_at:Date.now()-5184e5},{id:7,username:"平面设计师小陈",email:"xiaochen@example.com",avatar_url:"https://via.placeholder.com/64?text=平面设计师小陈",posts_count:11,total_likes:1765,total_views:11234,created_at:Date.now()-6912e5,updated_at:Date.now()-6048e5},{id:8,username:"3D设计师小周",email:"xiaozhou@example.com",avatar_url:"https://via.placeholder.com/64?text=3D设计师小周",posts_count:9,total_likes:2012,total_views:16789,created_at:Date.now()-6048e5,updated_at:Date.now()-6912e5},{id:9,username:"视频编辑小吴",email:"xiaowu@example.com",avatar_url:"https://via.placeholder.com/64?text=视频编辑小吴",posts_count:7,total_likes:1654,total_views:10987,created_at:Date.now()-5184e5,updated_at:Date.now()-7776e5},{id:10,username:"动效设计师小郑",email:"xiaozheng@example.com",avatar_url:"https://via.placeholder.com/64?text=动效设计师小郑",posts_count:13,total_likes:2234,total_views:14567,created_at:Date.now()-432e6,updated_at:Date.now()-864e6},{id:11,username:"游戏设计师小冯",email:"xiaofeng@example.com",avatar_url:"https://via.placeholder.com/64?text=游戏设计师小冯",posts_count:10,total_likes:1987,total_views:13456,created_at:Date.now()-3456e5,updated_at:Date.now()-9504e5},{id:12,username:"交互设计师小沈",email:"xishenshen@example.com",avatar_url:"https://via.placeholder.com/64?text=交互设计师小沈",posts_count:16,total_likes:2456,total_views:17890,created_at:Date.now()-2592e5,updated_at:Date.now()-10368e5}],Mt=(e,t)=>[...e].sort((e,a)=>"likes_count"===t?a.likes_count-e.likes_count:"views"===t?a.views-e.views:"comments_count"===t?a.comments_count-e.comments_count:"posts_count"===t?a.posts_count-e.posts_count:0),Ut=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[r,i]=t.useState("users"),[l,n]=t.useState("week"),[o,d]=t.useState("likes_count"),[c,x]=t.useState([]),[m,g]=t.useState([]),[h,u]=t.useState(!0),[p,y]=t.useState(null),[b,f]=t.useState(null),[v,j]=t.useState(!1),[N,w]=t.useState(!1),[k,S]=t.useState([]),_=a();t.useEffect(()=>{A()},[r,l,o]),t.useEffect(()=>{const e=e=>{"Escape"===e.key&&v&&O()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v]);const[E,$]=t.useState({}),A=async()=>{u(!0),y(null);const e=`${r}-${o}-${l}`;if(E[e])return"posts"===r?x(E[e].posts):g(E[e].users),void u(!1);const t=Mt(Ft,o),a=Mt(Lt,o);"posts"===r?x(t):g(a),$(r=>({...r,[e]:{...r[e]||{posts:[],users:[]},posts:t,users:a}}));try{if("posts"===r){const a=await C.get(`/api/leaderboard/posts?sortBy=${o}&timeRange=${l}&limit=10`,{timeoutMs:5e3,retries:0}),r=Array.isArray(a.data)&&a.data.length>0?a.data:t;x(r),$(t=>({...t,[e]:{...t[e]||{posts:[],users:[]},posts:r}}))}else{const t=await C.get(`/api/leaderboard/users?sortBy=${o}&timeRange=${l}&limit=10`,{timeoutMs:5e3,retries:0}),r=Array.isArray(t.data)&&t.data.length>0?t.data:a;g(r),$(t=>({...t,[e]:{...t[e]||{posts:[],users:[]},users:r}}))}}catch(s){}finally{requestAnimationFrame(()=>{u(!1)})}},I=e=>{_(`/explore/${e}`)},O=()=>{j(!1),setTimeout(()=>{f(null),S([])},300)},T=e=>0===e?"text-amber-600 dark:text-amber-400 font-bold":1===e?"text-gray-600 dark:text-gray-300 font-bold":2===e?"text-amber-700 dark:text-amber-500 font-bold":"text-gray-500 dark:text-gray-400 font-medium",D=t=>0===t?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-900/30",children:e.jsx("span",{className:"text-xl font-bold text-amber-600 dark:text-amber-400",children:t+1})}):1===t?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx("span",{className:"text-xl font-bold text-gray-600 dark:text-gray-300",children:t+1})}):2===t?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-amber-50 dark:bg-amber-800/30",children:e.jsx("span",{className:"text-xl font-bold text-amber-700 dark:text-amber-500",children:t+1})}):e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-50 dark:bg-gray-800",children:e.jsx("span",{className:`text-lg font-medium ${T(t)}`,children:t+1})});return e.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"设计师排行榜"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"发现平台上最受欢迎的设计师和作品"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700/50 px-3 py-1 rounded-full text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"类型:"})," ","posts"===r?"热门帖子":"热门创作者"]}),e.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700/50 px-3 py-1 rounded-full text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"时间:"})," ","day"===l?"今日":"week"===l?"本周":"month"===l?"本月":"总榜"]}),e.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700/50 px-3 py-1 rounded-full text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"排序:"})," ","likes_count"===o?"点赞数":"views"===o?"浏览量":"comments_count"===o?"评论数":"作品数量"]}),e.jsxs("span",{className:"bg-gray-100 dark:bg-gray-700/50 px-3 py-1 rounded-full text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"数据:"})," ",("posts"===r?c.length:m.length).toString()]})]})]}),e.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"bg-white dark:bg-gray-800 rounded-lg p-5 mb-8 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"排行榜类型"}),e.jsxs("div",{className:"flex space-x-2 flex-wrap",children:[e.jsx("button",{onClick:()=>i("posts"),className:"flex-1 min-w-[120px] px-3 py-2 text-sm rounded-lg font-medium transition-all "+("posts"===r?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"热门帖子"}),e.jsx("button",{onClick:()=>i("users"),className:"flex-1 min-w-[120px] px-3 py-2 text-sm rounded-lg font-medium transition-all "+("users"===r?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"热门创作者"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"时间范围"}),e.jsx("div",{className:"flex space-x-2 flex-wrap gap-y-2",children:["day","week","month","all"].map(t=>e.jsxs("button",{onClick:()=>n(t),className:"flex-1 min-w-[70px] px-3 py-1.5 rounded-full text-sm font-medium transition-all "+(l===t?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/40":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:["day"===t&&"今日","week"===t&&"本周","month"===t&&"本月","all"===t&&"总榜"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"排序方式"}),e.jsx("select",{value:o,onChange:e=>d(e.target.value),className:"w-full px-3 py-2.5 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:"posts"===r?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"likes_count",children:"点赞数"}),e.jsx("option",{value:"views",children:"浏览量"}),e.jsx("option",{value:"comments_count",children:"评论数"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"posts_count",children:"作品数量"}),e.jsx("option",{value:"likes_count",children:"总点赞数"}),e.jsx("option",{value:"views",children:"总浏览量"})]})})]})]})}),h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"relative",children:e.jsx(s.div,{animate:{rotate:360},transition:{duration:.8,repeat:1/0,ease:"linear"},className:"rounded-full h-16 w-16 border-4 border-blue-200 dark:border-blue-800 border-t-blue-600 dark:border-t-blue-400"})}),e.jsx("p",{className:"mt-6 text-gray-600 dark:text-gray-400",children:"正在加载排行榜数据..."})]}):p?e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-red-700 dark:text-red-300 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-xl mr-3"}),e.jsx("h3",{className:"text-lg font-medium",children:"获取数据失败"})]}),e.jsx("p",{children:p}),e.jsx("button",{onClick:A,className:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors text-sm",children:"重试"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:"posts"===r?c.map((t,a)=>e.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut",delay:.02*a},whileHover:{y:-2,transition:{duration:.2}},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>I(t.id),children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[e.jsx("div",{className:"relative flex-shrink-0",children:e.jsx("div",{className:"relative z-10",children:D(a)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-3 line-clamp-2 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.username&&e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(t.username)}&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf&size=32`,alt:t.username,className:"w-8 h-8 rounded-full border border-gray-200 dark:border-gray-600 object-cover",width:32,height:32,loading:"lazy"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.username||"未知用户"}),e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"•"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6 line-clamp-3 leading-relaxed",children:t.content}),e.jsxs("div",{className:"flex justify-between items-center text-sm pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex space-x-5",children:[e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),t.views]}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 cursor-pointer transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),t.likes_count]}),e.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-green-600 dark:hover:text-green-400 cursor-pointer transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),t.comments_count]})]}),e.jsx("div",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-pointer transition-colors",children:e.jsx("i",{className:"fas fa-arrow-right text-sm"})})]})]})]})})},t.id)):m.map((t,a)=>e.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut",delay:.02*a},whileHover:{y:-2,transition:{duration:.2}},className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>(async e=>{f(e),j(!0),w(!0);try{const t=Ft.filter(t=>t.user_id===e.id).sort((e,t)=>t.likes_count-e.likes_count).slice(0,3);S(t)}catch(t){S([])}finally{requestAnimationFrame(()=>{w(!1)})}})(t),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"relative z-10",children:D(a)})}),e.jsx("div",{className:"relative",children:e.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(t.username)}&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf`,alt:t.username,className:"w-16 h-16 rounded-full border-2 border-gray-200 dark:border-gray-600 object-cover",width:64,height:64,loading:"lazy"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white truncate",children:t.username}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1 truncate",children:[e.jsx("i",{className:"fas fa-envelope text-xs opacity-70"}),t.email]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-image text-xs opacity-80"}),"作品数量"]})}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.posts_count||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-heart text-xs opacity-80"}),"总点赞数"]})}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.total_likes||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-eye text-xs opacity-80"}),"总浏览量"]})}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.total_views||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-calendar-alt text-xs opacity-80"}),"加入时间"]})}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString()})]})]})]})},t.id))}),v&&b&&e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",onClick:O,children:e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"创作者详情"}),e.jsx("button",{onClick:O,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6 mb-8",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{src:b.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(b.username)}&backgroundColor=b6e3f4,c0aede,d1d4f9,ffd5dc,ffdfbf`,alt:b.username,className:"w-24 h-24 rounded-full border-4 border-gray-200 dark:border-gray-600 object-cover",width:96,height:96})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:b.username}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-3 flex items-center justify-center md:justify-start gap-1",children:[e.jsx("i",{className:"fas fa-envelope text-sm opacity-70"}),b.email]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-500 flex items-center justify-center md:justify-start gap-1",children:[e.jsx("i",{className:"fas fa-calendar-alt text-sm opacity-70"}),"加入时间：",new Date(b.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"作品数量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.posts_count||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"总点赞数"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.total_likes||0})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"总浏览量"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.total_views||0})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"热门作品"}),N?e.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3].map(t=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-2 max-w-md"}),e.jsx("div",{className:"h-3 bg-gray-300 dark:bg-gray-600 rounded max-w-xs"})]})]})},t))}):k.length>0?e.jsx("div",{className:"space-y-4",children:k.map(t=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 hover:shadow-sm transition-shadow cursor-pointer",onClick:()=>{O(),setTimeout(()=>I(t.id),300)},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-image text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:t.content}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500 dark:text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-eye"}),t.views]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-heart"}),t.likes_count]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-comment"}),t.comments_count]})]})]}),e.jsx("div",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("i",{className:"fas fa-arrow-right text-sm"})})]})},t.id))}):e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6 text-center",children:[e.jsx("i",{className:"fas fa-images text-4xl text-gray-400 dark:text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"该用户暂无作品"})]})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:e.jsx("button",{onClick:O,className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors",children:"关闭"})})]})}),h&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 border border-gray-200 dark:border-gray-700 rounded-xl p-10 text-center shadow-sm animate-pulse",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center mb-6",children:e.jsx("div",{className:"w-10 h-10 bg-gray-400 dark:bg-gray-500 rounded-full"})}),e.jsx("div",{className:"h-6 bg-gray-300 dark:bg-gray-600 rounded mb-3 max-w-xs mx-auto"}),e.jsx("div",{className:"h-4 bg-gray-300 dark:bg-gray-600 rounded mb-6 max-w-md mx-auto"}),e.jsx("div",{className:"h-10 bg-gray-300 dark:bg-gray-600 rounded-lg max-w-xs mx-auto"})]}),!c.length&&!m.length&&!h&&!p&&e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800/50 dark:to-gray-700/50 border border-gray-200 dark:border-gray-700 rounded-xl p-10 text-center shadow-sm",style:{willChange:"transform, opacity"},children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"暂无数据"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"posts"===r?"还没有足够的帖子数据，快来发布你的第一个作品吧！":"还没有足够的用户数据，邀请更多创作者加入吧！"}),"posts"===r&&e.jsxs("button",{onClick:()=>_("/create"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center justify-center mx-auto",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"发布作品"]})]})]})}},Symbol.toStringTag,{value:"Module"})),qt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{searchUsers:a,sendFriendRequest:r,acceptFriendRequest:s,rejectFriendRequest:i,getFriendRequests:l,friendRequests:n,getFriends:o,friends:d,deleteFriend:c,setFriendNote:x,loading:m}=(()=>{const e=t.useContext(Ae);if(void 0===e)throw new Error("useFriendContext must be used within a FriendProvider");return e})(),[g,h]=t.useState(""),[u,p]=t.useState([]),[y,b]=t.useState("friends"),[f,v]=t.useState(""),[j,N]=t.useState(null);t.useEffect(()=>{l(),o()},[]);const w=async()=>{if(g.trim()){const e=await a(g.trim());p(e),b("search")}},k=async e=>{await x(e,f),N(null),v("")};return e.jsx("div",{className:"container mx-auto p-4 max-w-6xl",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"好友管理"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"管理你的好友关系，发现新的创作伙伴"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{type:"text",placeholder:"搜索用户名、邮箱或用户ID...",value:g,onChange:e=>h(e.target.value),className:"flex-1",onKeyPress:e=>"Enter"===e.key&&w()}),e.jsxs(B,{onClick:w,disabled:m,children:[m&&e.jsx(H,{className:"mr-2 h-4 w-4"}),"搜索"]})]})}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{className:"py-2 px-4 font-medium text-sm "+("friends"===y?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400":"text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"),onClick:()=>b("friends"),children:"好友列表"}),e.jsxs("button",{className:"py-2 px-4 font-medium text-sm "+("requests"===y?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400":"text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"),onClick:()=>{l(),b("requests")},children:["好友请求",n.length>0&&e.jsx("span",{className:"ml-1 inline-flex items-center justify-center w-5 h-5 rounded-full bg-red-500 text-white text-xs",children:n.length})]}),e.jsx("button",{className:"py-2 px-4 font-medium text-sm "+("search"===y?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400":"text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white"),onClick:()=>b("search"),children:"搜索结果"})]}),e.jsxs("div",{className:"space-y-4",children:["friends"===y&&e.jsx("div",{className:"grid gap-4",children:0===d.length?e.jsx(G,{className:"p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx("i",{className:"fas fa-users text-4xl mb-2"}),e.jsx("p",{className:"text-lg",children:"你还没有好友"}),e.jsx("p",{className:"text-sm mt-1",children:"使用上方搜索栏查找并添加好友"})]})}):d.map(t=>e.jsx(G,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.friend?.avatar||"https://picsum.photos/id/1005/200/200",alt:t.friend?.username,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:t.friend?.username||"未知用户"}),e.jsx("span",{className:"inline-flex items-center justify-center w-2 h-2 rounded-full "+("online"===t.friend?.status?"bg-green-500":"bg-gray-400"),title:t.friend?.status})]}),t.user_note?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.user_note}):e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 italic",children:"暂无备注"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:j===t.friend_id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{type:"text",placeholder:"输入备注...",value:f,onChange:e=>v(e.target.value),className:"w-40",onKeyPress:e=>"Enter"===e.key&&k(t.friend_id)}),e.jsx(B,{size:"small",onClick:()=>k(t.friend_id),children:"保存"}),e.jsx(B,{size:"small",variant:"secondary",onClick:()=>{N(null),v("")},children:"取消"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(B,{size:"small",variant:"secondary",onClick:()=>{return e=t.friend_id,a=t.user_note,N(e),void v(a||"");var e,a},children:[e.jsx("i",{className:"fas fa-edit mr-1"})," 备注"]}),e.jsxs(B,{size:"small",variant:"danger",onClick:()=>(async e=>{await c(e)})(t.friend_id),children:[e.jsx("i",{className:"fas fa-trash mr-1"})," 删除"]})]})})]})},t.id))}),"requests"===y&&e.jsx("div",{className:"grid gap-4",children:0===n.length?e.jsx(G,{className:"p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx("i",{className:"fas fa-bell text-4xl mb-2"}),e.jsx("p",{className:"text-lg",children:"暂无好友请求"}),e.jsx("p",{className:"text-sm mt-1",children:"当有新的好友请求时，会显示在这里"})]})}):n.map(t=>e.jsx(G,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.sender?.avatar||"https://picsum.photos/id/1005/200/200",alt:t.sender?.username,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:t.sender?.username||"未知用户"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(B,{size:"small",onClick:()=>(async e=>{await s(e),await o()})(t.id),disabled:m,children:[m&&e.jsx(H,{className:"mr-2 h-4 w-4"}),"接受"]}),e.jsxs(B,{size:"small",variant:"danger",onClick:()=>(async e=>{await i(e)})(t.id),disabled:m,children:[m&&e.jsx(H,{className:"mr-2 h-4 w-4"}),"拒绝"]})]})]})},t.id))}),"search"===y&&e.jsx("div",{className:"grid gap-4",children:0===u.length?e.jsx(G,{className:"p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:[e.jsx("i",{className:"fas fa-search text-4xl mb-2"}),e.jsx("p",{className:"text-lg",children:"未找到匹配的用户"}),e.jsx("p",{className:"text-sm mt-1",children:"请尝试其他搜索条件"})]})}):u.map(t=>e.jsx(G,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatar||"https://picsum.photos/id/1005/200/200",alt:t.username,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:t.username||"未知用户"}),e.jsx("span",{className:"inline-flex items-center justify-center w-2 h-2 rounded-full "+("online"===t.status?"bg-green-500":"bg-gray-400"),title:t.status})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]}),e.jsxs(B,{size:"small",onClick:()=>(async e=>{if(await r(e),g.trim()){const e=await a(g.trim());p(e)}})(t.id),disabled:m,children:[m&&e.jsx(H,{className:"mr-2 h-4 w-4"}),"添加好友"]})]})},t.id))})]})]})})}},Symbol.toStringTag,{value:"Module"})),Bt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),[r,s]=t.useState(""),[i,l]=t.useState(()=>{try{const e=localStorage.getItem("LAB_RECENT");if(e){const t=JSON.parse(e);if(Array.isArray(t)&&t.every(e=>"string"==typeof e))return t}}catch(e){localStorage.removeItem("LAB_RECENT")}return[]});t.useEffect(()=>{try{localStorage.setItem("LAB_RECENT",JSON.stringify(i.slice(0,10)))}catch(e){}},[i]);const[n,o]=t.useState(()=>{try{const e=localStorage.getItem("LAB_OPENED_LOG");if(e){const t=JSON.parse(e);if(Array.isArray(t)&&t.every(e=>"object"==typeof e&&"string"==typeof e.url&&"string"==typeof e.source&&"number"==typeof e.openedAt))return t}}catch(e){localStorage.removeItem("LAB_OPENED_LOG")}return[]});t.useEffect(()=>{try{localStorage.setItem("LAB_OPENED_LOG",JSON.stringify(n.slice(0,50)))}catch(e){}},[n]);const[d,c]=t.useState(!0),x=(e,t="custom")=>{try{const a=(e=>{if(/^https?:\/\//i.test(e))return e;const t=`${window.location.origin}`,[a,r]=e.split("?"),s=new URLSearchParams(r||"");if(!d)return`${t}${a}${s.toString()?`?${s.toString()}`:""}`;const l=i.find(e=>{try{return new URL(e).pathname===a}catch{return!1}}),n=new URLSearchParams((()=>{if(!l)return"";try{return new URL(l).search}catch{return""}})());s.forEach((e,t)=>n.set(t,e));const o=n.toString();return`${t}${a}${o?`?${o}`:""}`})(e);window.open(a,"_blank","noopener,noreferrer"),l(e=>[a,...e.filter(e=>e!==a)].slice(0,10)),o(e=>[{url:a,source:t,openedAt:Date.now()},...e].slice(0,50))}catch{alert("打开新窗口失败，请检查URL")}},m=(e,t="batch")=>{e.forEach((e,a)=>{setTimeout(()=>x(e,t),50*a)})};return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-window-restore text-red-600"}),"新窗口实验室"]}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" mt-2",children:"一键在新窗口中打开平台核心页面，便于多任务并行与对比查看。"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>x("/create","quick:create"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-tools"}),"在新窗口打开：创作中心"]}),e.jsxs("button",{onClick:()=>x("/explore","quick:explore"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-compass"}),"在新窗口打开：探索作品"]}),e.jsxs("button",{onClick:()=>x("/square","quick:square"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-th-large"}),"在新窗口打开：共创广场"]}),e.jsxs("button",{onClick:()=>x("/knowledge","quick:knowledge"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-book"}),"在新窗口打开：文化知识库"]}),e.jsxs("button",{onClick:()=>x("/neo","quick:neo"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-bolt"}),"在新窗口打开：灵感引擎"]}),e.jsxs("button",{onClick:()=>x("/tools","quick:tools"),className:`w-full px-4 py-3 rounded-xl flex items-center justify-center gap-2 ring-1 ${a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"} transition`,children:[e.jsx("i",{className:"fas fa-magic"}),"在新窗口打开：创作工具集"]})]}),e.jsxs("div",{className:"rounded-2xl p-4 ring-1 "+(a?"ring-gray-700 bg-gray-900":"ring-gray-200 bg-white"),children:[e.jsx("h2",{className:"font-bold mb-3",children:"自定义链接"}),e.jsx("div",{className:"mb-2 flex items-center gap-2",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:e=>c(e.target.checked)}),"携带最近上下文参数（同一路由合并最近查询条件）"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:r,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&r.trim()&&x(r.trim())},placeholder:"例如 /create 或 https://example.com",className:"flex-1 px-3 py-2 rounded-xl ring-1 "+(a?"bg-gray-800 ring-gray-700 text-white":"bg-white ring-gray-300 text-gray-900")}),e.jsx("button",{onClick:()=>{r.trim()&&x(r.trim())},className:"px-4 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white",children:"在新窗口打开"})]}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm mt-2",children:"支持站内路径与外部地址；为安全起见，已启用 `noopener,noreferrer`。"}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>m(["/explore","/create"],"batch:explore+create"),className:"px-3 py-2 rounded-xl text-sm ring-1 "+(a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"),children:"对比打开：探索 + 创作"}),e.jsx("button",{onClick:()=>m(["/square","/knowledge"],"batch:square+knowledge"),className:"px-3 py-2 rounded-xl text-sm ring-1 "+(a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"),children:"对比打开：广场 + 知识库"}),e.jsx("button",{onClick:()=>m(n.map(e=>e.url),"batch:reopen-all"),className:"px-3 py-2 rounded-xl text-sm ring-1 "+(a?"ring-gray-700 bg-gray-800 hover:bg-gray-700":"ring-gray-200 bg-white hover:bg-gray-50"),children:"批量重开：全部历史"}),e.jsx("button",{onClick:()=>o([]),className:"px-3 py-2 rounded-xl text-sm bg-red-600 hover:bg-red-700 text-white",children:"清空窗口清单"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"最近打开"}),0===i.length?e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm",children:"暂无记录"}):e.jsx("ul",{className:"space-y-2",children:i.map(t=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"truncate mr-3 "+(a?"text-gray-300":"text-gray-700"),children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(t),className:"px-2 py-1 rounded-md bg-red-600 hover:bg-red-700 text-white text-xs",children:"打开"}),e.jsx("button",{onClick:()=>l(e=>e.filter(e=>e!==t)),className:"px-2 py-1 rounded-md text-xs "+(a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"),children:"删除"})]})]},t))}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"窗口管理清单"}),0===n.length?e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm",children:"暂无记录"}):e.jsx("ul",{className:"space-y-2",children:n.map((t,r)=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1 mr-3",children:[e.jsx("div",{className:(a?"text-gray-300":"text-gray-700")+" truncate",children:t.url}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["来源：",t.source," · 时间：",new Date(t.openedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(t.url,"reopen:item"),className:"px-2 py-1 rounded-md bg-red-600 hover:bg-red-700 text-white text-xs",children:"重开"}),e.jsx("button",{onClick:()=>o(e=>e.filter(e=>!(e.url===t.url&&e.openedAt===t.openedAt))),className:"px-2 py-1 rounded-md text-xs "+(a?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"),children:"删除"})]})]},`${t.url}-${t.openedAt}-${r}`))})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const a=t.useRef(null);return t.useEffect(()=>{a.current&&(a.current.style.position="relative",a.current.style.width="100%",a.current.style.height="100vh",a.current.style.backgroundColor="#050505",a.current.style.margin="0",a.current.style.overflow="hidden",a.current.style.fontFamily="Segoe UI, sans-serif",a.current.innerHTML='\n        \x3c!-- 加载遮罩层 --\x3e\n        <div id="loading-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-black transition-opacity duration-500">\n          <div class="loader mb-4"></div>\n          <h2 class="text-xl font-light tracking-widest text-blue-400">正在初始化神经系统...</h2>\n          <p class="text-sm text-gray-500 mt-2">请允许摄像头权限以启用手势控制</p>\n        </div>\n\n        \x3c!-- UI 控制层 --\x3e\n        <div class="absolute top-0 left-0 w-full p-6 flex justify-between items-start z-10 pointer-events-none">\n            \n          \x3c!-- 左上角标题与状态 --\x3e\n          <div class="pointer-events-auto">\n              <h1 class="text-3xl font-bold tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500 drop-shadow-lg">\n                  NEBULA FLOW\n              </h1>\n              <div class="flex items-center gap-2 mt-2">\n                  <div id="status-dot" class="w-2 h-2 rounded-full bg-red-500"></div>\n                  <span id="status-text" class="text-xs text-gray-400 uppercase tracking-widest">等待摄像头...</span>\n              </div>\n              <p class="text-xs text-gray-500 mt-1 max-w-xs leading-relaxed">\n                  当前尺度因子: <span id="scale-readout" class="text-blue-300 font-bold">1.00</span>\n              </p>\n          </div>\n\n          \x3c!-- 右上角控制面板 --\x3e\n          <div class="flex flex-col gap-4 pointer-events-auto bg-black/40 backdrop-blur-md p-4 rounded-2xl border border-white/10 shadow-xl transition-all hover:bg-black/60">\n              \n            \x3c!-- 粒子形状选择器 (新增) --\x3e\n            <div class="group flex items-center justify-between gap-4">\n                <span class="text-sm text-gray-300 font-medium"><i class="fas fa-shapes mr-2"></i>粒子形状</span>\n                <select id="shape-selector" class="bg-white/10 text-white text-xs py-1.5 pl-2 pr-8 rounded-lg cursor-pointer border border-white/20">\n                    <option value="galaxy">星系漩涡 (默认)</option>\n                    <option value="shibajie_mahua">十八街麻花 (Braid)</option>\n                    <option value="goubuli_baozi">狗不理包子 (Baozi)</option>\n                    <option value="eryeyan_zhagao">耳朵眼炸糕 (Zhagao)</option>\n                    <option value="darentang">达仁堂药丸 (Pill)</option>\n                    <option value="yangliuqing">杨柳青年画 (Painting)</option>\n                    <option value="kite">风筝魏 (Kite)</option>\n                    <option value="clay_figure">泥人张 (Clay Figure)</option>\n                </select>\n            </div>\n            \n            \x3c!-- 颜色选择器 --\x3e\n            <div class="group flex items-center justify-between gap-4">\n                <span class="text-sm text-gray-300 font-medium"><i class="fas fa-palette mr-2"></i>粒子颜色</span>\n                <input type="color" id="color-picker" value="#00ffff" title="选择粒子颜色">\n            </div>\n\n            \x3c!-- Gemini LLM 功能按钮 --\x3e\n            <button id="generate-report-btn" class="flex items-center justify-center w-full py-2 px-3 bg-purple-500/20 hover:bg-purple-500/30 rounded-lg text-sm transition-colors border border-purple-400/50 text-purple-300 font-bold">\n                <i class="fas fa-microchip mr-2"></i> ✨ 生成异常报告\n            </button>\n\n            \x3c!-- 全屏按钮 --\x3e\n            <button id="fullscreen-btn" class="flex items-center justify-center w-full py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors">\n                <i class="fas fa-expand mr-2"></i> 全屏沉浸\n            </button>\n          </div>\n        </div>\n\n        \x3c!-- 摄像头预览 (左下角) --\x3e\n        <div class="absolute bottom-6 left-6 z-10 pointer-events-auto">\n          <div class="relative group">\n              <video id="input-video" class="w-32 h-24 object-cover hidden"></video> \x3c!-- 原始视频隐藏，只用于计算 --\x3e\n              <canvas id="camera-preview" class="w-40 h-32 bg-black/50"></canvas>\n              <div class="absolute bottom-1 left-1 bg-black/60 px-2 py-0.5 rounded text-[10px] text-gray-300 backdrop-blur-sm">\n                  视觉传感器\n              </div>\n          </div>\n        </div>\n\n        \x3c!-- WebGL 画布 --\x3e\n        <canvas id="webgl-canvas" class="block w-full h-full"></canvas>\n\n        \x3c!-- 异常报告模态窗口 --\x3e\n        <div id="report-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm transition-opacity duration-300">\n          <div id="report-content" class="anomaly-modal p-8 w-full max-w-xl rounded-xl text-sm transition-transform duration-300">\n              <h3 class="text-xl font-bold mb-4 border-b border-blue-400/50 pb-2 flex justify-between items-center text-blue-300">\n                  <i class="fas fa-exclamation-triangle mr-2"></i> ANOMALY REPORT\n              </h3>\n              <div id="report-output" class="space-y-4">\n                  <p class="text-gray-400 text-center"><i class="fas fa-circle-notch fa-spin mr-2"></i> 正在分析数据流...</p>\n              </div>\n              <button id="close-report-btn" class="mt-6 w-full py-2 bg-red-500/10 hover:bg-red-500/20 rounded-lg text-red-300 text-xs font-bold uppercase border border-red-500/30">\n                  DISMISS [确认解除]\n              </button>\n          </div>\n        </div>\n      ');const e=e=>new Promise((t,a)=>{const r=document.createElement("script");r.src=e,r.crossOrigin="anonymous",r.onload=t,r.onerror=a,document.head.appendChild(r)});return(async()=>{try{(()=>{const e=document.createElement("link");e.href="https://cdn.tailwindcss.com",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("link");t.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",t.rel="stylesheet",document.head.appendChild(t);const a=document.createElement("style");a.textContent="\n        /* 摄像头预览窗口样式 */\n        #camera-preview {\n          transform: scaleX(-1); /* 镜像翻转，使手势更自然 */\n          border-radius: 12px;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);\n          border: 2px solid rgba(255, 255, 255, 0.1);\n        }\n\n        /* 自定义颜色选择器样式 */\n        input[type=\"color\"] {\n          -webkit-appearance: none;\n          border: none;\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          overflow: hidden;\n          cursor: pointer;\n        }\n        input[type=\"color\"]::-webkit-color-swatch-wrapper { padding: 0; }\n        input[type=\"color\"]::-webkit-color-swatch { border: none; }\n\n        /* 下拉选择器样式 */\n        #shape-selector {\n          appearance: none; /* 移除默认样式 */\n          background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%239CA3AF'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E\");\n          background-repeat: no-repeat;\n          background-position: right 0.5rem center;\n          padding-right: 2rem;\n        }\n\n        /* 加载动画 */\n        .loader {\n          border: 4px solid rgba(255, 255, 255, 0.1);\n          border-left-color: #3b82f6;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          animation: spin 1s linear infinite;\n        }\n        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n\n        /* 模态窗口样式 - 突出科幻感 */\n        .anomaly-modal {\n          background-color: rgba(10, 25, 45, 0.9);\n          border: 2px solid #3b82f6;\n          box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);\n        }\n        /* 威胁等级颜色定义 */\n        .threat-critical { color: #f87171; }\n        .threat-high { color: #fbbf24; }\n        .threat-medium { color: #34d399; }\n        .threat-low { color: #60a5fa; }\n      ",document.head.appendChild(a)})(),await e("https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"),await Promise.all([e("https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"),e("https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"),e("https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"),e("https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js")]),await e("/particle-system.js")}catch(t){const e=document.getElementById("loading-screen");e&&(e.innerHTML='\n            <div class="text-red-500 text-2xl mb-4">⚠️</div>\n            <h2 class="text-xl font-light tracking-widest text-red-400">加载失败</h2>\n            <p class="text-sm text-gray-500 mt-2">无法加载必要的库文件，请检查网络连接</p>\n          ')}})(),()=>{document.querySelectorAll("link").forEach(e=>{(e.href.includes("tailwindcss.com")||e.href.includes("font-awesome"))&&e.remove()}),document.querySelectorAll("style").forEach(e=>{e.textContent&&e.textContent.includes("摄像头预览窗口样式")&&e.remove()})}},[]),e.jsx("div",{ref:a,className:"w-full h-screen"})}},Symbol.toStringTag,{value:"Module"})),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{isDark:a}=j(),[r,i]=t.useState(!1),[l,n]=t.useState(!1),[o,d]=t.useState(!1),[c,x]=t.useState(!1),[m,g]=t.useState(!1),[h,u]=t.useState(!1),[p,y]=t.useState(!1),[b,f]=t.useState(!1),[v,N]=t.useState(!1),[w,k]=t.useState(!1);return e.jsx("div",{className:"min-h-screen "+(a?"bg-gray-900 text-white":"bg-white text-gray-900"),children:r?e.jsx(ce,{isOpen:r,onClose:()=>i(!1)}):l?e.jsx(xe,{isOpen:l,onClose:()=>n(!1)}):o?e.jsx(me,{isOpen:o,onClose:()=>d(!1)}):c?e.jsx(ge,{isOpen:c,onClose:()=>x(!1)}):m?e.jsx(he,{isOpen:m,onClose:()=>g(!1)}):h?e.jsx(ue,{isOpen:h,onClose:()=>u(!1)}):p?e.jsx(pe,{isOpen:p,onClose:()=>y(!1)}):b?e.jsx(ye,{isOpen:b,onClose:()=>f(!1)}):v?e.jsx(be,{isOpen:v,onClose:()=>N(!1)}):w?e.jsx(fe,{isOpen:w,onClose:()=>k(!1)}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(T,{title:"文化知识游戏",subtitle:"通过游戏学习天津地方文化和中国传统文化",theme:"indigo",stats:[{label:"游戏类型",value:"多样化"},{label:"难度级别",value:"分关卡"},{label:"学习方式",value:"互动式"},{label:"挑战模式",value:"计时赛"}],pattern:!0,size:"lg"}),e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"mt-8 grid md:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Cultural%20quiz%20game%20interface%20with%20traditional%20Chinese%20elements",alt:"文化知识挑战",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化知识挑战"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"测试你对天津地方文化和中国传统文化的了解，包含多种题型和难度级别。"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种题型：单选题、多选题、判断题"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"关卡制：包含3个不同难度的关卡"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的答题时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"提示系统：提供提示帮助你解题"})]})]}),e.jsxs("button",{onClick:()=>i(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-question-circle mr-2"}),"开始挑战"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Memory%20card%20game%20with%20Chinese%20cultural%20elements%20flip%20cards",alt:"文化记忆游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化记忆游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"翻牌匹配相同的文化元素，挑战你的记忆力和文化知识，包含多种难度级别。"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种难度：4x4、6x6、8x8网格"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"精美的卡片设计：包含文化元素图片和介绍"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"进度保存：记录你的游戏成就"})]})]}),e.jsxs("button",{onClick:()=>n(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-gamepad mr-2"}),"开始游戏"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Matching%20game%20with%20Chinese%20cultural%20elements%20cards",alt:"文化元素连连看",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化元素连连看"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"通过匹配相同的文化元素卡片，了解中国传统文化和天津地方特色，赢取丰厚奖励！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种关卡：从简单到困难，逐步挑战"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"丰富的文化元素：包含天津地方特色和中国传统文化"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间，挑战最佳成绩"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"提示系统：遇到困难时可使用提示功能"})]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-gamepad mr-2"}),"开始游戏"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Puzzle%20game%20with%20Chinese%20cultural%20elements%20in%20Tianjin",alt:"文化拼图游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化拼图游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"拼合文化图片碎片，了解天津地方文化和中国传统文化，挑战你的观察力和动手能力！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种难度：4x4、5x5、6x6 不同规格的拼图"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"丰富的文化图片：包含天津地标、民俗文化和非遗技艺"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间和移动次数"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"提示功能：遇到困难时可使用提示和查看答案"})]})]}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-gamepad mr-2"}),"开始游戏"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Sorting%20game%20with%20Chinese%20cultural%20elements%20timeline",alt:"文化元素排序游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化元素排序游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"按照时间顺序或逻辑顺序排列文化元素，了解天津地方文化和中国传统文化的发展脉络！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种排序类型：时间顺序、逻辑顺序"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"拖拽排序：支持直观的拖拽操作"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供文化元素的详细介绍"})]})]}),e.jsxs("button",{onClick:()=>g(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-green-600 hover:bg-green-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-sort mr-2"}),"开始排序"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Riddle%20game%20with%20Chinese%20cultural%20elements%20lanterns",alt:"文化猜谜游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化猜谜游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"根据提示猜文化元素、成语或历史人物，了解天津地方文化和中国传统文化的丰富内涵！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种猜谜类型：文化元素、成语、历史人物"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"递进式提示：提供多级提示帮助解题"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供谜底的文化背景介绍"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-orange-600 hover:bg-orange-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-lightbulb mr-2"}),"开始猜谜"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Word%20chain%20game%20with%20Chinese%20cultural%20elements",alt:"文化词汇接龙游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化词汇接龙游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"从给定的文化词汇开始，按照规则接龙，挑战你的词汇量和文化知识！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"丰富的文化词汇：涵盖天津地方文化和中国传统文化"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"拖拽式操作：直观的拖拽排序玩法"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"提示功能：遇到困难时可使用提示"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供词汇的文化背景介绍"})]})]}),e.jsxs("button",{onClick:()=>y(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-cyan-600 hover:bg-cyan-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-link mr-2"}),"开始接龙"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Spot%20the%20difference%20game%20with%20Chinese%20cultural%20images",alt:"文化图片找茬游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化图片找茬游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"对比两张文化主题图片，找出所有不同之处，考验你的观察力和文化敏感度！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"精美的文化图片：包含天津地方文化和中国传统文化元素"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"自动识别差异：点击图片即可标记差异"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供差异处的文化背景介绍"})]})]}),e.jsxs("button",{onClick:()=>f(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-pink-600 hover:bg-pink-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-search mr-2"}),"开始找茬"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Timeline%20game%20with%20Chinese%20historical%20events",alt:"文化时间轴游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化时间轴游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"将历史文化事件按照时间顺序排列，了解天津和中国传统文化的发展脉络！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"丰富的历史事件：涵盖不同时期的文化发展"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"拖拽式操作：直观的时间轴排序玩法"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供事件的历史背景介绍"})]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-amber-600 hover:bg-amber-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-history mr-2"}),"开始排序"]})]}),e.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} hover:shadow-xl transition-shadow`,children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:"https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?image_size=1024x768&prompt=Pair%20matching%20game%20with%20Chinese%20cultural%20elements",alt:"文化配对游戏",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:"文化配对游戏"}),e.jsx("p",{className:"mb-4 "+(a?"text-gray-300":"text-gray-700"),children:"翻转卡片，找到匹配的文化元素对，挑战你的记忆力和文化知识！"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"精美的卡片设计：包含文化元素图片和介绍"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"多种难度：不同数量的卡片组合"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"计时挑战：记录你的完成时间"})]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle text-green-500 mr-2"}),e.jsx("span",{children:"详细解析：提供配对元素的文化背景介绍"})]})]}),e.jsxs("button",{onClick:()=>k(!0),className:"w-full px-6 py-3 text-lg font-bold rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white transition-colors duration-300 shadow-md hover:shadow-xl",children:[e.jsx("i",{className:"fas fa-puzzle-piece mr-2"}),"开始配对"]})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:`p-6 rounded-xl shadow-lg ${a?"bg-gray-800":"bg-white"} mb-12`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"游戏特色"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 text-red-600 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-book-open text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"文化学习"}),e.jsx("p",{className:a?"text-gray-300":"text-gray-700",children:"通过游戏了解天津地方文化和中国传统文化的丰富内涵"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-user-friends text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"互动体验"}),e.jsx("p",{className:a?"text-gray-300":"text-gray-700",children:"丰富的互动设计，让学习变得更加有趣和生动"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 text-green-600 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-trophy text-2xl"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"挑战成就"}),e.jsx("p",{className:a?"text-gray-300":"text-gray-700",children:"完成关卡获得奖励，解锁新的游戏内容和成就"})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Kt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{isDark:a}=j(),[r,l]=t.useState("demo-session-1"),[n,o]=t.useState(`user-${Date.now()}`),[d,c]=t.useState(`用户${Math.floor(1e3*Math.random())}`),[x,m]=t.useState("欢迎来到津脉智坊协作编辑器！\n\n这是一个实时协作编辑演示，您可以与其他人同时编辑同一份文档。\n\n功能特性：\n• 实时文本同步\n• 光标位置共享\n• 选择范围可视化\n• 用户状态指示\n• 输入状态显示");return e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen p-6",style:{backgroundColor:a?"#0f172a":"#f8fafc"},children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-red-600 to-red-400 bg-clip-text text-transparent",children:"津脉智坊 - 实时协作编辑器"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-6",children:"体验多人实时协作编辑的强大功能"})]}),e.jsx("div",{className:`mb-6 p-4 rounded-lg ${a?"bg-gray-800":"bg-white shadow"} border border-gray-200 dark:border-gray-700`,children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"会话ID:"}),e.jsx("code",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm",children:r})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"当前用户:"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900 rounded text-sm text-red-800 dark:text-red-200",children:d})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{const e=`session-${Date.now()}`,t=`user-${Date.now()}`,a=`用户${Math.floor(1e3*Math.random())}`;l(e),o(t),c(a),m("新的协作会话已创建！\n\n开始您的实时协作编辑体验吧！"),i.success("已创建新的协作会话")},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 font-medium",children:"创建新会话"}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r),i.success("会话ID已复制到剪贴板")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 font-medium",children:"复制会话ID"})]})]})}),e.jsx("div",{className:`mb-6 rounded-lg overflow-hidden ${a?"bg-gray-800":"bg-white shadow"} border border-gray-200 dark:border-gray-700`,children:e.jsx(K,{sessionId:r,userId:n,username:d,initialContent:x,onContentChange:e=>{m(e)},className:"w-full"})}),e.jsxs("div",{className:`p-6 rounded-lg ${a?"bg-gray-800":"bg-white shadow"} border border-gray-200 dark:border-gray-700`,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 dark:text-white",children:"功能说明"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-users text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"实时协作"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"多人同时编辑同一文档，所有更改实时同步"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-mouse-pointer text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"光标同步"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"实时显示其他用户的光标位置和选择范围"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-bolt text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"输入状态"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"显示其他用户的输入状态，了解协作进度"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-shield-alt text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"稳定连接"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"自动重连机制，确保协作过程稳定可靠"})]})]})]})]})]}),e.jsx("div",{className:`mt-6 p-4 rounded-lg ${a?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-200"} border`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-lightbulb text-yellow-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"使用提示"}),e.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1 space-y-1",children:[e.jsx("li",{children:"• 在多个浏览器标签页中打开此页面，模拟多人协作"}),e.jsx("li",{children:"• 复制会话ID分享给其他人，邀请他们加入协作"}),e.jsx("li",{children:"• 观察光标和选择范围的实时同步效果"}),e.jsx("li",{children:"• 尝试同时输入，体验实时同步的流畅性"})]})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Jt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"测试页面"}),e.jsx("p",{className:"text-lg mb-6",children:"这是一个简单的测试页面，用于检查路由是否正常工作。"}),e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"测试内容"}),e.jsx("p",{children:"如果您能看到这个页面，说明路由配置正常。"})]})]})},Symbol.toStringTag,{value:"Module"})),Vt=[{id:1,url:"https://images.unsplash.com/photo-1507608869274-d3177c8bb4c7?w=600&h=600&fit=crop",alt:"测试图片 1"},{id:2,url:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=600&h=600&fit=crop",alt:"测试图片 2"},{id:3,url:"https://images.unsplash.com/photo-1520338395080-e0132be9dcd2?w=600&h=600&fit=crop",alt:"测试图片 3"},{id:4,url:"https://images.unsplash.com/photo-1494500764479-0c8f2919a3d8?w=600&h=600&fit=crop",alt:"测试图片 4"},{id:5,url:"https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?w=600&h=600&fit=crop",alt:"测试图片 5"},{id:6,url:"https://images.unsplash.com/photo-1503602642458-232111445657?w=600&h=600&fit=crop",alt:"测试图片 6"},{id:7,url:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=600&h=600&fit=crop",alt:"测试图片 7"},{id:8,url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=600&h=600&fit=crop",alt:"测试图片 8"},{id:9,url:"https://images.unsplash.com/photo-1476610182048-b716b8518aae?w=600&h=600&fit=crop",alt:"测试图片 9"},{id:10,url:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=600&h=600&fit=crop",alt:"测试图片 10"},{id:11,url:"https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=600&h=600&fit=crop",alt:"测试图片 11"},{id:12,url:"https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?w=600&h=600&fit=crop",alt:"测试图片 12"}],Yt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[a,r]=t.useState(null),[s,i]=t.useState(null),[l,n]=t.useState(!0);return t.useEffect(()=>{const e=()=>{const e=J.getPerformanceStats(),t=J.getCacheStats();r(e),i(t)},t=setTimeout(()=>{e(),n(!1)},2e3),a=setInterval(e,5e3);return()=>{clearTimeout(t),clearInterval(a)}},[]),t.useEffect(()=>{const e=Vt.slice(0,6).map(e=>e.url);J.preloadImages(e)},[]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"图片加载测试页面"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"图片服务统计信息"}),l?e.jsx("div",{className:"text-center text-gray-500",children:"正在加载统计信息..."}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-500",children:"总请求数"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.totalRequests})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-500",children:"缓存命中率"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.hitRate,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-500",children:"加载成功率"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[a.successRate,"%"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm text-gray-500",children:"平均加载时间"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[(a.averageLoadTime||0).toFixed(0),"ms"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"LazyImage 组件测试"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Vt.map((t,a)=>e.jsxs("div",{className:"aspect-square",children:[e.jsx(se,{src:t.url,alt:t.alt,className:"w-full h-full object-cover rounded-lg",priority:a<3,quality:a<6?"high":"medium",ratio:"square",fit:"cover",loading:"lazy"}),e.jsxs("div",{className:"mt-2 text-sm text-gray-500 text-center",children:["图片 ",t.id," ",a<3?"(优先加载)":a<6?"(高质量)":"(中等质量)"]})]},t.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"不同配置测试"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"不同宽高比"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{src:Vt[0].url,alt:"方形",ratio:"square",className:"rounded-lg"}),e.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"方形 (1:1)"})]}),e.jsxs("div",{children:[e.jsx(se,{src:Vt[1].url,alt:"横向",ratio:"landscape",className:"rounded-lg"}),e.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"横向 (16:9)"})]}),e.jsxs("div",{children:[e.jsx(se,{src:Vt[2].url,alt:"纵向",ratio:"portrait",className:"rounded-lg"}),e.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"纵向 (4:5)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"不同填充方式"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(se,{src:Vt[3].url,alt:"覆盖填充",fit:"cover",className:"rounded-lg"}),e.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"覆盖填充 (cover)"})]}),e.jsxs("div",{children:[e.jsx(se,{src:Vt[4].url,alt:"包含填充",fit:"contain",className:"rounded-lg bg-gray-100"}),e.jsx("div",{className:"mt-1 text-xs text-center text-gray-500",children:"包含填充 (contain)"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API代理URL测试"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"TRA API代理图片"}),e.jsx(se,{src:"/api/proxy/trae-api/api/ide/v1/text_to_image?image_size=landscape_4_3&prompt=China%20traditional%20craft%20revitalization%20plan%20implementation%20achievements",alt:"TRA API代理图片",className:"rounded-lg",ratio:"landscape"}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"URL: /api/proxy/trae-api/api/ide/v1/text_to_image"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"错误处理测试"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"无效图片URL"}),e.jsx(se,{src:"https://invalid-url.example.com/nonexistent-image.jpg",alt:"无效图片",className:"rounded-lg",ratio:"square"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"空图片URL"}),e.jsx(se,{src:"",alt:"空图片",className:"rounded-lg",ratio:"square"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),Wt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(V,{})})},Symbol.toStringTag,{value:"Module"})),Zt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:t}=j();return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-3",children:"服务条款"}),e.jsx("p",{className:(t?"text-gray-400":"text-gray-600")+" mb-6 text-sm",children:"为保障用户与平台权益，请在使用本平台前仔细阅读以下条款。"}),e.jsxs("section",{className:`rounded-2xl p-6 ${t?"bg-gray-800":"bg-white"} shadow-md ring-1 ${t?"ring-gray-700":"ring-gray-200"}`,children:[e.jsxs("ol",{className:"list-decimal space-y-4 pl-5",children:[e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"账户与安全"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"用户需妥善保管账户信息。因个人原因导致的账户泄露与损失由用户自行承担。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"内容与版权"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"用户在平台发布的内容需遵守法律法规。涉及第三方素材与品牌时，请确保已取得授权。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"AI 生成内容使用"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"平台提供的 AI 工具仅用于合法、合规的创作活动。对于生成内容的合规性，用户应自行评估与负责。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"数据与隐私"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"我们重视隐私保护，遵循隐私政策处理您的个人数据。具体规则请参阅隐私政策页面。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"违规处理与终止服务"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"对于违反平台规则的行为，平台有权采取限制、下架、封禁等措施，并保留追责权利。"})]})]}),e.jsx("div",{className:(t?"text-gray-400":"text-gray-500")+" text-xs mt-6",children:"生效日期：2025-01-01"})]})]})}},Symbol.toStringTag,{value:"Module"})),Xt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),[r,i]=t.useState("all"),[l,n]=t.useState([]),o=[{id:"faq-1",question:"如何开始使用 AI 创作工具？",answer:"登录后进入“AI 创作工具”页面，选择模型与参数，按照向导完成创作流程。你可以选择不同的创作模板，或者从头开始创建自己的作品。系统会提供实时预览功能，帮助你调整创作效果。",category:"basic"},{id:"faq-2",question:"生成的内容是否可以商用？",answer:"请确保素材与品牌授权合规。平台不自动提供第三方授权，需由用户自行确认与取得。对于商业用途，建议你在使用前咨询专业的法律意见，确保你的使用符合相关法律法规。",category:"basic"},{id:"faq-3",question:"账号安全如何保障？",answer:"请勿泄露登录信息，启用强密码，并避免在公共设备保存登录状态。平台采用了多种安全措施，包括密码加密存储、HTTPS传输、登录验证等，保障你的账号安全。你还可以在设置中启用双因素认证，进一步增强账号安全性。",category:"security"},{id:"faq-4",question:"遇到问题如何反馈？",answer:"可通过页面右下角的反馈按钮提交问题，我们的客服团队会在24小时内回复。你也可以通过邮件联系平台支持：support@jinmaizhifang.com，或在工作时间拨打客服电话：400-123-4567。",category:"basic"},{id:"faq-5",question:"如何注册和登录账号？",answer:"你可以通过邮箱或手机号注册账号，也可以使用微信、支付宝等第三方账号快捷登录。注册完成后，系统会发送验证邮件或短信，验证通过后即可登录。",category:"auth"},{id:"faq-6",question:"忘记密码怎么办？",answer:"在登录页面点击“忘记密码”链接，按照提示输入注册邮箱或手机号，系统会发送密码重置链接或验证码。通过链接或验证码即可重置密码。",category:"auth"},{id:"faq-7",question:"如何修改个人信息？",answer:"登录后进入“个人中心”页面，点击“编辑资料”按钮即可修改个人信息，包括用户名、头像、邮箱、手机号等。修改完成后，系统会保存你的更改。",category:"auth"},{id:"faq-8",question:"如何使用AI创作功能？",answer:"进入“AI创作工具”页面，选择创作类型（图片、视频、文字等），输入创作提示词，调整参数设置，点击“生成”按钮即可生成内容。你可以对生成的内容进行编辑和调整，直到满意为止。",category:"creation"},{id:"faq-9",question:"如何保存和管理我的作品？",answer:"创作完成后，点击“保存”按钮即可将作品保存到“我的作品”页面。在该页面，你可以查看、编辑、删除、分享你的作品，还可以将作品分类管理。",category:"creation"},{id:"faq-10",question:"如何分享我的作品？",answer:"在作品详情页面，点击“分享”按钮，选择分享方式（微信、微博、QQ等）或复制分享链接，即可将作品分享给他人。你也可以设置作品的可见范围，控制谁可以查看你的作品。",category:"community"},{id:"faq-11",question:"如何加入社区讨论？",answer:"进入“社区”页面，浏览社区动态，点击帖子即可参与讨论。你可以点赞、评论、分享帖子，也可以创建自己的帖子，与其他用户交流创作经验和想法。",category:"community"},{id:"faq-12",question:"如何关注其他用户？",answer:"在用户个人主页或社区动态中，点击用户头像或用户名进入用户详情页面，点击“关注”按钮即可关注该用户。关注后，你可以在“关注”页面查看该用户的最新动态。",category:"community"},{id:"faq-13",question:"会员有哪些权益？",answer:"会员可以享受无限AI生成次数、高级AI模型访问、高清作品导出、优先处理队列、专属模板库、去除水印等权益。不同等级的会员享受不同的权益，你可以在“会员中心”页面查看详细的会员权益说明。",category:"membership"},{id:"faq-14",question:"如何升级会员？",answer:"进入“会员中心”页面，选择你想要升级的会员等级，点击“立即升级”按钮，按照提示完成支付即可。支付成功后，你的会员等级会立即升级，享受相应的会员权益。",category:"membership"},{id:"faq-15",question:"会员到期后怎么办？",answer:"会员到期后，你的会员权益会自动失效，系统会将你的会员等级恢复为免费会员。你可以在会员到期前续费，继续享受会员权益。系统会在会员到期前发送提醒通知，确保你不会错过续费时机。",category:"membership"},{id:"faq-16",question:"如何处理创作过程中的技术问题？",answer:"如果在创作过程中遇到技术问题，你可以尝试刷新页面、清除浏览器缓存、更换浏览器等方式解决。如果问题依然存在，请通过反馈渠道提交问题，我们的技术团队会尽快协助你解决。",category:"technical"},{id:"faq-17",question:"如何优化AI生成效果？",answer:"要优化AI生成效果，你可以尝试以下方法：1）提供更详细的提示词，明确描述你想要的效果；2）调整生成参数，如风格、细节程度等；3）使用参考图片或风格参考；4）尝试不同的AI模型。",category:"technical"},{id:"faq-18",question:"如何处理生成内容中的版权问题？",answer:"平台生成的内容可能包含受版权保护的元素，建议你在使用前检查内容的版权状态。对于商业用途，建议你使用平台提供的授权素材，或自行获取版权授权。如果发现生成内容存在版权问题，请立即停止使用，并联系平台客服。",category:"security"}],d="all"===r?o:o.filter(e=>e.category===r);return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"帮助中心"}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" mb-8 text-sm",children:"常见问题与使用指南，帮助你快速上手并高效创作。"}),e.jsx("div",{className:"mb-8",children:e.jsx("input",{type:"text",placeholder:"搜索问题或关键词...",className:`w-full px-4 py-3 rounded-lg border ${a?"bg-gray-800 border-gray-700 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}\n            focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200`})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8 overflow-x-auto pb-2",children:[{value:"all",label:"全部"},{value:"basic",label:"基础使用"},{value:"auth",label:"账号管理"},{value:"creation",label:"AI创作"},{value:"community",label:"社区互动"},{value:"membership",label:"会员权益"},{value:"security",label:"安全与隐私"},{value:"technical",label:"技术支持"}].map(t=>e.jsx("button",{onClick:()=>i(t.value),className:"px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 "+(r===t.value?a?"bg-blue-600 text-white":"bg-blue-500 text-white":a?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.label},t.value))}),e.jsx("section",{className:`rounded-2xl p-6 ${a?"bg-gray-800":"bg-white"} shadow-md ring-1 ${a?"ring-gray-700":"ring-gray-200"}`,children:e.jsx("ul",{className:"space-y-4",children:0===d.length?e.jsxs("div",{className:"text-center py-12 "+(a?"text-gray-400":"text-gray-500"),children:[e.jsx("i",{className:"fas fa-search text-4xl mb-3"}),e.jsx("p",{children:"未找到匹配的问题"}),e.jsx("button",{onClick:()=>{i("all"),n([])},className:`mt-4 text-sm ${a?"text-blue-400":"text-blue-600"} hover:underline`,children:"查看所有问题"})]}):d.map(t=>{const r=l.includes(t.id);return e.jsxs("li",{className:`rounded-lg ${a?"bg-gray-900":"bg-gray-50"} overflow-hidden`,children:[e.jsxs("button",{onClick:()=>{return e=t.id,void n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:"w-full px-4 py-4 text-left flex justify-between items-center focus:outline-none transition-all duration-200 "+(r?a?"bg-gray-800":"bg-gray-100":""),children:[e.jsx("h2",{className:"font-medium text-left",children:t.question}),e.jsx(s.div,{animate:{rotate:r?180:0},transition:{duration:.3},className:"text-lg "+(a?"text-gray-400":"text-gray-500"),children:e.jsx("i",{className:"fas fa-chevron-down"})})]}),e.jsx(c,{children:r&&e.jsx(s.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsx("div",{className:`px-4 pb-4 ${a?"text-gray-300":"text-gray-700"} text-sm`,children:t.answer})})})]},t.id)})})}),e.jsxs("section",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`rounded-2xl p-6 ${a?"bg-gray-800":"bg-white"} shadow-md ring-1 ${a?"ring-gray-700":"ring-gray-200"} text-center`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-4 "+(a?"bg-blue-900":"bg-blue-100"),children:e.jsx("i",{className:"fas fa-comment-dots text-xl "+(a?"text-blue-300":"text-blue-600")})}),e.jsx("h2",{className:"font-medium mb-2",children:"在线反馈"}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm mb-4",children:"提交你的问题或建议，我们会尽快回复"}),e.jsxs("button",{onClick:()=>{const e=document.querySelector('[title="用户反馈"]');e?.click()},className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors ${a?"bg-blue-600 hover:bg-blue-500":"bg-blue-500 hover:bg-blue-600"}\n              text-white`,children:[e.jsx("i",{className:"fas fa-paper-plane"}),"提交反馈"]})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${a?"bg-gray-800":"bg-white"} shadow-md ring-1 ${a?"ring-gray-700":"ring-gray-200"} text-center`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-4 "+(a?"bg-green-900":"bg-green-100"),children:e.jsx("i",{className:"fas fa-envelope text-xl "+(a?"text-green-300":"text-green-600")})}),e.jsx("h2",{className:"font-medium mb-2",children:"邮件支持"}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm mb-4",children:"发送邮件到我们的支持邮箱"}),e.jsxs("a",{href:"mailto:support@jinmaizhifang.com",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors ${a?"bg-green-600 hover:bg-green-500":"bg-green-500 hover:bg-green-600"}\n              text-white`,children:[e.jsx("i",{className:"fas fa-envelope"}),"发送邮件"]})]}),e.jsxs("div",{className:`rounded-2xl p-6 ${a?"bg-gray-800":"bg-white"} shadow-md ring-1 ${a?"ring-gray-700":"ring-gray-200"} text-center`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-4 "+(a?"bg-purple-900":"bg-purple-100"),children:e.jsx("i",{className:"fas fa-phone text-xl "+(a?"text-purple-300":"text-purple-600")})}),e.jsx("h2",{className:"font-medium mb-2",children:"电话支持"}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" text-sm mb-4",children:"工作日 9:00-18:00 提供电话支持"}),e.jsxs("a",{href:"tel:400-123-4567",className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors ${a?"bg-purple-600 hover:bg-purple-500":"bg-purple-500 hover:bg-purple-600"}\n              text-white`,children:[e.jsx("i",{className:"fas fa-phone"}),"400-123-4567"]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:t}=j();return e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-3",children:"隐私政策"}),e.jsx("p",{className:(t?"text-gray-400":"text-gray-600")+" mb-6 text-sm",children:"我们重视您的隐私保护，以下是我们的隐私政策说明。"}),e.jsxs("section",{className:`rounded-2xl p-6 ${t?"bg-gray-800":"bg-white"} shadow-md ring-1 ${t?"ring-gray-700":"ring-gray-200"}`,children:[e.jsxs("ol",{className:"list-decimal space-y-4 pl-5",children:[e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"信息收集与使用"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"我们收集必要的个人信息用于账户管理、服务提供和个性化推荐。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"数据存储与保护"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"我们采用行业标准的安全措施保护您的数据，防止未授权访问和泄露。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"信息共享"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"我们不会向第三方出售您的个人信息，仅在必要时与合作伙伴共享。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"您的权利"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"您有权访问、修改、删除您的个人信息，或选择退出某些数据收集。"})]}),e.jsxs("li",{children:[e.jsx("h2",{className:"font-medium mb-1",children:"政策更新"}),e.jsx("p",{className:(t?"text-gray-300":"text-gray-700")+" text-sm",children:"我们可能会不时更新隐私政策，更新后将在平台上公布。"})]})]}),e.jsx("div",{className:(t?"text-gray-400":"text-gray-500")+" text-xs mt-6",children:"生效日期：2025-01-01"})]})]})}},Symbol.toStringTag,{value:"Module"})),ea=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),[r,l]=t.useState(Y[0]),[n,o]=t.useState(""),[d,c]=t.useState("想怎么创新麻花？"),[x,m]=t.useState(""),[g,h]=t.useState(""),[u,p]=t.useState(""),[y,b]=t.useState([]),[f,v]=t.useState("all"),[N,w]=t.useState("recent"),[k,C]=t.useState(0);t.useEffect(()=>{try{const e=localStorage.getItem("BrandGuide.persist");if(e){const t=JSON.parse(e),a=Y.find(e=>e.id===t.brandId);a&&l(a),"string"==typeof t.brandSearch&&o(t.brandSearch),"string"==typeof t.chat&&c(t.chat),"string"==typeof t.contact&&m(t.contact),"string"==typeof t.phone&&h(t.phone),"string"==typeof t.idea&&p(t.idea),["all","pending","negotiating","approved","rejected"].includes(t.statusFilter)&&v(t.statusFilter),["recent","old","status"].includes(t.sortKey)&&w(t.sortKey)}}catch{}},[]),t.useEffect(()=>{try{const e={brandId:r.id,brandSearch:n,chat:d,contact:x,phone:g,idea:u,statusFilter:f,sortKey:N};localStorage.setItem("BrandGuide.persist",JSON.stringify(e))}catch{}},[r.id,n,d,x,g,u,f,N]);const S=t.useMemo(()=>W.getAllPartnerships().filter(e=>e.brandName===r.name),[r,k]),_=t.useMemo(()=>{const e={pending:0,negotiating:0,approved:0,rejected:0};return S.forEach(t=>{e[t.status]=(e[t.status]||0)+1}),e},[S]),E=t.useMemo(()=>{let e=S;"all"!==f&&(e=e.filter(e=>e.status===f));const t={pending:0,negotiating:1,approved:2,rejected:3},a="recent"===N?(e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime():"old"===N?(e,t)=>new Date(e.updatedAt).getTime()-new Date(t.updatedAt).getTime():(e,a)=>t[e.status]-t[a.status];return[...e].sort(a)},[S,f,N]),$=t.useMemo(()=>{const e=x.trim().length>0,t=g.trim(),a=/^1[3-9]\d{9}$/.test(t),s=t.length>=5&&!/\s/.test(t),i=a||s,l=u.trim().length>0;return{nameOk:e,phoneOk:i,ideaOk:l,nameMsg:e?"":"请输入联系人姓名",phoneMsg:i?"":"请输入有效的联系方式（手机或微信）",ideaMsg:l?"":`请输入合作想法（基于 ${r.name} ）`}},[x,g,u,r.name]),A=$.nameOk&&$.phoneOk&&$.ideaOk,I=(e,t)=>{W.updatePartnershipStatus(e,t)?(C(e=>e+1),i.success("状态已更新")):i.error("更新失败")},O=async()=>{const e=d.trim()||`围绕${r.name}做一次联名升级`,t=[`${r.name} × 校园潮流：${e}，推出限定周边礼盒`,`${r.name} 城市记忆计划：${e}，设计主题海报与KV`,`${r.name} 数字文创：${e}，发布数字藏品或表情包`];b(t)},D=()=>{if(!x.trim())return void i.warning("请输入联系人姓名");const e=g.trim(),t=/^1[3-9]\d{9}$/.test(e),a=e.length>=5&&!/\s/.test(e);t||a?u.trim()?(W.createPartnership({brandName:r.name,brandLogo:r.image,description:`${u}（联系人：${x}，电话：${g}）`,reward:"待协商",status:"pending",ipAssetId:"ip-001"}),m(""),h(""),p(""),C(e=>e+1),i.success("已提交合作申请，我们会尽快联系您")):i.warning("请输入合作想法"):i.warning("请输入有效的联系方式（手机或微信）")};return e.jsxs("main",{className:"container mx-auto px-4 py-8 scroll-smooth","aria-label":"主要内容",children:[e.jsx(T,{title:"品牌合作",subtitle:"面向老字号品牌的共创入口：选择品牌、生成灵感、提交合作与管理申请",theme:"red",stats:[{label:"当前品牌",value:r.name},{label:"申请数量",value:S.length.toString()},{label:"状态",value:f},{label:"排序",value:"recent"===N?"最新":"old"===N?"最早":"状态"}],badgeText:"Beta",pattern:!0,size:"lg"}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(s.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},className:(a?"bg-gray-800/80 ring-1 ring-gray-700":"bg-white/90 ring-1 ring-gray-200")+" rounded-2xl shadow-xl p-6 backdrop-blur lg:sticky lg:top-6",id:"brand-section","aria-labelledby":"brand-section-title",children:[e.jsx("h2",{className:"text-base font-semibold mb-3",children:"选择老字号"}),e.jsx("label",{htmlFor:"brand-search",className:"sr-only",children:"搜索品牌名称"}),e.jsx("input",{value:n,onChange:e=>o(e.target.value),id:"brand-search",className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mb-2",placeholder:"搜索品牌名称"}),e.jsx("select",{value:r.id,onChange:e=>l(Y.find(t=>t.id===e.target.value)||Y[0]),className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:Y.filter(e=>e.name.toLowerCase().includes(n.trim().toLowerCase())).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-40 object-cover rounded-xl",loading:"lazy",decoding:"async"}),e.jsx("div",{className:`absolute inset-x-0 bottom-0 px-3 py-2 text-xs ${a?"bg-black/40 text-gray-200":"bg-white/50 text-gray-800"} rounded-b-xl backdrop-blur-sm`,children:r.name})]}),e.jsx("p",{className:(a?"text-gray-400":"text-gray-600")+" mt-3 text-sm leading-relaxed",children:r.story})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25,delay:.05},className:`lg:col-span-2 ${a?"bg-gray-800/80 ring-1 ring-gray-700":"bg-white/90 ring-1 ring-gray-200"} rounded-2xl shadow-xl p-6 backdrop-blur`,id:"ai-section","aria-labelledby":"ai-section-title",children:[e.jsx("div",{className:"mb-3",children:"AI聊天引导"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:["赛博朋克风","校园潮流联名","数字文创表情包"].map((t,s)=>e.jsx("button",{className:(a?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-100 text-gray-900 hover:bg-gray-200")+" text-xs px-3 py-1 rounded-full transition-colors",onClick:()=>c(`把${r.name}做成${t}`),children:t},s))}),e.jsx("label",{htmlFor:"chat-input",className:"sr-only",children:"创作灵感输入框"}),e.jsx("textarea",{value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),O())},id:"chat-input","aria-describedby":"chat-hint",className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full h-32 px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"}),e.jsx("div",{id:"chat-hint",className:"mt-3 text-sm opacity-70",children:"示例：把麻花做成赛博朋克风"}),e.jsx(s.button,{whileHover:{scale:1.03},onClick:O,className:"mt-4 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white px-4 py-2 rounded-lg shadow min-h-[44px]",children:"生成灵感"}),y.length>0&&e.jsx("ul",{className:"mt-4 space-y-2 text-sm","aria-live":"polite",children:y.map((t,r)=>e.jsxs("li",{className:(a?"bg-gray-700":"bg-gray-100")+" px-3 py-2 rounded-lg flex items-center justify-between hover:bg-opacity-90 transition-colors",children:[e.jsx("span",{className:"mr-2",children:t}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>p(t),children:"填入合作想法"}),e.jsx("button",{className:(a?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-300 hover:bg-gray-400 text-gray-900")+" px-2 py-1 text-xs rounded",onClick:async()=>{try{await navigator.clipboard.writeText(t),i.success("已复制到剪贴板")}catch{i.error("复制失败")}},children:"复制"})]})]},r))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs(s.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25,delay:.1},className:(a?"bg-gray-800/80 ring-1 ring-gray-700":"bg-white/90 ring-1 ring-gray-200")+" rounded-2xl shadow-xl p-6 backdrop-blur",id:"apply-section","aria-labelledby":"apply-section-title",children:[e.jsx("div",{className:"font-medium mb-3",children:"提交品牌合作申请"}),e.jsx("label",{htmlFor:"contact-input",className:"sr-only",children:"联系人姓名"}),e.jsx("input",{id:"contact-input",value:x,onChange:e=>m(e.target.value),className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mb-1 min-h-[44px]",placeholder:"联系人姓名",autoCapitalize:"none",autoCorrect:"off"}),!$.nameOk&&e.jsx("div",{className:"mb-2 text-xs text-red-600",children:$.nameMsg}),e.jsx("label",{htmlFor:"phone-input",className:"sr-only",children:"联系方式（手机/微信）"}),e.jsx("input",{id:"phone-input",value:g,onChange:e=>h(e.target.value),className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mb-1 min-h-[44px]",placeholder:"联系方式（手机/微信）",autoCapitalize:"none",autoCorrect:"off",inputMode:"text",enterKeyHint:"next"}),!$.phoneOk&&e.jsx("div",{className:"mb-2 text-xs text-red-600",children:$.phoneMsg}),e.jsx("label",{htmlFor:"idea-input",className:"sr-only",children:"合作想法"}),e.jsx("textarea",{id:"idea-input",value:u,onChange:e=>p(e.target.value),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&A&&(e.preventDefault(),D())},className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full h-24 px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 mb-2",placeholder:`合作想法（基于 ${r.name} ）`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send"}),!$.ideaOk&&e.jsx("div",{className:"mb-3 text-xs text-red-600",children:$.ideaMsg}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:D,disabled:!A,"aria-disabled":!A,className:"bg-gradient-to-r from-red-600 to-pink-600 text-white px-4 py-2 rounded-lg shadow min-h-[44px] "+(A?"hover:from-red-700 hover:to-pink-700":"opacity-50 cursor-not-allowed"),children:"提交申请"}),e.jsx("button",{onClick:()=>{m(""),h(""),p("")},className:(a?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300")+" px-4 py-2 rounded-lg min-h-[44px]",children:"清空表单"})]})]}),e.jsxs(s.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25,delay:.15},className:`lg:col-span-2 ${a?"bg-gray-800/80 ring-1 ring-gray-700":"bg-white/90 ring-1 ring-gray-200"} rounded-2xl shadow-xl p-6 backdrop-blur`,id:"list-section","aria-labelledby":"list-section-title",children:[e.jsx("div",{className:"font-medium mb-3",children:"当前该品牌的合作申请"}),e.jsxs("div",{className:"mb-3 flex flex-wrap gap-2 items-center","aria-live":"polite",children:[e.jsx("button",{onClick:()=>{const e=E,t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`${r.name}-合作申请.json`,s.click(),URL.revokeObjectURL(a)},className:(a?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300")+" px-3 py-2 rounded-lg transition-colors",children:"导出JSON"}),e.jsx("button",{onClick:()=>{const e=[["品牌","说明","状态","奖励","更新时间"],...E.map(e=>[e.brandName,e.description.replace(/\n/g," "),e.status,e.reward,new Date(e.updatedAt).toLocaleString()])].map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(",")).join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`${r.name}-合作申请.csv`,s.click(),URL.revokeObjectURL(a)},className:(a?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300")+" px-3 py-2 rounded-lg transition-colors",children:"导出CSV"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"全部",count:S.length},{key:"pending",label:"待处理",count:_.pending},{key:"negotiating",label:"洽谈中",count:_.negotiating},{key:"approved",label:"已通过",count:_.approved},{key:"rejected",label:"已拒绝",count:_.rejected}].map(t=>e.jsxs("button",{onClick:()=>v(t.key),className:"px-3 py-1 rounded-full text-sm ring-1 "+(f===t.key?"bg-blue-600 text-white ring-blue-600":a?"bg-gray-800 text-gray-300 ring-gray-700":"bg-white text-gray-900 ring-gray-200"),children:[t.label,e.jsx("span",{className:"ml-2 inline-block px-2 py-0.5 rounded-full text-xs "+(f===t.key?"bg-white text-blue-600":a?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"),children:t.count})]},t.key))}),e.jsxs("select",{value:N,onChange:e=>w(e.target.value),className:(a?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:[e.jsx("option",{value:"recent",children:"按更新时间(新→旧)"}),e.jsx("option",{value:"old",children:"按更新时间(旧→新)"}),e.jsx("option",{value:"status",children:"按状态"})]})]}),0===E.length?e.jsx("div",{className:"text-sm opacity-70",children:"暂无申请，欢迎成为第一个合作发起者～"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:a?"bg-gray-700":"bg-gray-100",children:[e.jsx("th",{className:"text-left px-3 py-2",children:"品牌"}),e.jsx("th",{className:"text-left px-3 py-2",children:"说明"}),e.jsx("th",{className:"text-left px-3 py-2",children:"状态"}),e.jsx("th",{className:"text-left px-3 py-2",children:"奖励"}),e.jsx("th",{className:"text-left px-3 py-2",children:"更新时间"}),e.jsx("th",{className:"text-left px-3 py-2",children:"操作"})]})}),e.jsx("tbody",{children:E.map(t=>e.jsxs("tr",{className:(a?"border-gray-700 hover:bg-gray-800/60":"border-gray-200 hover:bg-gray-50")+" border-t transition-colors",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.brandLogo,alt:t.brandName,className:"w-8 h-8 rounded",loading:"lazy",decoding:"async"}),e.jsx("span",{children:t.brandName})]})}),e.jsx("td",{className:"px-3 py-2",children:t.description}),e.jsx("td",{className:"px-3 py-2",children:t.status}),e.jsx("td",{className:"px-3 py-2",children:t.reward}),e.jsx("td",{className:"px-3 py-2",children:new Date(t.updatedAt).toLocaleString()}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>I(t.id,"negotiating"),className:(a?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-200 text-gray-900 hover:bg-gray-300")+" px-2 py-1 rounded transition-colors",children:"标记洽谈"}),e.jsx("button",{onClick:()=>I(t.id,"approved"),className:"px-2 py-1 rounded bg-green-500 hover:bg-green-600 text-white transition-colors",children:"通过"}),e.jsx("button",{onClick:()=>I(t.id,"rejected"),className:"px-2 py-1 rounded bg-red-500 hover:bg-red-600 text-white transition-colors",children:"拒绝"})]})})]},t.id))})]})})]})]})]})}},Symbol.toStringTag,{value:"Module"})),ta=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:a}=j(),[r,s]=t.useState("把麻花做成赛博朋克风"),[i,l]=t.useState("桂发祥麻花传统工艺强调多褶形态、香酥口感与津味表达"),n=Ke(r,i),[o,d]=t.useState(()=>{try{const e=localStorage.getItem("AUTH_FEEDBACK_ACKS");return e?JSON.parse(e):{}}catch{return{}}});t.useEffect(()=>{try{localStorage.setItem("AUTH_FEEDBACK_ACKS",JSON.stringify(o))}catch{}},[o]);const c=t.useMemo(()=>{const e=e=>e.toLowerCase().split(/[^a-zA-Z0-9\u4e00-\u9fa5]+/).filter(Boolean),t=e(r),a=e(i),s={},l={};t.forEach(e=>s[e]=(s[e]||0)+1),a.forEach(e=>l[e]=(l[e]||0)+1);const n=Array.from(new Set([...t,...a])),o=n.filter(e=>s[e]&&l[e]||0),d=n.filter(e=>s[e]?!l[e]:0),c=n.filter(e=>l[e]?!s[e]:0);return{top:o.map(e=>({token:e,input:s[e],knowledge:l[e]})).sort((e,t)=>t.input+t.knowledge-(e.input+e.knowledge)).slice(0,10),commonCount:o.length,uniqueA:d.length,uniqueB:c.length}},[r,i]);return e.jsx("div",{className:"min-h-screen "+(a?"bg-gray-900 text-white":"bg-white text-gray-900"),children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"纯正性检查与评分"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"输入内容"}),e.jsx("textarea",{value:r,onChange:e=>s(e.target.value),className:(a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full h-32 px-4 py-3 rounded-lg border",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"知识库内容"}),e.jsx("textarea",{value:i,onChange:e=>l(e.target.value),className:(a?"bg-gray-700 text-white":"bg-gray-50 text-gray-900")+" w-full h-32 px-4 py-3 rounded-lg border",autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-2",children:"评分"}),e.jsx("div",{className:"text-3xl font-bold",children:n.score}),e.jsx("div",{className:"mt-3 text-sm",children:"阈值≥70%"}),e.jsx("ul",{className:"mt-3 text-sm",children:n.feedback.map((t,r)=>e.jsxs("li",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:()=>{return e=t,void d(t=>({...t,[e]:!t[e]}));var e},className:"text-xs px-3 py-2 rounded-full min-h-[44px] "+(o[t]?"bg-green-600 text-white":a?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:o[t]?"已优化":"标记已优化"})]},r))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-4 font-medium",children:"共同关键词频次对比"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(x,{children:e.jsxs(m,{data:c.top,children:[e.jsx(g,{dataKey:"token",tick:{fontSize:12}}),e.jsx(h,{}),e.jsx(u,{}),e.jsx(p,{}),e.jsx(y,{dataKey:"input",fill:"#f87171",name:"输入"}),e.jsx(y,{dataKey:"knowledge",fill:"#60a5fa",name:"知识库"})]})})})]}),e.jsxs("div",{className:(a?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-4 font-medium",children:"关键词组成比例"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(x,{children:e.jsxs(b,{children:[e.jsxs(f,{dataKey:"value",data:[{name:"共同",value:c.commonCount},{name:"仅输入",value:c.uniqueA},{name:"仅知识库",value:c.uniqueB}],outerRadius:100,label:!0,children:[e.jsx(v,{fill:"#34d399"}),e.jsx(v,{fill:"#f87171"}),e.jsx(v,{fill:"#60a5fa"})]}),e.jsx(u,{})]})})})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),aa=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),{state:l,setState:n,reset:o}=t.useContext(Ee),[d,c]=t.useState(1),x=a(),[m,g]=t.useState(""),[h,u]=t.useState([]),[p,y]=t.useState(!1),[b,f]=t.useState(""),[v,N]=t.useState([]),[w,k]=t.useState("landscape"),C=()=>c(e=>Math.min(4,e+1)),S=()=>c(e=>Math.max(1,e-1));return e.jsxs("main",{className:"relative container mx-auto px-6 md:px-8 py-12",children:[e.jsx("div",{className:"pointer-events-none absolute -top-10 -left-10 w-64 h-64 bg-gradient-to-br from-blue-500/20 via-red-500/20 to-yellow-500/20 blur-3xl rounded-full"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-10 -right-10 w-72 h-72 bg-gradient-to-tr from-red-500/15 via-yellow-500/15 to-blue-500/15 blur-3xl rounded-full"}),e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"共创向导"}),e.jsx("div",{className:"w-20 h-1 rounded-full bg-gradient-to-r from-blue-600 via-red-500 to-yellow-500"})]}),e.jsxs("div",{className:"text-sm",children:["步骤 ",d," / 4"]})]}),1===d&&e.jsxs(s.div,{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"mb-3",children:"选择老字号"}),e.jsx("label",{htmlFor:"brand-input",className:"sr-only",children:"输入或选择品牌"}),e.jsx("input",{id:"brand-input",value:l.brandName||"",onChange:e=>{const t=e.target.value,a=Y.find(e=>e.name===t);n(a?{brandId:a.id,brandName:a.name}:{brandId:void 0,brandName:t})},placeholder:"输入品牌名称（如：桂发祥十八街麻花）",className:(r?"bg-gray-700 text-white focus:ring-offset-gray-800":"bg-gray-50 text-gray-900")+" w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"}),(()=>{const t=(l.brandName||"").trim().toLowerCase(),a=t?Y.filter(e=>e.name.toLowerCase().includes(t)).slice(0,5):Y.slice(0,5);return e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:a.map(t=>e.jsx("button",{onClick:()=>n({brandId:t.id,brandName:t.name}),className:"text-xs px-3 py-1 rounded-full border "+(r?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t.name},t.id))})})(),e.jsx("div",{className:"mt-4",children:(()=>{const t=Y.find(e=>e.id===l.brandId||e.name===(l.brandName||"")),a=t?.image||`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(`Tianjin ${l.brandName||"brand"} product shot, cultural style`)}&image_size=1920x1080`;return e.jsx(_,{src:a,alt:"brand",ratio:"landscape",rounded:"lg"})})()}),e.jsx("div",{className:"mt-6 flex justify-end gap-2",children:e.jsx("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg",disabled:!(l.brandName||"").trim(),children:"下一步"})})]}),2===d&&e.jsxs(s.div,{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"mb-3",children:"用户输入"}),e.jsx("div",{className:(r?"text-gray-400":"text-gray-600")+" text-xs mb-4",children:"建议包含：品牌/产品、使用场景、风格与元素、目标受众。例如：桂发祥门店促销海报，国潮风，含回纹元素与天津地标。"}),e.jsx("textarea",{value:l.inputText||"",onChange:e=>{e.target.value.length<=500&&n({inputText:e.target.value})},placeholder:"示例：为桂发祥十八街麻花设计一组节日KV，颜色中国红+金色，加入海河地标与回纹元素，调性喜庆、高端、国潮。",className:`${r?"bg-gray-700 text-white":"bg-gray-50 text-gray-900"} w-full h-36 px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 ${r?"focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-800":"focus:ring-red-500 focus:ring-offset-2"}`}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("div",{className:"w-1/2 h-1 rounded-full bg-gray-200 overflow-hidden",children:e.jsx("div",{className:"h-1 "+(r?"bg-red-500":"bg-red-600"),style:{width:`${Math.min(100,Math.round((l.inputText||"").length/500*100))}%`}})}),e.jsxs("div",{className:"text-xs opacity-60",children:[(l.inputText||"").length,"/500"]})]}),(()=>{const t=({label:t,onClick:a})=>e.jsx(s.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:a,className:`text-xs px-3 py-1.5 rounded-full transition-all ${r?"bg-gray-700 text-white ring-1 ring-gray-600 hover:bg-gray-600":"bg-white text-gray-900 ring-1 ring-gray-200 hover:bg-gray-50"} shadow-sm`,children:t}),a=({title:a,icon:s,tags:i})=>e.jsxs("div",{className:`${r?"bg-gray-800":"bg-white"} rounded-xl p-3 ring-1 ${r?"ring-gray-700":"ring-gray-200"} shadow-sm`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("i",{className:`${s} ${r?"text-gray-300":"text-gray-600"} mr-2`}),e.jsx("span",{className:"text-xs opacity-80",children:a})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(a=>e.jsx(t,{label:a,onClick:()=>(e=>n({inputText:`${(l.inputText||"").trim()} ${e}`.trim()}))(a)},a))})]});return e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(a,{title:"风格",icon:"fas fa-palette",tags:["国潮","极简","复古","现代","黑金","赛博"]}),e.jsx(a,{title:"场景",icon:"fas fa-store",tags:["门店","展会","线上活动","校园联名","节日档"]}),e.jsx(a,{title:"元素",icon:"fas fa-shapes",tags:["回纹","祥云","京剧元素","海河地标","杨柳青年画"]}),e.jsx(a,{title:"语气",icon:"far fa-comment",tags:["喜庆","高端","亲民","科技感","自然"]})]})})(),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>n({inputText:`${l.brandName||"品牌"} 节日KV设计；主色中国红+金色；包含海河地标与回纹元素；调性喜庆高端；输出短文案与视觉要点。`}),className:`text-xs px-3 py-1.5 rounded-lg ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-white text-gray-900 hover:bg-gray-50"} ring-1 ${r?"ring-gray-600":"ring-gray-200"}`,children:"KV海报模板"}),e.jsx("button",{onClick:()=>n({inputText:`${l.brandName||"品牌"} 品牌故事短文；包含历史背景、核心价值、文化元素与现代演绎；语气温暖亲民；输出用于社交平台的文案。`}),className:`text-xs px-3 py-1.5 rounded-lg ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-white text-gray-900 hover:bg-gray-50"} ring-1 ${r?"ring-gray-600":"ring-gray-200"}`,children:"品牌故事模板"}),e.jsx("button",{onClick:()=>n({inputText:`${l.brandName||"品牌"} × 高校联名企划；包含活动主题、视觉风格、渠道与时间安排、周边清单；调性年轻活力；输出企划纲要。`}),className:`text-xs px-3 py-1.5 rounded-lg ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-white text-gray-900 hover:bg-gray-50"} ring-1 ${r?"ring-gray-600":"ring-gray-200"}`,children:"联名企划模板"}),e.jsx("button",{onClick:()=>n({inputText:"",imageUrl:void 0}),className:`text-xs px-3 py-1.5 rounded-lg ${r?"bg-gray-700 text-white hover:bg-gray-600":"bg-white text-gray-900 hover:bg-gray-50"} ring-1 ${r?"ring-gray-600":"ring-gray-200"}`,children:"清空输入"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(U,{accept:"audio/*",variant:"audio",title:"上传语音",description:"支持拖拽与点击选择，自动转文字",onFile:async e=>{const t=await je(e);n({inputText:t})}}),e.jsx(U,{accept:"image/*",variant:"image",title:"上传参考图片",description:"支持拖拽与点击选择，自动显示预览",onFile:e=>{const t=URL.createObjectURL(e);n({imageUrl:t})}})]}),l.imageUrl&&e.jsx(_,{src:l.imageUrl,alt:"upload",ratio:"landscape",rounded:"lg",className:"mt-4"}),e.jsxs("div",{className:"mt-6 rounded-2xl p-4 "+(r?"bg-gray-700":"bg-gray-50"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-medium",children:"AI建议与文案"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{const e=l.inputText?.trim()||`${l.brandName||"品牌"} 创意方向与文案`;y(!0);try{const t=E.generateCreativeDirections(e);u(t);const a=E.recommendCulturalElements(e);N(a);const r="请用中文分点回答，避免 Markdown 标题或装饰符（如###、####、** 等），每点精炼。",s=(e.match(/[A-Za-z]/g)||[]).length,i=s>(e.match(/[\u4e00-\u9fa5]/g)||[]).length&&s>0?e:`${r}\n\n${e}`;await E.generateResponse(i,{onDelta:e=>g(e)})}catch{}y(!1)},disabled:!(l.inputText||"").trim(),className:"px-3 py-1.5 rounded-lg text-white text-sm "+((l.inputText||"").trim()?"bg-red-600 hover:bg-red-700":"bg-gray-400 cursor-not-allowed"),children:"生成"}),e.jsx("button",{onClick:()=>{m.trim()&&n({inputText:m})},className:`${r?"bg-gray-600 hover:bg-gray-500 text-white":"bg-white hover:bg-gray-50"} px-3 py-1.5 rounded-lg ring-1 ${r?"ring-gray-500":"ring-gray-200"} text-sm`,children:"应用到输入"}),e.jsx("button",{onClick:async()=>{if(m.trim())try{const e=await Ne(m,{format:"mp3"});f(e.audioUrl)}catch(e){i.error(e?.message||"朗读失败")}else i.warning("请先生成文案")},className:"px-3 py-1.5 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm",disabled:!m.trim(),children:"朗读"}),e.jsx("button",{onClick:async()=>{if(m.trim())try{await navigator.clipboard.writeText(m),i.success("已复制到剪贴板")}catch{}else i.warning("无可复制内容")},className:`${r?"bg-gray-600 text-white":"bg-white text-gray-700"} px-3 py-1.5 rounded-lg ring-1 ${r?"ring-gray-500 hover:bg-gray-500":"ring-gray-200 hover:bg-gray-50"} text-sm`,children:"复制"}),e.jsx("button",{onClick:()=>{const e=`${(l.inputText||"").trim()} ${(m||"").trim()}`.trim()||"Tianjin cultural design";n({variants:[{script:"方案A",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant A")}&image_size=1024x1024`,video:"视频占位A"},{script:"方案B",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant B")}&image_size=1024x1024`,video:"视频占位B"},{script:"方案C",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant C")}&image_size=1024x1024`,video:"视频占位C"}]}),c(3)},className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm",children:"一键生成并进入下一步"})]})]}),h.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:h.map((t,a)=>e.jsx("button",{onClick:()=>n({inputText:`${(l.inputText||"").trim()} ${t}`.trim()}),className:"text-xs px-3 py-1 rounded-full border "+(r?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t},a))}),v.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map((t,a)=>e.jsx("button",{onClick:()=>n({inputText:`${(l.inputText||"").trim()} ${t}`.trim()}),className:"text-xs px-3 py-1 rounded-full border "+(r?"border-gray-600 text-gray-300 hover:border-gray-500":"border-gray-300 text-gray-700 hover:border-gray-400"),children:t},a))}),e.jsx("div",{className:(r?"text-gray-300":"text-gray-700")+" text-sm whitespace-pre-wrap min-h-20",children:m}),b&&e.jsx("audio",{controls:!0,src:b,className:"mt-2 w-full"}),p&&e.jsx("div",{className:(r?"text-gray-500":"text-gray-400")+" text-xs mt-2",children:"生成中…"})]}),e.jsxs("div",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-xl p-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-medium",children:"实时预览"}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+(r?"bg-gray-800 text-gray-300 ring-1 ring-gray-700":"bg-white text-gray-700 ring-1 ring-gray-200"),children:"Beta"})]}),(()=>{const t=(l.brandName||"").trim()||"品牌",a=`${t} ${(l.inputText||"").trim()}`.trim()||t,i=`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(a)}&image_size=${{landscape:"1920x1080",square:"1024x1024",portrait:"1080x1920"}[w]}`;return e.jsxs("div",{className:"relative",children:[e.jsx(_,{src:i,alt:"preview",ratio:w,rounded:"lg",withBorder:!0}),e.jsx(s.span,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"absolute top-3 left-3 text-xs px-2 py-1 rounded-full "+(r?"bg-gray-800/70 ring-1 ring-gray-700 text-gray-200":"bg-white/80 ring-1 ring-gray-200 text-gray-700"),children:t}),(()=>{const t=(l.inputText||"").toLowerCase(),a=e=>e.filter(e=>t.includes(e.toLowerCase())),s=a(["国潮","极简","复古","现代","黑金","赛博"]),i=a(["门店","展会","线上活动","校园联名","节日档"]),n=a(["喜庆","高端","亲民","科技感","自然"]),o=[s[0],i[0],n[0]].filter(Boolean);return 0===o.length?null:e.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:o.map((t,a)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(r?"bg-gray-800/70 ring-1 ring-gray-700 text-gray-200":"bg-white/80 ring-1 ring-gray-200 text-gray-700"),children:t},a))})})()]})})(),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{onClick:()=>k("landscape"),className:`text-xs px-2 py-1 rounded ${"landscape"===w?"bg-blue-600 text-white":r?"bg-gray-800 text-gray-300":"bg-white text-gray-700"} ring-1 ${r?"ring-gray-700":"ring-gray-200"}`,children:"横版"}),e.jsx("button",{onClick:()=>k("square"),className:`text-xs px-2 py-1 rounded ${"square"===w?"bg-blue-600 text-white":r?"bg-gray-800 text-gray-300":"bg-white text-gray-700"} ring-1 ${r?"ring-gray-700":"ring-gray-200"}`,children:"方形"}),e.jsx("button",{onClick:()=>k("portrait"),className:`text-xs px-2 py-1 rounded ${"portrait"===w?"bg-blue-600 text-white":r?"bg-gray-800 text-gray-300":"bg-white text-gray-700"} ring-1 ${r?"ring-gray-700":"ring-gray-200"}`,children:"竖版"})]}),(()=>{const t=(l.inputText||"").toLowerCase(),a=e=>e.filter(e=>t.includes(e.toLowerCase())),s=a(["国潮","极简","复古","现代","黑金","赛博"]),i=a(["门店","展会","线上活动","校园联名","节日档"]),o=a(["回纹","祥云","京剧","京剧元素","海河","杨柳青年画"]),d=a(["喜庆","高端","亲民","科技感","自然"]),c=[];return 0===s.length&&c.push("风格"),0===i.length&&c.push("场景"),0===o.length&&c.push("元素"),0===d.length&&c.push("语气"),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"text-xs opacity-60",children:"摘要"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[...l.brandName?[l.brandName]:[],...s,...i,...o,...d].slice(0,8).map((t,a)=>e.jsx("button",{onClick:()=>n({inputText:`${(l.inputText||"").trim()} ${t}`.trim()}),className:`text-xs px-3 py-1 rounded-full ${r?"bg-gray-800 text-gray-300":"bg-white text-gray-900"} ring-1 ${r?"ring-gray-700 hover:bg-gray-700":"ring-gray-200 hover:bg-gray-50"}`,children:t},a))}),(()=>{const t=l.inputText||"",a=[{key:"中国红",color:"#c40000"},{key:"红",color:"#d32f2f"},{key:"金色",color:"#d4af37"},{key:"黑金",color:"#1f1f1f"},{key:"蓝色",color:"#2563eb"},{key:"绿色",color:"#16a34a"}].filter(e=>t.includes(e.key)).slice(0,3);return 0===a.length?null:e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs opacity-60 mb-1",children:"主色"}),e.jsx("div",{className:"flex items-center gap-2",children:a.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"inline-block w-4 h-4 rounded",style:{backgroundColor:t.color}}),e.jsx("span",{className:"text-xs "+(r?"text-gray-300":"text-gray-700"),children:t.key})]},a))})]})})(),c.length>0&&e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs "+(r?"text-gray-300":"text-gray-700"),children:["建议补充：",c.join("、")]}),e.jsx("button",{onClick:()=>n({inputText:`${(l.inputText||"").trim()} 国潮 门店 回纹 喜庆`.trim()}),className:"text-xs px-2 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white",children:"一键补全"})]})]})})()]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:S,className:(r?"bg-gray-700":"bg-gray-100")+" px-4 py-2 rounded-lg",children:"上一步"}),e.jsx("button",{onClick:C,disabled:!(l.inputText||"").trim(),className:"text-white px-4 py-2 rounded-lg "+((l.inputText||"").trim()?"bg-red-600 hover:bg-red-700":"bg-gray-400 cursor-not-allowed"),children:"下一步"})]})]}),3===d&&e.jsxs(s.div,{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"mb-3",children:"生成三变体"}),e.jsx("button",{onClick:()=>{const e=`${(l.inputText||"").trim()} ${(m||"").trim()}`.trim()||"Tianjin cultural design";n({variants:[{script:"方案A",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant A")}&image_size=1024x1024`,video:"视频占位A"},{script:"方案B",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant B")}&image_size=1024x1024`,video:"视频占位B"},{script:"方案C",image:`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e+" variant C")}&image_size=1024x1024`,video:"视频占位C"}]})},className:"bg-red-600 text-white px-4 py-2 rounded-lg",children:"生成"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:(l.variants||[]).map((t,a)=>e.jsxs("div",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-xl p-4",children:[e.jsx(_,{src:t.image,alt:`variant-${a}`,ratio:"square",rounded:"lg",className:"mb-2"}),e.jsx("div",{className:"text-sm",children:t.script}),e.jsx("div",{className:(r?"bg-gray-800":"bg-white")+" rounded-lg p-2 text-xs mt-2",children:t.video})]},a))}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:S,className:(r?"bg-gray-700":"bg-gray-100")+" px-4 py-2 rounded-lg",children:"上一步"}),e.jsx("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-lg",children:"下一步"})]})]}),4===d&&e.jsxs(s.div,{className:(r?"bg-gray-800":"bg-white")+" rounded-2xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"mb-3",children:"纯正性评分"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-xl p-4",children:[e.jsx("div",{className:"text-sm mb-2",children:"输入"}),e.jsx("div",{className:"text-sm",children:l.inputText||""})]}),e.jsxs("div",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-xl p-4",children:[e.jsx("div",{className:"text-sm mb-2",children:"知识库"}),e.jsx("div",{className:"text-sm",children:(Y.find(e=>e.id===l.brandId||e.name===(l.brandName||""))||Y[0]).story})]}),e.jsxs("div",{className:(r?"bg-gray-700":"bg-gray-50")+" rounded-xl p-4",children:[e.jsx("div",{className:"text-sm mb-2",children:"评分"}),e.jsx("div",{className:"text-3xl font-bold",children:Ke(l.inputText||"",(Y.find(e=>e.id===l.brandId||e.name===(l.brandName||""))||Y[0]).story).score}),e.jsx("ul",{className:"mt-3 text-sm",children:Ke(l.inputText||"",(Y.find(e=>e.id===l.brandId||e.name===(l.brandName||""))||Y[0]).story).feedback.map((t,a)=>e.jsx("li",{className:"mb-1",children:t},a))})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx("button",{onClick:S,className:(r?"bg-gray-700":"bg-gray-100")+" px-4 py-2 rounded-lg",children:"上一步"}),e.jsx("button",{onClick:()=>{const e=`${l.brandName||"作品"} - 生成变体`,t=l.variants?.[0]?.image||l.imageUrl||`https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=${encodeURIComponent(e)}&image_size=1024x1024`,a=ae.addPost({title:e,thumbnail:t,category:"design",tags:[],description:"",creativeDirection:"",culturalElements:[],colorScheme:[],toolsUsed:[]});return o(),x("/square"),a},className:"bg-red-600 text-white px-4 py-2 rounded-lg",children:"发布到广场"})]})]})]})]})}},Symbol.toStringTag,{value:"Module"})),ra=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return j(),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx(T,{title:"数据分析与洞察",subtitle:"深入了解作品表现、用户活动和主题趋势",theme:"indigo",stats:[{label:"总数据点数",value:"10,000+"},{label:"分析维度",value:"7+"},{label:"实时更新",value:"Yes"}],pattern:!0,size:"md"}),e.jsx("div",{className:"mt-8",children:e.jsx(N,{})})]})}},Symbol.toStringTag,{value:"Module"})),sa=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{isDark:r}=j(),{isAuthenticated:i,user:l}=t.useContext(w),n=a(),[o,d]=t.useState("bookmarks"),[c,x]=t.useState([]),[m,g]=t.useState([]),[h,u]=t.useState(!0);t.useEffect(()=>{i&&l?p():n("/login")},[i,l,n]);const p=()=>{u(!0);try{const e=ae.getBookmarkedPosts(),t=ae.getLikedPosts();x(e),g(t)}catch(e){}finally{u(!1)}},y="bookmarks"===o?c:m;return h?e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"加载中..."}),e.jsx("p",{className:r?"text-gray-400":"text-gray-600",children:"正在获取您的收藏和点赞作品"})]})}):e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(s.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"我的收藏"}),e.jsx("p",{className:r?"text-gray-400":"text-gray-600",children:"查看和管理您收藏与点赞的作品"})]}),e.jsx(s.div,{className:"mb-8 p-1 rounded-xl "+(r?"bg-gray-800":"bg-gray-100"),initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>d("bookmarks"),className:"flex-1 py-3 px-6 rounded-lg text-sm font-medium transition-all "+("bookmarks"===o?r?"bg-gray-700 text-white":"bg-white text-red-600 shadow-md":r?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[e.jsx("i",{className:"far fa-bookmark mr-2 "+("bookmarks"===o?"text-red-500":"")}),"我的收藏",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs "+(r?"bg-gray-600":"bg-gray-200"),children:c.length})]}),e.jsxs("button",{onClick:()=>d("likes"),className:"flex-1 py-3 px-6 rounded-lg text-sm font-medium transition-all "+("likes"===o?r?"bg-gray-700 text-white":"bg-white text-red-600 shadow-md":r?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[e.jsx("i",{className:"far fa-heart mr-2 "+("likes"===o?"text-red-500":"")}),"我的点赞",e.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs "+(r?"bg-gray-600":"bg-gray-200"),children:m.length})]})]})}),e.jsx(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:y.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:y.map(t=>e.jsxs(s.div,{className:`rounded-xl overflow-hidden ${r?"bg-gray-800 ring-1 ring-gray-700":"bg-white ring-1 ring-gray-200"} shadow-md transition-all hover:shadow-lg`,whileHover:{y:-5},onClick:()=>n(`/explore/${t.id}`),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n(`/explore/${t.id}`))},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-48 object-cover",loading:"lazy",decoding:"async"}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[t.isBookmarked&&e.jsxs("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx("i",{className:"far fa-bookmark mr-1"}),"已收藏"]}),t.isLiked&&e.jsxs("div",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx("i",{className:"far fa-heart mr-1"}),"已点赞"]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2 line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center justify-between text-xs mb-3",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-full "+(r?"bg-gray-700":"bg-gray-100"),children:t.category}),e.jsx("span",{className:r?"text-gray-400":"text-gray-600",children:t.date})]}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-eye mr-1"}),t.views]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-thumbs-up mr-1"}),t.likes]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"far fa-comment mr-1"}),t.comments.length]})]})})]})]},t.id))}):e.jsxs("div",{className:`rounded-xl p-12 text-center ${r?"bg-gray-800":"bg-white"} shadow-md`,children:[e.jsx("div",{className:"text-5xl text-gray-400 mb-4",children:"bookmarks"===o?e.jsx("i",{className:"far fa-bookmark"}):e.jsx("i",{className:"far fa-heart"})}),e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["暂无","bookmarks"===o?"收藏":"点赞","作品"]}),e.jsxs("p",{className:(r?"text-gray-400":"text-gray-600")+" mb-6",children:["去探索页面","bookmarks"===o?"收藏":"点赞","一些作品吧"]}),e.jsx("button",{onClick:()=>n("/explore"),className:"px-6 py-3 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",children:"去探索"})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{Pe as A,ea as B,dt as C,gt as D,et as E,Ie as F,xt as G,we as H,mt as I,aa as J,ra as K,ve as L,At as M,Xe as N,ot as P,_e as R,He as S,st as T,sa as U,$e as W,Ce as a,Re as b,Qe as c,it as d,lt as e,nt as f,ct as g,ut as h,$t as i,It as j,Ot as k,Dt as l,zt as m,Ut as n,qt as o,Bt as p,Ht as q,Gt as r,Kt as s,Jt as t,Yt as u,Wt as v,Zt as w,Xt as x,Qt as y,ta as z};
